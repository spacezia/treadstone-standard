"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[658],{73252:function(e,n,t){var a=t(26068),r=t.n(a),i=t(48305),l=t.n(i),u=t(17906),o=t(14471),c=t(64684),s=t(37348),d=t(45144),m=t(60247),p=t(50959),f=t(64155),v=t(20370),h=t(28117),x=t(33600),g=t(11527);n.Z=function(e){var n=e.actionRef,t=e.selectedCallback,a=(0,p.useState)(!1),i=l()(a,2),j=i[0],y=i[1],b=(0,p.useState)([]),Z=l()(b,2),I=Z[0],k=Z[1],C=(0,p.useState)([]),w=l()(C,2),S=w[0],T=w[1],N=(0,p.useState)([]),E=l()(N,2),P=E[0],R=E[1],O=(0,p.useState)(!1),A=l()(O,2),F=A[0],z=A[1],D=(0,p.useState)([]),L=l()(D,2),M=L[0],B=L[1],V=(0,p.useState)(),U=l()(V,2),G=U[0],H=U[1],K=(0,x.useRequest)(v.FT,{manual:!0}),q=K.data,_=K.loading,J=K.run,Y=(0,x.useRequest)(v._j,{manual:!0,onSuccess:function(e){B(e||[]);var n=null==e?void 0:e[0];H(n),n&&J({groupId:n.id})}}),$=Y.run;return(0,p.useImperativeHandle)(n,(function(){return{open:function(){y(!0),$()}}})),(0,g.jsx)(u.Z,{width:700,title:"选择接口",placement:"right",destroyOnClose:!0,maskClosable:!1,open:j,extra:(0,g.jsxs)(o.Z,{children:[(0,g.jsx)(c.ZP,{onClick:function(){y(!1)},children:"取消"}),(0,g.jsx)(c.ZP,{type:"primary",loading:F,onClick:function(){P.length&&(z(!0),null==t||t(P),z(!1)),y(!1)},children:"确定"})]}),onClose:function(){y(!1)},children:(0,g.jsx)(s.Z,{spinning:_,style:{width:"100%"},children:M?(0,g.jsx)(h.Z,{rowKey:"uuid",dataSource:I||[],tableAlertRender:!1,pagination:!1,search:!1,rowSelection:{type:"checkbox",selectedRowKeys:S,preserveSelectedRowKeys:!1,onChange:function(e,n){T(e),R(n)}},columns:[{title:"name",dataIndex:"name"},{title:"title",dataIndex:"title"},{title:"description",dataIndex:"description"}],toolbar:{search:(0,g.jsxs)(o.Z.Compact,{children:[(0,g.jsx)(d.default,{showSearch:!0,style:{width:200},placeholder:"选择对象",value:null==G?void 0:G.uuid,options:null==M?void 0:M.map((function(e){return{label:e.name,value:e.uuid}})),filterOption:function(e,n){var t,a,r;return null===(t=null!==(a=null==n||null===(r=n.label)||void 0===r?void 0:r.toString())&&void 0!==a?a:"")||void 0===t?void 0:t.toLowerCase().includes(e.toLowerCase())},onChange:function(e){var n=M.find((function(n){return n.uuid===e}));H(n),n&&J({groupId:n.id})}}),(0,g.jsx)(d.default,{showSearch:!0,style:{width:240},placeholder:"选择对象",options:null==q?void 0:q.map((function(e){return{label:e.name,value:e.id}})),filterOption:function(e,n){var t,a,r;return null===(t=null!==(a=null==n||null===(r=n.label)||void 0===r?void 0:r.toString())&&void 0!==a?a:"")||void 0===t?void 0:t.toLowerCase().includes(e.toLowerCase())},onChange:function(e){var n=null==q?void 0:q.find((function(n){return n.id===e}));if(null!=n&&n.properties){var t,a=null===(t=Object.keys(n.properties))||void 0===t?void 0:t.map((function(e){var t=n.properties[e];return r()({name:e,title:t.title,uuid:(0,f.Z)(),dataIndex:e},t)}));k(a||[])}}})]})}}):(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,g.jsx)(m.Z,{description:"暂无接口项目，请前往接口管理创建接口项目"}),(0,g.jsx)(c.ZP,{type:"primary",onClick:function(){x.history.push("/datasources/dataservice")},children:"接口管理"})]})})})}},15030:function(e,n,t){t.d(n,{Z:function(){return w}});var a=t(90228),r=t.n(a),i=t(87999),l=t.n(i),u=t(48305),o=t.n(u),c=t(35363),s=t(14471),d=t(64684),m=t(11204),p=t(22825),f=t(50959),v=t(39821),h=t(20370),x=t(16166),g=t(28117),j=t(7313),y=t(11527),b=function(e){var n=e.actionRef,t=(0,f.useState)(!1),a=o()(t,2),i=a[0],u=a[1],s=(0,f.useState)(),d=o()(s,2),m=d[0],p=d[1],v=function(){var e=l()(r()().mark((function e(n){var t;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.Lk)(n);case 2:null!=(t=e.sent)&&t.success&&p(t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return f.useImperativeHandle(n,(function(){return{open:function(e){u(!0),v(e)}}})),(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(c.Z,{width:1e3,title:"接口详情",destroyOnClose:!0,open:i,onCancel:function(){u(!1)},afterClose:function(){},onOk:function(){},children:(0,y.jsxs)(j.vY,{title:"基础信息",children:[(0,y.jsx)(j.vY.Item,{label:"名称",children:null==m?void 0:m.name}),(0,y.jsx)(j.vY.Item,{label:"路径",copyable:!0,children:null==m?void 0:m.path}),(0,y.jsx)(j.vY.Item,{label:"请求方式",children:null==m?void 0:m.method}),(0,y.jsx)(j.vY.Item,{label:"描述",children:null==m?void 0:m.description})]})})})},Z=t(21686),I=t(89862),k=t(56909),C=t(33600),w=function(e){var n=e.actionRef,t=e.selectedCallback,a=(0,f.useState)(!1),i=o()(a,2),u=i[0],j=i[1],w=(0,f.useState)(!1),S=o()(w,2),T=S[0],N=S[1],E=(0,f.useState)(),P=o()(E,2),R=P[0],O=P[1],A=(0,f.useState)(""),F=o()(A,2),z=F[0],D=F[1],L=(0,f.useState)(),M=o()(L,2),B=M[0],V=M[1],U=(0,f.useState)([]),G=o()(U,2),H=G[0],K=G[1],q=(0,f.useState)([]),_=o()(q,2),J=_[0],Y=_[1],$=f.useRef(),W=f.useRef(),Q=f.useRef(),X=(0,C.useRequest)(h._j,{manual:!0,onSuccess:function(e){V(null==e?void 0:e[0])}}),ee=X.data,ne=X.loading,te=X.run,ae=X.refresh;return f.useImperativeHandle(n,(function(){return{open:function(e){j(!0),O(e),te()}}})),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(c.Z,{width:1200,title:"接口管理",centered:!0,zIndex:299,destroyOnClose:!0,maskClosable:!0,open:u,onCancel:function(){j(!1)},afterClose:function(){Y([]),K([])},styles:{body:{minHeight:"75vh"}},footer:(0,y.jsxs)(s.Z,{children:[(0,y.jsx)(d.ZP,{onClick:function(){j(!1)},children:"取消"}),(0,y.jsx)(d.ZP,{type:"primary",disabled:!(null!=H&&H.length),onClick:l()(r()().mark((function e(){var n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null==H?void 0:H[0],null==t||t(n,R),j(!1);case 3:case"end":return e.stop()}}),e)}))),children:"确定"})]}),children:(0,y.jsx)(g.Z,{rowKey:"id",size:"small",loading:ne,actionRef:$,tableAlertOptionRender:!1,tableAlertRender:!1,pagination:{pageSize:16},search:!1,params:{keyword:z},headerTitle:(0,y.jsx)(m.Z.Search,{value:z,style:{width:360},placeholder:"名称/描述/路径",onChange:function(e){return D(e.target.value)},enterButton:(0,y.jsx)(d.ZP,{type:"primary",icon:(0,y.jsx)(Z.Z,{})})},"search"),toolBarRender:function(){return[(0,y.jsx)(d.ZP,{loading:T,icon:(0,y.jsx)(I.Z,{}),onClick:l()(r()().mark((function e(){var n,t;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!B){e.next=7;break}return N(!0),e.next=4,(0,h.yv)(B.id);case 4:n=e.sent,N(!1),null!=n&&n.success&&(null===(t=$.current)||void 0===t||t.reload());case 7:case"end":return e.stop()}}),e)}))),children:"同步接口配置"},"sync"),(0,y.jsx)(p.Z,{menu:{items:null==ee?void 0:ee.map((function(e){return{label:e.name,key:e.id.toString()}})),onClick:function(e){var n,t=e.key,a=ee.find((function(e){return e.id.toString()===t}));V(a),null===(n=$.current)||void 0===n||n.reload()}},children:(0,y.jsx)(d.ZP,{children:(0,y.jsxs)(s.Z,{children:[null==B?void 0:B.name,(0,y.jsx)(k.Z,{})]})})},"list")]},request:function(e){var n=e.current,t=e.pageSize,a=e.keyword,r={groupId:null==B?void 0:B.id};return a&&Object.assign(r,{OR:[{name:{contains:a}},{path:{contains:a}},{summary:{contains:a}}]}),(0,h.KR)({current:n,pageSize:t,where:(0,x.kL)(r)})},rowSelection:{type:"radio",selectedRowKeys:J,preserveSelectedRowKeys:!1,onChange:function(e,n){Y(e),K(n)}},columns:[{title:"名称",dataIndex:"name",copyable:!0},{title:"描述",dataIndex:"summary"},{title:"路径",dataIndex:"path",copyable:!0},{title:"请求方式",dataIndex:"method"},{title:"操作",valueType:"option",render:function(e,n){return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(d.ZP,{type:"link",size:"small",onClick:function(){var e;null===(e=W.current)||void 0===e||e.open(n.id)},children:"详情"}),(0,y.jsx)(d.ZP,{type:"link",size:"small",danger:!0,children:"删除"})]})}}]})}),(0,y.jsx)(b,{actionRef:W}),(0,y.jsx)(v.Z,{actionRef:Q,submitCallback:function(){ae()}})]})}},71625:function(e,n,t){var a=t(26068),r=t.n(a),i=t(67825),l=t.n(i),u=t(90228),o=t.n(u),c=t(87999),s=t.n(c),d=t(48305),m=t.n(d),p=t(17906),f=t(14471),v=t(64684),h=t(37348),x=t(45144),g=t(60247),j=t(74230),y=t(50959),b=t(7733),Z=t(20370),I=t(73115),k=t(54381),C=t(81796),w=t(11527),S=["id"];n.Z=function(e){var n=e.modalRef,t=e.selectedCallback,a=(0,y.useState)([]),i=m()(a,2),u=i[0],c=i[1],d=(0,y.useState)([]),T=m()(d,2),N=T[0],E=T[1],P=(0,y.useState)([]),R=m()(P,2),O=R[0],A=R[1],F=(0,y.useState)(!1),z=m()(F,2),D=z[0],L=z[1],M=(0,y.useState)([]),B=m()(M,2),V=B[0],U=B[1],G=(0,y.useState)([]),H=m()(G,2),K=H[0],q=H[1],_=(0,y.useState)([]),J=m()(_,2),Y=J[0],$=J[1],W=(0,y.useState)(),Q=m()(W,2),X=Q[0],ee=Q[1],ne=(0,y.useState)(),te=m()(ne,2),ae=te[0],re=te[1],ie=(0,y.useState)(!1),le=m()(ie,2),ue=le[0],oe=le[1],ce=(0,y.useState)(!1),se=m()(ce,2),de=se[0],me=se[1],pe=y.useRef(),fe=function(){var e=s()(o()().mark((function e(n){var t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Z.rn)(n);case 2:null!=(t=e.sent)&&t.success&&E(t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ve=function(){var e=s()(o()().mark((function e(n){var t,a,i,u,c;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.id,a=l()(n,S),e.next=3,(0,Z.CX)(r()({datasource:t},a));case 3:null!=(i=e.sent)&&i.success&&(A(i.data),c=null===(u=i.data)||void 0===u?void 0:u.filter((function(e){return!V.includes(e.columnName)})),$(c||[]),q(c.map((function(e){return e.columnName}))));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),he=function(){var e=s()(o()().mark((function e(){var n,t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oe(!0),e.next=3,(0,Z.r$)();case 3:if(n=e.sent,oe(!1),null==n||!n.success){e.next=11;break}if(c(n.data||[]),!((null===(t=n.data)||void 0===t?void 0:t.length)>0)){e.next=11;break}return re(n.data[0]),e.next=11,fe(n.data[0].id);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,y.useImperativeHandle)(n,(function(){return{open:function(e){U(e||[]),L(!0),he()},reload:function(){he()}}})),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(p.Z,{width:1e3,title:"选择数据源",placement:"right",destroyOnClose:!0,maskClosable:!1,open:D,extra:(0,w.jsxs)(f.Z,{children:[(0,w.jsx)(v.ZP,{onClick:function(){L(!1)},children:"取消"}),(0,w.jsx)(v.ZP,{type:"primary",loading:de,onClick:function(){ae&&Y.length&&(me(!0),null==t||t(Y,ae,X),me(!1)),L(!1)},children:"确定"})]}),afterOpenChange:function(e){e||($([]),q([]),E([]),A([]),U([]),re(void 0),ee(void 0))},onClose:function(){L(!1)},children:(0,w.jsx)(h.Z,{spinning:ue,style:{width:"100%"},children:(null==u?void 0:u.length)>0?(0,w.jsx)(k.Rs,{rowKey:"columnName",dataSource:O,rowSelection:{type:"checkbox",selectedRowKeys:K,preserveSelectedRowKeys:!0,onChange:function(e,n){q(e),$(n)}},metas:{title:{dataIndex:"columnName"},subTitle:{dataIndex:"columnType"}},toolbar:{search:(0,w.jsxs)(f.Z.Compact,{children:[(0,w.jsx)(x.default,{showSearch:!0,style:{width:200},placeholder:"选择对象",value:null==ae?void 0:ae.uuid,options:null==u?void 0:u.map((function(e){return{label:e.title,value:e.uuid}})),filterOption:function(e,n){var t,a,r;return null===(t=null!==(a=null==n||null===(r=n.label)||void 0===r?void 0:r.toString())&&void 0!==a?a:"")||void 0===t?void 0:t.toLowerCase().includes(e.toLowerCase())},onChange:function(){var e=s()(o()().mark((function e(n){var t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.find((function(e){return e.uuid===n})),re(t),!t){e.next=5;break}return e.next=5,fe(t.id);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),(0,w.jsx)(x.default,{showSearch:!0,style:{width:240},placeholder:"选择对象",options:null==N?void 0:N.map((function(e){return{label:e.tableName,value:e.tableName}})),filterOption:function(e,n){var t,a,r;return null===(t=null!==(a=null==n||null===(r=n.label)||void 0===r?void 0:r.toString())&&void 0!==a?a:"")||void 0===t?void 0:t.toLowerCase().includes(e.toLowerCase())},onChange:function(e){var n=N.find((function(n){return n.tableName===e}));ee(n),ae&&ve({id:null==ae?void 0:ae.id,tableName:e})}})]}),actions:[(0,w.jsx)(v.ZP,{type:"primary",icon:(0,w.jsx)(I.Z,{}),onClick:function(){var e;null===(e=pe.current)||void 0===e||e.callCreateView({values:{type:"MYSQL"}})},children:"添加数据库"},"primary")]}}):(0,w.jsx)(g.Z,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:60},description:(0,w.jsx)(j.Z.Text,{strong:!0,children:"还没有数据库连接，请先创建一个吧"}),children:(0,w.jsx)(v.ZP,{type:"primary",icon:(0,w.jsx)(I.Z,{}),onClick:function(){var e;null===(e=pe.current)||void 0===e||e.callCreateView({values:{type:"MYSQL"}})},children:"新建数据库连接"})})})}),(0,w.jsx)(C.Z,{title:"编辑数据库连接",columns:[{name:"title",dataIndex:"title",title:"标题",rules:[{required:!0}]},{name:"database",dataIndex:"database",title:"数据库名",rules:[{required:!0}]},{name:"host",dataIndex:"host",title:"HOST",rules:[{required:!0}]},{name:"username",dataIndex:"username",title:"USERNAME",rules:[{required:!0}]},{name:"password",dataIndex:"password",title:"PASSWORD",rules:[{required:!0}]},{name:"type",dataIndex:"type",title:"数据库类型",widget:b.l9.SELECT,rules:[{required:!0,message:"请选择应用类型"}],options:[{label:"MySQL",value:"MYSQL"},{label:"PostgreSQL",value:"PGSQL"}]}],actionRef:pe,path:"api/datasources/database",saveCallback:function(){he()}})]})}},65741:function(e,n,t){var a=t(90228),r=t.n(a),i=t(26068),l=t.n(i),u=t(87999),o=t.n(u),c=t(48305),s=t.n(c),d=t(37956),m=t(47113),p=t(35363),f=t(64684),v=t(89178),h=t(11204),x=t(50959),g=t(7733),j=t(10218),y=t(80861),b=t(33600),Z=t(11527);n.Z=function(e){var n=e.componentRef,t=e.saveCallback,a=d.Z.useApp().message,i=(0,x.useState)(!1),u=s()(i,2),c=u[0],I=u[1],k=(0,x.useState)(!1),C=s()(k,2),w=C[0],S=C[1],T=(0,x.useState)(),N=s()(T,2),E=N[0],P=N[1],R=(0,b.useModel)("@@initialState").initialState,O=m.Z.useForm(),A=s()(O,1)[0];return(0,x.useImperativeHandle)(n,(function(){return{open:(e=o()(r()().mark((function e(n){var t,a,i;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.uid,a=n.values,I(!0),e.next=4,(0,j.Uw)({uuid:t});case 4:null!=(i=e.sent)&&i.success&&(i.data?(P(i.data),A.setFieldsValue(i.data)):A.setFieldsValue(l()(l()({},a),{},{uuid:t})));case 6:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})};var e})),(0,Z.jsx)(p.Z,{width:600,title:"编辑权限元素",destroyOnClose:!0,maskClosable:!1,open:c,onCancel:function(){return I(!1)},afterClose:function(){A.resetFields(),P(void 0)},footer:(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(f.ZP,{onClick:function(){I(!1)},children:"取消"}),(0,Z.jsx)(f.ZP,{type:"primary",loading:w,onClick:o()(r()().mark((function e(){var n,i,u,o;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.validateFields();case 2:if(!(n=e.sent)){e.next=18;break}if(S(!0),E&&n.roles&&Object.assign(n,{roles:{set:null===(u=n.roles)||void 0===u?void 0:u.map((function(e){return{id:e}}))}}),!E){e.next=12;break}return e.next=9,(0,j.i4)(l()({id:E.id},n));case 9:e.t0=e.sent,e.next=15;break;case 12:return e.next=14,(0,j.JE)(l()(l()({},n),{},{scene:g.P_.ELEMENT,applicationId:null==R||null===(i=R.application)||void 0===i?void 0:i.id}));case 14:e.t0=e.sent;case 15:o=e.t0,S(!1),null!=o&&o.success&&(a.success("保存成功"),I(!1),null==t||t(null==o?void 0:o.data));case 18:case"end":return e.stop()}}),e)}))),children:"保存"})]}),children:(0,Z.jsxs)(m.Z,{form:A,children:[(0,Z.jsx)(m.Z.Item,{label:"是否鉴权",name:"available",valuePropName:"checked",initialValue:!0,children:(0,Z.jsx)(v.Z,{})}),(0,Z.jsx)(m.Z.Item,{label:"权限编码",name:"uuid",children:(0,Z.jsx)(h.Z,{readOnly:!0,placeholder:"请输入元素编码"})}),(0,Z.jsx)(m.Z.Item,{label:"关联角色",name:"roles",children:(0,Z.jsx)(y.Z,{mode:"multiple"})})]})})}},962:function(e,n,t){t.d(n,{w:function(){return i}});var a=t(17381),r=t(50959),i=function(e){var n=e.icon,t=a;return r.createElement(t[n],{style:{fontSize:24}})}},80861:function(e,n,t){var a=t(26068),r=t.n(a),i=t(48305),l=t.n(i),u=t(67825),o=t.n(u),c=t(45889),s=t(45144),d=t(50959),m=t(49434),p=t(11527),f=["value","onChange"];n.Z=function(e){var n=e.value,t=e.onChange,a=o()(e,f),i=d.useState([]),u=l()(i,2),v=u[0],h=u[1],x=(0,c.Z)(m.I7,{onSuccess:function(e){h(e.data||[])}}).loading;return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(s.default,r()({allowClear:!0,showSearch:!0,value:n,loading:x,placeholder:"请选择成员",style:{width:"100%"},filterOption:function(e,n){var t,a;return(null!==(t=null==n||null===(a=n.label)||void 0===a?void 0:a.toString())&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},options:v.map((function(e){return r()(r()({},e),{},{label:e.name,value:e.id})})),onChange:function(e,n){null==t||t(e,n)}},a))})}},4264:function(e,n,t){var a=t(90228),r=t.n(a),i=t(87999),l=t.n(i),u=t(48305),o=t.n(u),c=t(17906),s=t(11204),d=t(14471),m=t(64684),p=t(37348),f=t(31331),v=t(50959),h=t(962),x=t(52883),g=t(45889),j=t(11527);n.Z=function(e){var n=e.modalRef,t=e.selectedCallback,a=(0,v.useState)([]),i=o()(a,2),u=i[0],y=i[1],b=(0,v.useState)(!1),Z=o()(b,2),I=Z[0],k=Z[1],C=(0,v.useState)(),w=o()(C,2),S=w[0],T=w[1],N=(0,v.useState)(""),E=o()(N,2),P=E[0],R=E[1],O=(0,v.useState)(),A=o()(O,2),F=A[0],z=A[1],D=(0,v.useState)(!1),L=o()(D,2),M=L[0],B=L[1],V=(0,g.Z)(x.gk,{manual:!0,onSuccess:function(e){y(e.data||[])}}),U=V.loading,G=V.refresh,H=V.run;(0,v.useImperativeHandle)(n,(function(){return{open:(e=l()(r()().mark((function e(n,t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:z(t),T(n),k(!0),H();case 4:case"end":return e.stop()}}),e)}))),function(n,t){return e.apply(this,arguments)}),reload:function(){G()}};var e}));var K=v.useMemo((function(){return P?u.filter((function(e){return e.name.toLowerCase().indexOf(P.toLowerCase())>-1})):u}),[P,u]);return(0,j.jsx)(c.Z,{width:780,title:"Font Icons",placement:"right",destroyOnClose:!0,maskClosable:!1,open:I,afterOpenChange:function(e){e||R("")},onClose:function(){k(!1)},extra:(0,j.jsx)(s.Z.Search,{style:{width:360},enterButton:"Search",value:P,onChange:function(e){return R(e.target.value)}}),footer:(0,j.jsxs)(d.Z,{children:[(0,j.jsx)(m.ZP,{onClick:function(){k(!1)},children:"取消"}),(0,j.jsx)(m.ZP,{type:"primary",loading:M,onClick:function(){F&&S&&(B(!0),null==t||t(S,F),B(!1)),k(!1)},children:"确定"})]}),children:(0,j.jsx)(p.Z,{spinning:U,style:{width:"100%"},children:(0,j.jsx)(d.Z,{wrap:!0,children:K.map((function(e){return(0,j.jsx)(f.Z,{title:e.name,children:(0,j.jsx)(m.ZP,{size:"large",type:F===e.name?"primary":"default",onClick:function(){return z((function(n){return n===e.name?void 0:e.name}))},icon:(0,j.jsx)(h.w,{icon:e.name})})},e.uuid)}))})})})}},39821:function(e,n,t){var a=t(90228),r=t.n(a),i=t(87999),l=t.n(i),u=t(48305),o=t.n(u),c=t(47113),s=t(37956),d=t(35363),m=t(64684),p=t(11204),f=t(50959),v=t(20370),h=t(16166),x=t(11527);n.Z=function(e){var n=e.submitCallback,t=e.actionRef,a=c.Z.useForm(),i=o()(a,1)[0],u=s.Z.useApp().message,g=(0,f.useState)(!1),j=o()(g,2),y=j[0],b=j[1],Z=(0,f.useState)(),I=o()(Z,2),k=I[0],C=I[1];return(0,f.useImperativeHandle)(t,(function(){return{open:function(e){var n=e.group;C(n),b(!0)}}})),(0,x.jsx)(d.Z,{width:800,title:"编辑接口项目",destroyOnClose:!0,open:y,onCancel:function(){b(!1)},afterClose:function(){i.resetFields()},footer:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(m.ZP,{onClick:function(){b(!1)},children:"取消"}),(0,x.jsx)(m.ZP,{type:"primary",onClick:l()(r()().mark((function e(){var t,a,l;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.validateFields();case 2:if(t=e.sent,!k||!t.config){e.next=9;break}return a=JSON.parse(t.config),e.next=7,(0,v.yv)(k.id,a);case 7:(l=e.sent)&&l.success&&(u.success("保存成功"),b(!1),null==n||n());case 9:case"end":return e.stop()}}),e)}))),children:"提交"})]}),children:(0,x.jsx)(c.Z,{form:i,labelCol:{span:0},wrapperCol:{span:24},children:(0,x.jsx)(c.Z.Item,{label:"",name:"config",rules:[{required:!0,message:"请输入Swagger配置JSON"},{validator:function(e,n){return(0,h.pM)(n)?Promise.resolve():Promise.reject(new Error("请输入合法的JSON"))},message:"请输入合法的JSON"}],children:(0,x.jsx)(p.Z.TextArea,{rows:24,placeholder:"JSON Content..."})})})})}},8802:function(e,n,t){t.d(n,{K7:function(){return s},Ov:function(){return u},RB:function(){return d},T5:function(){return o},Vl:function(){return i},Y:function(){return r},df:function(){return c},kJ:function(){return a},rj:function(){return l},uI:function(){return m}});var a=[{name:"label",schema:["STRING"]},{name:"key",schema:["STRING"]},{name:"type",schema:["STRING"]},{name:"size",schema:["STRING"]},{name:"shape",schema:["STRING"]},{name:"icon",schema:["STRING"]},{name:"actionType",schema:["STRING"]},{name:"link",schema:["STRING"]},{name:"onClick",schema:["FUNCTION"]},{name:"service",schema:["STRING"]},{name:"params",schema:["JSON"]},{name:"callback",schema:["FUNCTION"]},{name:"danger",schema:["BOOLEAN"]},{name:"ghost",schema:["BOOLEAN"]},{name:"confirmRequired",schema:["BOOLEAN"]},{name:"confirmText",schema:["STRING"]},{name:"accessRequired",schema:["BOOLEAN"]},{name:"accessKey",schema:["STRING"]}],r=[{name:"label",schema:["STRING"]},{name:"span",schema:["NUMBER","STRING"]},{name:"value",schema:["JSON"]},{name:"onClick",schema:["FUNCTION"]}],i=[{name:"label",schema:["STRING"]},{name:"key",schema:["STRING"]},{name:"children",schema:["COMPONENT"]},{name:"forceRender",schema:["BOOLEAN"]},{name:"closable",schema:["BOOLEAN"]},{name:"disabled",schema:["BOOLEAN"]},{name:"destroyInactiveTabPane",schema:["BOOLEAN"]}],l=[{name:"label",schema:["STRING"]},{name:"key",schema:["STRING"]},{name:"value",schema:["STRING"]}],u=[{name:"target",schema:["STRING"]},{name:"title",schema:["STRING"]},{name:"description\t",schema:["STRING"]},{name:"arrow",schema:["BOOLEAN"]},{name:"mask",schema:["BOOLEAN"]},{name:"placement",schema:["STRING"]},{name:"type",schema:["STRING"]},{name:"cover",schema:["STRING"]},{name:"onClose",schema:["FUNCTION"]}],o=[{name:"key",schema:["STRING"]},{name:"label",schema:["STRING"]},{name:"collapsible",schema:["STRING"]},{name:"forceRender",schema:["BOOLEAN"]},{name:"showArrow",schema:["BOOLEAN"]},{name:"children",schema:["COMPONENT"]},{name:"extra",schema:["COMPONENT"]}],c=[{name:"label",schema:["STRING"]},{name:"name",schema:["STRING"]},{name:"tooltip",schema:["STRING"]},{name:"size",schema:["STRING"]},{name:"defaultValue",schema:["STRING"]},{name:"placeholder",schema:["STRING"]},{name:"colSize",schema:["NUMBER"]},{name:"widget",schema:["STRING"]},{name:"editable",schema:["BOOLEAN"]},{name:"multiple",schema:["BOOLEAN"]},{name:"readOnly",schema:["BOOLEAN"]},{name:"disabled",schema:["BOOLEAN"]},{name:"options",schema:["JSON"]},{name:"rules",schema:["JSON"]},{name:"reference",schema:["JSON"]},{name:"dependent",schema:["JSON"]}],s=[{name:"title",schema:["STRING"]},{name:"dataIndex",schema:["STRING"]},{name:"tooltip",schema:["STRING"]},{name:"initialValue",schema:["STRING"]},{name:"colSize",schema:["NUMBER"]},{name:"valueType",schema:["STRING"]},{name:"editable",schema:["BOOLEAN"]},{name:"ellipsis",schema:["BOOLEAN"]},{name:"copyable",schema:["BOOLEAN"]},{name:"search",schema:["BOOLEAN"]},{name:"filters",schema:["BOOLEAN"]},{name:"hideInTable",schema:["BOOLEAN"]},{name:"hideInForm",schema:["BOOLEAN"]},{name:"hideInSearch",schema:["BOOLEAN"]},{name:"hideInDescriptions",schema:["BOOLEAN"]},{name:"valueEnum",schema:["JSON"]}],d=[{name:"title",schema:["STRING"]},{name:"dataIndex",schema:["STRING"]},{name:"tooltip",schema:["STRING"]},{name:"valueType",schema:["STRING"]},{name:"editable",schema:["BOOLEAN"]},{name:"ellipsis",schema:["BOOLEAN"]},{name:"copyable",schema:["BOOLEAN"]},{name:"valueEnum",schema:["JSON"]}],m=[{name:"title",schema:["STRING"]},{name:"name",schema:["STRING"]},{name:"dataIndex",schema:["STRING"]},{name:"tooltip",schema:["STRING"]},{name:"initialValue",schema:["STRING"]},{name:"colSize",schema:["NUMBER"]},{name:"type",schema:["STRING"]},{name:"widget",schema:["STRING"]},{name:"valueType",schema:["STRING"]},{name:"operator",schema:["STRING"]},{name:"editable",schema:["BOOLEAN"]},{name:"ellipsis",schema:["BOOLEAN"]},{name:"copyable",schema:["BOOLEAN"]},{name:"search",schema:["BOOLEAN"]},{name:"filters",schema:["BOOLEAN"]},{name:"multiple",schema:["BOOLEAN"]},{name:"hideInTable",schema:["BOOLEAN"]},{name:"hideInForm",schema:["BOOLEAN"]},{name:"hideInSearch",schema:["BOOLEAN"]},{name:"hideInDescriptions",schema:["BOOLEAN"]},{name:"options",schema:["JSON"]},{name:"enums",schema:["JSON"]},{name:"reference",schema:["JSON"]}]},88884:function(e,n,t){t.d(n,{Jp:function(){return i},b8:function(){return r},pl:function(){return a},xW:function(){return l}});t(7733).HU.ELECTRON;var a=["String","Boolean","Number","Decimal","DateTime","Json"],r=["INPUT","SELECT","TEXTAREA","DATE","DATETIME","UPLOAD","RADIO","SWITCH","CHECKBOX","INPUT_NUMBER","DATE_RANGE","DATETIME_RANGE","TREE_SELECT"],i=["password","money","textarea","date","dateTime","dateMonth","dateQuarter","dateYear","dateRange","dateTimeRange","time","timeRange","select","treeSelect","checkbox","rate","radio","radioButton","progress","percent","second","avatar","code","switch","fromNow","image","jsonCode","color","cascader"],l=["equals","in","notIn","lt","lte","gt","gte","contains","startsWith","endsWith"]},21523:function(e,n,t){var a=t(90228),r=t.n(a),i=t(26068),l=t.n(i),u=t(82092),o=t.n(u),c=t(87999),s=t.n(c),d=t(48305),m=t.n(d),p=t(912),f=t(14471),v=t(64684),h=t(31331),x=t(96090),g=t(17621),j=t(11204),y=t(45144),b=t(89178),Z=t(55988),I=t(74230),k=t(58643),C=t(50959),w=t(15030),S=t(4264),T=t(7733),N=t(10218),E=t(703),P=t(62959),R=t(60584),O=t(73115),A=t(11527);n.Z=function(e){var n=e.component,t=e.saveCallback,a=e.setCurrentComponent,i=e.callSelectComponentView,u=C.useRef(),c=C.useState([]),d=m()(c,2),F=d[0],z=d[1],D=C.useState(!0),L=m()(D,2),M=L[0],B=L[1],V=C.useRef(),U=function(){var e=s()(r()().mark((function e(a){var i,u,c,s,d;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=a.reduce((function(e,n){return null!==n.value&&void 0!==n.value&&""!==n.value?Object.assign(e,o()({},n.name,n.value)):e}),{}))){e.next=8;break}return c=null===(u=n.props)||void 0===u?void 0:u.map((function(e){return i[e.name]?l()(l()({},e),{},{value:i[e.name]}):e})),s=l()(l()({},n.config),i),e.next=6,(0,N.vz)(n.id,{props:c,config:s});case 6:null!=(d=e.sent)&&d.success&&(null==t||t(l()(l()({},n),{},{props:c,config:s})));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return C.useEffect((function(){var e,t=null==n||null===(e=n.props)||void 0===e?void 0:e.filter((function(e){return e.dataType!==T.sS.Complex&&e.editable}));z(t)}),[n]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(p.Z,{title:"props",size:"small",styles:{header:{paddingRight:12},body:{padding:M?12:0}},style:{marginBottom:12},extra:(0,A.jsxs)(f.Z,{children:[(0,A.jsx)(v.ZP,{ghost:!0,type:"primary",icon:(0,A.jsx)(E.Z,{}),disabled:!n.documentUrl,onClick:function(){window.open(n.documentUrl)},children:"查看源文档"}),M?(0,A.jsx)(h.Z,{title:"收起",children:(0,A.jsx)(P.Z,{onClick:function(){B((function(e){return!e}))}})}):(0,A.jsx)(h.Z,{title:"展开",children:(0,A.jsx)(R.Z,{onClick:function(){B((function(e){return!e}))}})})]}),children:M&&(0,A.jsx)(x.Z,{size:"small",pagination:!1,rowKey:function(e){return e.uuid},dataSource:F||[],columns:[{title:"属性名称",dataIndex:"name",width:240},{title:"属性值",dataIndex:"value",render:function(e,t){if((null==t?void 0:t.widget)===T.yD.INPUT_NUMBER)return(0,A.jsx)(g.Z,{value:t.value,onBlur:function(){return U(F)},onChange:function(e){var n=F.map((function(n){return n.uuid===t.uuid?l()(l()({},n),{},{value:e}):n}));z(n)}});if((null==t?void 0:t.widget)===T.yD.TEXTAREA)return(0,A.jsx)(j.Z.TextArea,{rows:2,value:t.value,onBlur:function(){return U(F)},onChange:function(e){var n=F.map((function(n){return n.uuid===t.uuid?l()(l()({},n),{},{value:e.target.value}):n}));z(n)}});if((null==t?void 0:t.widget)===T.yD.SELECT)return(0,A.jsx)(y.default,{options:t.options||[],value:t.value,onChange:function(e){var n=F.map((function(n){return n.uuid===t.uuid?l()(l()({},n),{},{value:e}):n}));z(n),U(n)}});if((null==t?void 0:t.widget)===T.yD.SWITCH)return(0,A.jsx)(b.Z,{value:t.value,onChange:function(e){var n=F.map((function(n){return n.uuid===t.uuid?l()(l()({},n),{},{value:e}):n}));z(n),U(n)}});var r;if((null==t?void 0:t.widget)===T.yD.RADIO)return(0,A.jsx)(Z.ZP.Group,{optionType:"button",buttonStyle:"solid",options:null===(r=t.options)||void 0===r?void 0:r.map((function(e){return{label:e,value:e}})),value:t.value,onChange:function(e){var n=F.map((function(n){return n.uuid===t.uuid?l()(l()({},n),{},{value:e.target.value}):n}));z(n),U(n)}});if((null==t?void 0:t.widget)===T.yD.COMPONENT){var o,c=(null===(o=n.children)||void 0===o?void 0:o.filter((function(e){return e.reference===t.name})))||[];return(0,A.jsxs)(A.Fragment,{children:[null==c?void 0:c.map((function(e){return(0,A.jsx)(v.ZP,{type:"link",size:"small",onClick:function(){a(e)},children:null==e?void 0:e.name},e.id)})),(0,A.jsx)(v.ZP,{type:"link",size:"small",icon:(0,A.jsx)(O.Z,{}),onClick:function(){null==i||i({type:"PROP",property:t.name})},children:"添加组件"})]})}if((null==t?void 0:t.widget)===T.yD.COMPONENTS){var s,d=(null===(s=n.children)||void 0===s?void 0:s.filter((function(e){return e.reference===t.name})))||[];return(0,A.jsxs)(A.Fragment,{children:[null==d?void 0:d.map((function(e){return(0,A.jsx)(v.ZP,{type:"link",size:"small",onClick:function(){a(e)},children:null==e?void 0:e.name},e.id)})),(0,A.jsx)(v.ZP,{type:"link",size:"small",icon:(0,A.jsx)(O.Z,{}),onClick:function(){null==i||i({type:"PROP",property:t.name})},children:"添加组件"})]})}return(null==t?void 0:t.widget)===T.yD.ICON?(0,A.jsx)(A.Fragment,{children:null!=t&&t.value?(0,A.jsx)(v.ZP,{type:"link",size:"small",onClick:function(){var e;null===(e=V.current)||void 0===e||e.open(t.name,t.value)},children:null==t?void 0:t.value},t.uuid):(0,A.jsx)(v.ZP,{type:"link",size:"small",icon:(0,A.jsx)(O.Z,{}),onClick:function(){var e;null===(e=V.current)||void 0===e||e.open(t.name)},children:"选择"})}):(null==t?void 0:t.widget)===T.yD.SERVICE?(0,A.jsx)(j.Z,{readOnly:!0,allowClear:!0,value:t.value,suffix:(0,A.jsx)(v.ZP,{type:"link",size:"small",icon:(0,A.jsx)(O.Z,{}),onClick:function(){var e;null===(e=u.current)||void 0===e||e.open(t)}})}):(0,A.jsx)(j.Z,{value:t.value,onBlur:function(){return U(F)},onChange:function(e){z((function(n){return n.map((function(n){return n.uuid===t.uuid?l()(l()({},n),{},{value:e.target.value}):n}))}))}})}},{title:"属性描述",dataIndex:"description",width:240,ellipsis:!0,render:function(e,n){return(0,A.jsx)(h.Z,{title:n.description,children:(0,A.jsx)(I.Z.Text,{style:{width:240},ellipsis:!0,children:n.description})})}},{title:"参数类型",dataIndex:"valueType",width:240,ellipsis:!0,render:function(e,n){return(0,A.jsx)(h.Z,{title:n.args||n.valueType,children:(0,A.jsx)(I.Z.Text,{style:{width:240},ellipsis:!0,children:n.args||n.valueType})})}}]})}),(0,A.jsx)(w.Z,{actionRef:u,selectedCallback:function(){var e=s()(r()().mark((function e(a,i){var u,c,s,d,m,p;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=F.reduce((function(e,n){return null!==n.value&&void 0!==n.value&&""!==n.value?Object.assign(e,o()({},n.name,n.value)):e}),{}),s=(0,k.eV)((null==a?void 0:a.name)||""),d=null===(u=n.props)||void 0===u?void 0:u.map((function(e){return e.uuid===(null==i?void 0:i.uuid)?l()(l()({},e),{},{value:s,service:s,serviceName:s,serviceId:null==a?void 0:a.id,serviceTag:null==a?void 0:a.tags,serviceProject:null==a?void 0:a.groupName}):l()(l()({},e),{},{value:c[e.name]||e.value})})),m=l()(l()({},n.config),{},o()({},null==i?void 0:i.name,s)),e.next=6,(0,N.vz)(n.id,{props:d,config:m});case 6:null!=(p=e.sent)&&p.success&&(z(d),null==t||t(l()(l()({},n),{},{props:d,config:m})));case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()}),(0,A.jsx)(S.Z,{modalRef:V,multiple:!1,selectedCallback:function(){var e=s()(r()().mark((function e(a,i){var u,c,s,d;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=null===(u=n.props)||void 0===u?void 0:u.map((function(e){return e.name===a?l()(l()({},e),{},{value:i}):e})),s=l()(l()({},n.config),{},o()({},a,i)),e.next=4,(0,N.vz)(n.id,{props:c,config:s});case 4:null!=(d=e.sent)&&d.success&&(z(c),null==t||t(l()(l()({},n),{},{props:c,config:s})));case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()})]})}},11546:function(e,n,t){var a=t(90228),r=t.n(a),i=t(87999),l=t.n(i),u=t(26068),o=t.n(u),c=t(48305),s=t.n(c),d=t(37956),m=t(10754),p=t(14471),f=t(74230),v=t(39158),h=t(22825),x=t(64684),g=t(58643),j=t(50959),y=t(65741),b=t(7733),Z=t(10218),I=t(73115),k=t(26709),C=t(70346),w=t(41778),S=t(33600),T=t(11527),N={id:0,title:"根组件",name:"Page",alias:"page",key:"page",props:[],isRoot:!0,children:[],widget:[]};n.Z=function(e){var n=e.container,t=e.actionRef,a=e.component,i=e.setCurrentComponent,u=e.callSelectComponentView,c=j.useRef(),E=j.useState([]),P=s()(E,2),R=P[0],O=P[1],A=j.useState([0]),F=s()(A,2),z=F[0],D=F[1],L=j.useState([0]),M=s()(L,2),B=M[0],V=M[1],U=d.Z.useApp(),G=U.modal,H=U.message,K=(0,S.useRequest)(Z.vM,{manual:!0,onSuccess:function(e){O(e||[])}}),q=K.run,_=K.refresh;j.useEffect((function(){n?q({containerId:n.id}):(V([]),O([]))}),[n]),j.useImperativeHandle(t,(function(){return{reload:function(){_()},reset:function(){V([0]),D([0]),i(N)}}}));var J=j.useMemo((function(){return n?[o()(o()({},N),{},{name:(0,g.Ho)(n.name),children:R||[]})]:[]}),[R,n]);return j.useEffect((function(){D(a?[a.id]:[0])}),[a]),(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(m.Z,{showLine:!0,blockNode:!0,defaultExpandAll:!0,treeData:J,selectedKeys:z,expandedKeys:B,onExpand:function(e){return V(e)},fieldNames:{title:"name",key:"id",children:"children"},onSelect:function(e,n){var t=n.node;i(t),localStorage.setItem(b.Qt.EDIT_REACT_COMPONENT,JSON.stringify({id:t.id,uuid:t.uuid}))},titleRender:function(e){return(0,T.jsxs)(p.Z,{style:{width:"100%",justifyContent:"space-between"},children:[(0,T.jsx)(f.Z.Text,{strong:!0,children:e.name}),e.reference&&(0,T.jsx)(v.Z,{color:"cyan",style:{marginLeft:8},children:e.reference}),(0,T.jsx)(h.Z,{trigger:["click"],menu:{items:[{label:"添加子组件",key:"CREATE_FOLDER",icon:(0,T.jsx)(I.Z,{}),onClick:function(t){t.domEvent.stopPropagation(),null==u||u({parent:e,container:n})}},{label:"权限设置",key:"EDIT_PERMISSION",icon:(0,T.jsx)(k.Z,{}),onClick:function(n){var t;n.domEvent.stopPropagation(),null===(t=c.current)||void 0===t||t.open({uid:e.uuid,values:{name:e.uuid,alias:e.uuid}})}},{label:"删除",key:"EDIT",danger:!0,icon:(0,T.jsx)(C.Z,{}),disabled:"page"===e.alias,onClick:function(n){var t;n.domEvent.stopPropagation(),G.confirm({title:"确认删除该对象？",onOk:(t=l()(r()().mark((function n(){var t;return r()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,Z.qQ)(null==e?void 0:e.id);case 2:null!=(t=n.sent)&&t.success&&(H.success("删除成功"),i(void 0),_());case 4:case"end":return n.stop()}}),n)}))),function(){return t.apply(this,arguments)})})}}]},children:(0,T.jsx)(x.ZP,{size:"small",variant:"filled",icon:(0,T.jsx)(w.Z,{}),onClick:function(e){e.stopPropagation()}})},"options")]})}}),(0,T.jsx)(y.Z,{componentRef:c,saveCallback:l()(r()().mark((function e(){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))})]})}},94978:function(e,n,t){var a=t(90228),r=t.n(a),i=t(82092),l=t.n(i),u=t(26068),o=t.n(u),c=t(87999),s=t.n(c),d=t(48305),m=t.n(d),p=t(912),f=t(64684),v=t(50959),h=t(64155),x=t(20947),g=t(10218),j=t(73115),y=t(11527);n.Z=function(e){var n,t=e.property,a=e.component,i=e.saveCallback,u=e.setCurrentComponent,c=e.callSelectComponentView,d=(0,v.useState)([]),b=m()(d,2),Z=b[0],I=b[1],k=(0,v.useState)([]),C=m()(k,2),w=C[0],S=C[1];return v.useEffect((function(){a.config&&t&&I(a.config[t.name]||[])}),[a,t]),(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(p.Z,{title:(null==t?void 0:t.name)||"items",size:"small",children:(0,y.jsx)(x.Z,{columns:[{title:"key",dataIndex:"key"},{title:"label",dataIndex:"label"},{title:"collapsible",dataIndex:"collapsible",valueEnum:{header:"header",icon:"icon",disabled:"disabled"}},{title:"forceRender",dataIndex:"forceRender",valueType:"switch"},{title:"showArrow",dataIndex:"showArrow",valueType:"switch"},{title:"children",dataIndex:"children",renderFormItem:function(e,n){var r,i=n.record,l=null===(r=a.children)||void 0===r?void 0:r.find((function(e){var n;return(null===(n=e.relation)||void 0===n?void 0:n.item)===(null==i?void 0:i.uuid)}));return l?(0,y.jsx)(f.ZP,{type:"link",size:"small",onClick:function(){u(l)},children:null==l?void 0:l.name}):(0,y.jsx)(f.ZP,{type:"link",size:"small",icon:(0,y.jsx)(j.Z,{}),onClick:function(){null==c||c({type:"SUBPROP",item:null==i?void 0:i.uuid,subkey:"children",property:null==t?void 0:t.name})},children:"添加组件"})}},{title:"操作",dataIndex:"option",valueType:"option",render:function(e,n,u,c){return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("a",{onClick:function(){var e;null==c||null===(e=c.startEditable)||void 0===e||e.call(c,n.uuid)},children:"编辑"},"edit"),(0,y.jsx)(f.ZP,{type:"link",danger:!0,onClick:s()(r()().mark((function e(){var u,c;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I((function(e){return e.filter((function(e){return e.uuid!==n.uuid}))})),u=Z.filter((function(e){return e.uuid!==n.uuid})),c=o()(o()({},a.config),{},l()({},null==t?void 0:t.name,u)),e.next=5,(0,g.vz)(a.id,{config:c});case 5:null==i||i(o()(o()({},a),{},{config:c}));case 6:case"end":return e.stop()}}),e)}))),children:"删除"})]})}}],rowKey:function(e){return e.uuid},value:Z,onChange:I,recordCreatorProps:{newRecordType:"dataSource",record:function(){return{uuid:(0,h.Z)(),label:"",key:"",order:0}}},editable:{type:"multiple",editableKeys:w,actionRender:function(e,n,t){return[t.save,t.cancel,t.delete]},onValuesChange:function(e,n){I(n)},onSave:(n=s()(r()().mark((function e(n,u){var c,s;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Z.map((function(e){return e.uuid===u.uuid?u:e})),s=o()(o()({},a.config),{},l()({},null==t?void 0:t.name,c)),e.next=4,(0,g.vz)(a.id,{config:s});case 4:null==i||i(o()(o()({},a),{},{config:s}));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)}),onChange:S}})})})}},18396:function(e,n,t){t.d(n,{ZP:function(){return _}});var a=t(90228),r=t.n(a),i=t(82092),l=t.n(i),u=t(87999),o=t.n(u),c=t(15558),s=t.n(c),d=t(48305),m=t.n(d),p=t(26068),f=t.n(p),v=t(912),h=t(14471),x=t(91283),g=t(64684),j=t(23683),y=t(50959),b=t(30565),Z=t(64155),I=t(65741),k=t(10218),C=t(83745),w=t(20947),S=t(67825),T=t.n(S),N=t(47113),E=t(17906),P=t(11204),R=t(55988),O=t(89178),A=t(58643),F=t(15030),z=t(4264),D=t(73115),L=t(46611),M=t(11527),B=["key","name"],V=function(e){return e.FUNCTION="FUNCTION",e.SERVICE="SERVICE",e.LINK="LINK",e}({}),U=function(e){var n=e.saveCallback,t=e.actionRef,a=(0,y.useState)(!1),i=m()(a,2),l=i[0],u=i[1],c=(0,y.useState)(),s=m()(c,2),d=s[0],p=s[1],v=(0,y.useState)(!1),x=m()(v,2),j=x[0],b=x[1],Z=(0,y.useState)(!1),I=m()(Z,2),k=I[0],C=I[1],w=(0,y.useState)(),S=m()(w,2),U=S[0],G=S[1],H=(0,y.useState)(V.FUNCTION),K=m()(H,2),q=K[0],_=K[1],J=y.useRef(),Y=y.useRef(),$=N.Z.useForm(),W=m()($,1)[0];return y.useImperativeHandle(t,(function(){return{open:function(e){var n=e.record;u(!0),G(n),W.setFieldsValue(n),b(n.accessRequired||!1),C(n.confirmRequired||!1),_(n.actionType||V.FUNCTION)}}})),(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(E.Z,{width:720,zIndex:188,title:"Action编辑",placement:"right",destroyOnClose:!0,maskClosable:!0,open:l,extra:(0,M.jsxs)(h.Z,{children:[(0,M.jsx)(g.ZP,{onClick:function(){u(!1)},children:"取消"}),(0,M.jsx)(g.ZP,{type:"primary",onClick:o()(r()().mark((function e(){var t,a;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.validateFields();case 2:if(!(t=e.sent)){e.next=9;break}return a=f()(f()({},U),t),d&&Object.assign(a,{serviceId:null==d?void 0:d.id,serviceTag:null==d?void 0:d.tags,serviceProject:null==d?void 0:d.groupName,serviceName:(0,A.eV)(d.name)}),e.next=8,n(a);case 8:u(!1);case 9:case"end":return e.stop()}}),e)}))),children:"保存"})]}),onClose:function(){u(!1)},afterOpenChange:function(e){e||(W.resetFields(),p(void 0))},children:(0,M.jsxs)(N.Z,{form:W,children:[(0,M.jsx)(N.Z.Item,{label:"label",name:"label",children:(0,M.jsx)(P.Z,{placeholder:"label"})}),(0,M.jsx)(N.Z.Item,{label:"key",name:"key",children:(0,M.jsx)(P.Z,{placeholder:"key"})}),(0,M.jsx)(N.Z.Item,{label:"tooltip",name:"tooltip",children:(0,M.jsx)(P.Z,{placeholder:"tooltip"})}),(0,M.jsx)(N.Z.Item,{label:"type",name:"type",initialValue:"default",children:(0,M.jsx)(R.ZP.Group,{optionType:"button",buttonStyle:"solid",options:[{label:"primary",value:"primary"},{label:"default",value:"default"},{label:"text",value:"text"},{label:"link",value:"link"},{label:"dashed",value:"dashed"}]})}),(0,M.jsx)(N.Z.Item,{label:"size",name:"size",children:(0,M.jsx)(R.ZP.Group,{optionType:"button",buttonStyle:"solid",options:[{label:"small",value:"small"},{label:"middle",value:"middle"},{label:"large",value:"large"}]})}),(0,M.jsx)(N.Z.Item,{label:"shape",name:"shape",children:(0,M.jsx)(R.ZP.Group,{optionType:"button",buttonStyle:"solid",options:[{label:"default",value:"default"},{label:"circle",value:"circle"},{label:"round",value:"round"}]})}),(0,M.jsx)(N.Z.Item,{label:"icon",name:"icon",children:(0,M.jsx)(P.Z,{suffix:(0,M.jsx)(D.Z,{}),onClick:function(){var e;null===(e=J.current)||void 0===e||e.open("icon",W.getFieldValue("icon"))}})}),(0,M.jsx)(N.Z.Item,{label:"actionType",name:"actionType",initialValue:"FUNCTION",rules:[{required:!0,message:"请选择操作类型"}],children:(0,M.jsx)(R.ZP.Group,{optionType:"button",buttonStyle:"solid",onChange:function(e){return _(e.target.value)},options:[{label:"Function",value:"FUNCTION"},{label:"Service",value:"SERVICE"}]})}),q===V.SERVICE?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(N.Z.Item,{label:"service",name:"service",rules:[{required:!0,message:"请选择接口"}],children:(0,M.jsx)(P.Z,{placeholder:"service",suffix:(0,M.jsx)(D.Z,{}),onClick:function(){var e;null===(e=Y.current)||void 0===e||e.open()}})}),(0,M.jsx)(N.Z.Item,{label:"params",children:(0,M.jsx)(N.Z.List,{name:"params",children:function(e,n){var t=n.add,a=n.remove;return(0,M.jsxs)(M.Fragment,{children:[e.map((function(e){var n=e.key,t=e.name,r=T()(e,B);return(0,M.jsxs)(h.Z,{style:{display:"flex",marginBottom:1},align:"baseline",children:[(0,M.jsx)(N.Z.Item,f()(f()({},r),{},{name:[t,"name"],rules:[{required:!0,message:"请输入参数值"}],children:(0,M.jsx)(P.Z,{placeholder:"请输入参数名"})})),(0,M.jsx)(N.Z.Item,f()(f()({},r),{},{name:[t,"value"],rules:[{required:!0,message:"请输入参数值,变量请带上花括号{}"}],children:(0,M.jsx)(P.Z,{placeholder:"请输入参数值"})})),(0,M.jsx)(L.Z,{onClick:function(){return a(t)}})]},n)})),(0,M.jsx)(N.Z.Item,{children:(0,M.jsx)(g.ZP,{type:"dashed",onClick:function(){return t()},block:!0,icon:(0,M.jsx)(D.Z,{}),children:"添 加"})})]})}})}),(0,M.jsx)(N.Z.Item,{label:"callback",name:"callback",children:(0,M.jsx)(P.Z.TextArea,{placeholder:"请求返回结果后执行的函数"})})]}):(0,M.jsx)(N.Z.Item,{label:"onClick",name:"onClick",children:(0,M.jsx)(P.Z.TextArea,{placeholder:"onClick"})}),q===V.LINK&&(0,M.jsx)(N.Z.Item,{label:"href",name:"href",children:(0,M.jsx)(P.Z,{placeholder:"href"})}),(0,M.jsx)(N.Z.Item,{label:"danger",name:"danger",valuePropName:"checked",children:(0,M.jsx)(O.Z,{})}),(0,M.jsx)(N.Z.Item,{label:"ghost",name:"ghost",valuePropName:"checked",children:(0,M.jsx)(O.Z,{})}),(0,M.jsx)(N.Z.Item,{label:"confirmRequired",name:"confirmRequired",valuePropName:"checked",children:(0,M.jsx)(O.Z,{onChange:function(e){return C(e)}})}),k&&(0,M.jsx)(N.Z.Item,{label:"confirmText",name:"confirmText",children:(0,M.jsx)(P.Z,{placeholder:"提醒内容文本"})}),(0,M.jsx)(N.Z.Item,{label:"accessRequired",name:"accessRequired",valuePropName:"checked",children:(0,M.jsx)(O.Z,{onChange:function(e){return b(e)}})}),j&&(0,M.jsx)(N.Z.Item,{label:"accessKey",name:"accessKey",children:(0,M.jsx)(P.Z,{placeholder:"开启校验权限的权限编码"})})]})}),(0,M.jsx)(z.Z,{modalRef:J,multiple:!1,selectedCallback:function(){var e=o()(r()().mark((function e(n,t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:W.setFieldValue(n,t);case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()}),(0,M.jsx)(F.Z,{actionRef:Y,selectedCallback:function(){var e=o()(r()().mark((function e(n){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(n),W.setFieldValue("service",(0,A.eV)(n.name));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})]})},G=(0,b.W6)((function(){return(0,M.jsx)(C.Z,{style:{cursor:"grab",color:"#999"}})})),H=(0,b.W8)((function(e){return(0,M.jsx)("tr",f()({},e))})),K=(0,b.JN)((function(e){return(0,M.jsx)("tbody",f()({},e))})),q=[{title:"label",dataIndex:"label"},{title:"key",dataIndex:"key"},{title:"type",dataIndex:"type",valueType:"select",valueEnum:{primary:"primary",default:"default",text:"text",link:"link",dashed:"dashed"}},{title:"size",dataIndex:"size",valueType:"select",valueEnum:{large:"large",middle:"middle",small:"small"}},{title:"danger",dataIndex:"danger",valueType:"switch"},{title:"ghost",dataIndex:"ghost",valueType:"switch"}],_=function(e){var n,t=e.property,a=e.component,i=e.saveCallback,u=(0,y.useState)([]),c=m()(u,2),d=c[0],p=c[1],b=(0,y.useState)([]),C=m()(b,2),S=C[0],T=C[1],N=y.useRef(),E=y.useRef(),P=y.useMemo((function(){return(null==d?void 0:d.length)>0?q:[{title:"Sort",dataIndex:"sort",width:60,className:"drag-visible",render:function(){return(0,M.jsx)(G,{})}}].concat(q)}),[d]);return y.useEffect((function(){a.config&&t&&T(a.config[t.name]||[])}),[a,t]),(0,M.jsxs)(v.Z,{size:"small",style:{marginBottom:12},title:(null==t?void 0:t.name)||"Actions",children:[(0,M.jsx)(w.Z,{size:"small",columns:[].concat(s()(P),[{title:"操作",valueType:"option",width:220,render:function(e,n,u,c){return(0,M.jsxs)(h.Z,{children:[(0,M.jsx)("a",{onClick:function(){var e;null===(e=N.current)||void 0===e||e.open({record:n})},children:"高级"},"advanced"),(0,M.jsx)("a",{onClick:function(){var e;null===(e=E.current)||void 0===e||e.open({uid:n.uuid,values:{name:n.key,title:n.label,alias:n.uuid}})},children:"权限设置"},"permission"),(0,M.jsx)("a",{onClick:function(){var e;null==c||null===(e=c.startEditable)||void 0===e||e.call(c,n.uuid)},children:"编辑"},"editable"),(0,M.jsx)(x.Z,{title:"确认删除该记录？",onConfirm:o()(r()().mark((function e(){var u,o;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=S.filter((function(e){return e.uuid!==n.uuid})),o=f()(f()({},a.config),{},l()({},null==t?void 0:t.name,u)),e.next=4,(0,k.vz)(a.id,{config:o});case 4:null==i||i(f()(f()({},a),{},{config:o}));case 5:case"end":return e.stop()}}),e)}))),onCancel:function(){},children:(0,M.jsx)(g.ZP,{danger:!0,type:"link",size:"small",style:{padding:0},children:"删除"},"delete")})]})}}]),rowKey:function(e){return e.uuid},value:S,onChange:T,recordCreatorProps:{newRecordType:"dataSource",record:function(){return{uuid:(0,Z.Z)(),title:"",name:"",key:"",shape:"default",size:"middle",danger:!1,ghost:!1,type:"primary"}}},editable:{type:"multiple",editableKeys:d,onChange:p,actionRender:function(e,n,t){return[t.save,t.cancel,t.delete]},onValuesChange:function(e,n){T(n)},onSave:(n=o()(r()().mark((function e(n,u){var o,c;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=S.map((function(e){return e.uuid===u.uuid?u:e})),c=f()(f()({},a.config),{},l()({},null==t?void 0:t.name,o)),e.next=4,(0,k.vz)(a.id,{config:c});case 4:null==i||i(f()(f()({},a),{},{config:c}));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})},components:(null==d?void 0:d.length)>0?{}:{body:{wrapper:function(e){return(0,M.jsx)(K,f()({useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:function(){var e=o()(r()().mark((function e(n){var u,o,c,s,d;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=n.oldIndex,o=n.newIndex,u===o){e.next=8;break}return c=(0,j.q)(S,u,o),s=c.map((function(e,n){return f()(f()({},e),{},{sort:n,order:(null==c?void 0:c.length)-n})})),d=f()(f()({},a.config),{},l()({},null==t?void 0:t.name,s)),e.next=7,(0,k.vz)(a.id,{config:d});case 7:null==i||i(f()(f()({},a),{},{config:d}));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},e))},row:function(e){var n=S.findIndex((function(n){return n.uuid===e["data-row-key"]}));return(0,M.jsx)(H,f()({index:n},e))}}}}),(0,M.jsx)(U,{actionRef:N,saveCallback:function(){var e=o()(r()().mark((function e(n){var u,o;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=S.map((function(e){return e.uuid===n.uuid?n:e})),o=f()(f()({},a.config),{},l()({},null==t?void 0:t.name,u)),e.next=4,(0,k.vz)(a.id,{config:o});case 4:null==i||i(f()(f()({},a),{},{config:o}));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),(0,M.jsx)(I.Z,{componentRef:E,saveCallback:function(){var e=o()(r()().mark((function e(n){var u,o;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=S.map((function(e){return e.uuid===(null==n?void 0:n.uuid)?f()(f()({},e),{},{accessRequired:null==n?void 0:n.available,accessKey:null==n?void 0:n.uuid}):e})),o=f()(f()({},a.config),{},l()({},null==t?void 0:t.name,u)),e.next=4,(0,k.vz)(a.id,{config:o});case 4:null==i||i(f()(f()({},a),{},{config:o}));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})]})}},96612:function(e,n,t){t.d(n,{Z:function(){return w}});var a=t(26068),r=t.n(a),i=t(90228),l=t.n(i),u=t(87999),o=t.n(u),c=t(48305),s=t.n(c),d=t(912),m=t(45144),p=t(39158),f=t(14471),v=t(50959),h=t(64155),x=t(7733),g=t(20947),j=t(47113),y=t(17906),b=t(64684),Z=t(37024),I=t(19504),k=t(11527),C=function(e){var n=e.saveCallback,t=e.actionRef,a=(0,v.useState)(!1),i=s()(a,2),u=i[0],c=i[1],d=(0,v.useState)(),p=s()(d,2),h=p[0],x=p[1],g=(0,v.useState)("() => {}"),C=s()(g,2),w=C[0],S=C[1],T=j.Z.useForm(),N=s()(T,1)[0];return v.useImperativeHandle(t,(function(){return{callUpdateView:function(e){c(!0),x(e),S(e.handle||"() => {}"),N.setFieldsValue(e)}}})),(0,k.jsx)(y.Z,{width:600,title:"useImperativeHandle Action",placement:"right",destroyOnClose:!0,maskClosable:!0,open:u,extra:(0,k.jsxs)(f.Z,{children:[(0,k.jsx)(b.ZP,{onClick:function(){c(!1)},children:"取消"}),(0,k.jsx)(b.ZP,{type:"primary",onClick:o()(l()().mark((function e(){var t;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.validateFields();case 2:t=e.sent,null==n||n(r()(r()(r()({},h),t),{},{handle:w}));case 4:case"end":return e.stop()}}),e)}))),children:"保存"})]}),onClose:function(){c(!1),N.resetFields()},children:(0,k.jsxs)(j.Z,{form:N,children:[(0,k.jsx)(j.Z.Item,{label:"handle",children:(0,k.jsx)(I.ZP,{height:"400px",value:w,style:{width:"100%"},extensions:[(0,Z.eJ)({jsx:!0,typescript:!0})],onChange:function(e){return S(e)}})}),(0,k.jsx)(j.Z.Item,{label:"dependencies",name:"dependencies",children:(0,k.jsx)(m.default,{mode:"tags",style:{width:"100%"},tokenSeparators:[","]})})]})})},w=function(e){var n,t=e.container,a=e.saveCallback,i=(0,v.useState)([]),u=s()(i,2),c=u[0],j=u[1],y=(0,v.useState)([]),b=s()(y,2),Z=b[0],I=b[1],w=v.useRef();return v.useEffect((function(){j((null==t?void 0:t.useeffects)||[])}),[t]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(d.Z,{title:"useEffect Hooks",size:"small",children:(0,k.jsx)(g.Z,{columns:[{title:"handle",dataIndex:"handle",valueType:"textarea"},{title:"dependencies",dataIndex:"dependencies",width:240,renderFormItem:function(){return(0,k.jsx)(m.default,{mode:"tags",style:{width:"100%"},tokenSeparators:[","]})},render:function(e,n){var t;return null==n||null===(t=n.dependencies)||void 0===t?void 0:t.map((function(e){return(0,k.jsx)(p.Z,{children:e},e)}))}},{title:"操作",valueType:"option",width:140,render:function(e,n,t,r){return(0,k.jsxs)(f.Z,{children:[(0,k.jsx)("a",{onClick:function(){var e;null===(e=w.current)||void 0===e||e.callUpdateView(n)},children:"高级"},"advanced"),(0,k.jsx)("a",{onClick:function(){var e;null==r||null===(e=r.startEditable)||void 0===e||e.call(r,n.uuid)},children:"编辑"},"editable"),(0,k.jsx)("a",{onClick:o()(l()().mark((function e(){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==a||a(c.filter((function(e){return e.uuid!==n.uuid})));case 1:case"end":return e.stop()}}),e)}))),children:"删除"})]})}}],rowKey:function(e){return e.uuid},value:c,onChange:j,recordCreatorProps:{newRecordType:"dataSource",record:function(){return{uuid:(0,h.Z)(),handle:"() => {}",required:!1,type:x.Yk.STRING,initialValue:"",order:0}}},editable:{type:"multiple",editableKeys:Z,actionRender:function(e,n,t){return[t.save,t.cancel,t.delete]},onValuesChange:function(e,n){j(n)},onSave:(n=o()(l()().mark((function e(n,t){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==a||a(c.map((function(e){return e.uuid===n?r()(r()({},e),t):e})));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)}),onChange:I}})}),(0,k.jsx)(C,{actionRef:w,saveCallback:function(){var e=o()(l()().mark((function e(n){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==a||a(c.map((function(e){return e.uuid===n.uuid?r()(r()({},e),n):e})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})]})}},1791:function(e,n,t){t.d(n,{Z:function(){return D}});var a=t(26068),r=t.n(a),i=t(90228),l=t.n(i),u=t(87999),o=t.n(u),c=t(48305),s=t.n(c),d=t(912),m=t(27672),p=t(45144),f=t(39158),v=t(14471),h=t(64684),x=t(91283),g=t(50959),j=t(64155),y=t(7733),b=t(20947),Z=t(67825),I=t.n(Z),k=t(47113),C=t(17906),w=t(11204),S=t(89178),T=t(46611),N=t(73115),E=t(8802),P=t(11527),R=["key","name"],O=["String","Number","Boolean","Function","Json","Text","Multiple","Complex"],A={INPUT:"INPUT",INPUT_NUMBER:"INPUT_NUMBER",SWITCH:"SWITCH",SELECT:"SELECT",RADIO:"RADIO",CHECKBOX:"CHECKBOX",TEXTAREA:"TEXTAREA",TABLE_COLS:"TABLE_COLS",FORM_ITEMS:"FORM_ITEMS",DESC_ITEMS:"DESC_ITEMS",MENU_ITEMS:"MENU_ITEMS",TAB_ITEMS:"TAB_ITEMS",COMPONENT:"COMPONENT",ICON:"ICON",COMPONENTS:"COMPONENTS",ACTIONS:"ACTIONS",SERVICE:"SERVICE",PRO_DESC_COLS:"PRO_DESC_COLS",PRO_TABLE_COLS:"PRO_TABLE_COLS"},F=function(e){var n=e.saveCallback,t=e.actionRef,a=(0,g.useState)(!1),i=s()(a,2),u=i[0],c=i[1],d=(0,g.useState)(y.yD.INPUT),m=s()(d,2),f=m[0],x=m[1],j=(0,g.useState)(y.sS.String),b=s()(j,2),Z=b[0],F=b[1],z=(0,g.useState)(),D=s()(z,2),L=D[0],M=D[1],B=k.Z.useForm(),V=s()(B,1)[0];return g.useImperativeHandle(t,(function(){return{open:function(e){c(!0),M(e),F(e.dataType||y.sS.String),x(e.widget||y.yD.INPUT),V.setFieldsValue(e)},closeView:function(){c(!1)}}})),(0,P.jsx)(C.Z,{width:720,title:"编辑列表字段",placement:"right",destroyOnClose:!0,maskClosable:!0,open:u,extra:(0,P.jsxs)(v.Z,{children:[(0,P.jsx)(h.ZP,{onClick:function(){c(!1)},children:"取消"}),(0,P.jsx)(h.ZP,{type:"primary",onClick:o()(l()().mark((function e(){var t;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.validateFields();case 2:(t=e.sent)&&(n(r()(r()({},L),t)),c(!1),V.resetFields());case 4:case"end":return e.stop()}}),e)}))),children:"保存"})]}),onClose:function(){c(!1),V.resetFields()},children:(0,P.jsxs)(k.Z,{form:V,children:[(0,P.jsx)(k.Z.Item,{label:"name",name:"name",children:(0,P.jsx)(w.Z,{placeholder:"name"})}),(0,P.jsx)(k.Z.Item,{label:"dataType",name:"dataType",children:(0,P.jsx)(p.default,{placeholder:"dataType",onChange:function(e){return F(e)},options:O.map((function(e){return{label:e,value:e}}))})}),(0,P.jsx)(k.Z.Item,{label:"widget",name:"widget",children:(0,P.jsx)(p.default,{placeholder:"widget",onChange:function(e){x(e),e===y.yD.ACTIONS&&V.setFieldsValue({schema:E.kJ}),e===y.yD.DESC_ITEMS&&V.setFieldsValue({schema:E.Y}),e===y.yD.TAB_ITEMS&&V.setFieldsValue({schema:E.Vl})},options:Object.entries(A).map((function(e){var n=s()(e,2);return{label:n[0],value:n[1]}}))})}),[y.yD.SELECT,y.yD.RADIO,y.yD.CHECKBOX].includes(f)&&(0,P.jsx)(k.Z.Item,{label:"options",name:"options",children:(0,P.jsx)(p.default,{mode:"tags",style:{width:"100%"},tokenSeparators:[","]})}),[y.sS.Complex,y.sS.Function].includes(Z)&&(0,P.jsx)(k.Z.Item,{label:"args",name:"args",children:(0,P.jsx)(p.default,{mode:"tags",style:{width:"100%"},tokenSeparators:[","]})}),Z===y.sS.Multiple&&(0,P.jsx)(k.Z.Item,{label:"schema",children:(0,P.jsx)(p.default,{mode:"multiple",tokenSeparators:[","],style:{width:"100%"},options:Object.entries(y.PZ).map((function(e){var n=s()(e,2);return{label:n[0],value:n[1]}}))})}),(0,P.jsx)(k.Z.Item,{label:"defaultValue",name:"defaultValue",children:(0,P.jsx)(w.Z,{placeholder:"defaultValue"})}),Z===y.sS.Complex&&(0,P.jsx)(k.Z.Item,{label:"schema",children:(0,P.jsx)(k.Z.List,{name:"schema",children:function(e,n){var t=n.add,a=n.remove;return(0,P.jsxs)(P.Fragment,{children:[e.map((function(e){var n=e.key,t=e.name,i=I()(e,R);return(0,P.jsxs)(v.Z,{style:{display:"flex",marginBottom:1},align:"baseline",children:[(0,P.jsx)(k.Z.Item,r()(r()({},i),{},{name:[t,"name"],children:(0,P.jsx)(w.Z,{placeholder:"请输入属性名"})})),(0,P.jsx)(k.Z.Item,r()(r()({},i),{},{name:[t,"schema"],rules:[{required:!0,message:"请选择属性类型"}],children:(0,P.jsx)(p.default,{mode:"multiple",placeholder:"请选择属性类型",tokenSeparators:[","],style:{width:300},options:Object.entries(y.PZ).map((function(e){var n=s()(e,2);return{label:n[0],value:n[1]}}))})})),(0,P.jsx)(T.Z,{onClick:function(){return a(t)}})]},n)})),(0,P.jsx)(k.Z.Item,{children:(0,P.jsx)(h.ZP,{type:"dashed",onClick:function(){return t()},block:!0,icon:(0,P.jsx)(N.Z,{}),children:"添 加"})})]})}})}),(0,P.jsx)(k.Z.Item,{label:"editable",name:"editable",children:(0,P.jsx)(S.Z,{})}),(0,P.jsx)(k.Z.Item,{label:"required",name:"required",children:(0,P.jsx)(S.Z,{})})]})})},z=t(16166),D=function(e){var n,t=e.container,a=e.saveCallback,i=(0,g.useState)([]),u=s()(i,2),c=u[0],Z=u[1],I=(0,g.useState)([]),k=s()(I,2),C=k[0],w=k[1],S=g.useRef();return g.useEffect((function(){Z((null==t?void 0:t.props)||[])}),[t]),(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(d.Z,{title:"Props（组件对外暴露的属性）",size:"small",children:(0,P.jsx)(b.Z,{columns:[{title:"name",dataIndex:"name"},{title:"dataType",dataIndex:"dataType",tooltip:"数据类型",renderFormItem:function(){return(0,P.jsx)(m.Z,{allowClear:!0,options:[{label:"string",value:"string"},{label:"number",value:"number"},{label:"boolean",value:"boolean"},{label:"object",value:"object"},{label:"any",value:"any"},{label:"Record<string, any>",value:"Record<string, any>"},{label:"() => void",value:"() => void"},{label:"() => void",value:"() => Promise<void>"}]})}},{title:"widget",dataIndex:"widget",valueType:"select",tooltip:"控件类型",valueEnum:y.yD},{width:240,title:"options",dataIndex:"options",tooltip:"属性选项，widget为SELECT、RADIO、CHECKBOX时配置",renderFormItem:function(){return(0,P.jsx)(p.default,{mode:"tags",style:{width:"100%"},tokenSeparators:[","]})},render:function(e,n){var t;return null==n||null===(t=n.options)||void 0===t?void 0:t.map((function(e){return(0,P.jsx)(f.Z,{children:e},e)}))}},{title:"args",dataIndex:"args",renderFormItem:function(){return(0,P.jsx)(p.default,{mode:"tags",style:{width:"100%"},tokenSeparators:[","]})},render:function(e,n){var t;return null==n||null===(t=n.args)||void 0===t?void 0:t.map((function(e){return(0,P.jsx)(f.Z,{children:e},e)}))}},{title:"defaultValue",dataIndex:"defaultValue",tooltip:"属性默认值"},{title:"required",dataIndex:"required",valueType:"switch",tooltip:"属性是否必填"},{title:"操作",valueType:"option",width:140,render:function(e,n,t,r){return(0,P.jsxs)(v.Z,{children:[(0,P.jsx)(h.ZP,{danger:!0,type:"link",size:"small",onClick:function(){var e;null===(e=S.current)||void 0===e||e.open(n)},children:"高级"},"advance"),(0,P.jsx)(h.ZP,{type:"link",size:"small",onClick:function(){var e;null==r||null===(e=r.startEditable)||void 0===e||e.call(r,n.uuid)},children:"编辑"},"editable"),(0,P.jsx)(x.Z,{title:"确认删除该记录？",onConfirm:o()(l()().mark((function e(){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==a||a(c.filter((function(e){return e.uuid!==n.uuid})));case 1:case"end":return e.stop()}}),e)}))),onCancel:function(){},children:(0,P.jsx)(h.ZP,{danger:!0,type:"link",size:"small",children:"删除"},"delete")})]})}}],rowKey:function(e){return e.uuid},value:c,onChange:Z,recordCreatorProps:{newRecordType:"dataSource",record:function(){return{uuid:(0,j.Z)(),name:"",required:!1,type:y.Yk.STRING,initialValue:"",order:0}}},editable:{type:"multiple",editableKeys:C,onChange:w,actionRender:function(e,n,t){return[t.save,t.cancel,t.delete]},onValuesChange:function(e,n){Z(n)},onSave:(n=o()(l()().mark((function e(n,t){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==a||a(c.map((function(e){return e.uuid===n?r()(r()({},e),t):e})));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})}})}),(0,P.jsx)(F,{actionRef:S,saveCallback:function(){var e=o()(l()().mark((function e(n){var t;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,z.e7)(n,["index"]),null==a||a(c.map((function(e){return e.uuid===t.uuid?r()(r()({},e),t):e})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})]})}},15665:function(e,n,t){var a=t(90228),r=t.n(a),i=t(26068),l=t.n(i),u=t(87999),o=t.n(u),c=t(48305),s=t.n(c),d=t(912),m=t(14471),p=t(50959),f=t(64155),v=t(20947),h=t(11527);n.Z=function(e){var n,t=e.container,a=e.saveCallback,i=(0,p.useState)([]),u=s()(i,2),c=u[0],x=u[1],g=(0,p.useState)([]),j=s()(g,2),y=j[0],b=j[1];return p.useEffect((function(){x((null==t?void 0:t.imports)||[])}),[t]),(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(d.Z,{title:"Imports",size:"small",children:(0,h.jsx)(v.Z,{columns:[{title:"import",dataIndex:"name",formItemProps:{rules:[{required:!0,message:"请输入"}]}},{title:"from",dataIndex:"source",formItemProps:{rules:[{required:!0,message:"请输入"}]}},{title:"操作",valueType:"option",width:140,render:function(e,n,t,r){return(0,h.jsxs)(m.Z,{children:[(0,h.jsx)("a",{onClick:function(){var e;null==r||null===(e=r.startEditable)||void 0===e||e.call(r,n.uuid)},children:"编辑"},"editable"),(0,h.jsx)("a",{onClick:function(){null==a||a(c.filter((function(e){return e.uuid!==n.uuid})))},children:"删除"})]})}}],value:c,onChange:x,rowKey:function(e){return e.uuid},recordCreatorProps:{newRecordType:"dataSource",record:function(){return{uuid:(0,f.Z)(),name:"",source:"",order:0}}},editable:{type:"multiple",editableKeys:y,actionRender:function(e,n,t){return[t.save,t.cancel,t.delete]},onValuesChange:function(e,n){x(n)},onSave:(n=o()(r()().mark((function e(n,t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==a||a(c.map((function(e){return e.uuid===n?l()(l()({},e),t):e})));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)}),onChange:b}})})})}},85689:function(e,n,t){t.d(n,{Z:function(){return S}});var a=t(26068),r=t.n(a),i=t(90228),l=t.n(i),u=t(87999),o=t.n(u),c=t(48305),s=t.n(c),d=t(912),m=t(45144),p=t(39158),f=t(14471),v=t(50959),h=t(64155),x=t(7733),g=t(20947),j=t(47113),y=t(17906),b=t(64684),Z=t(11204),I=t(37024),k=t(19504),C=t(11527),w=function(e){var n=e.saveCallback,t=e.actionRef,a=(0,v.useState)(!1),i=s()(a,2),u=i[0],c=i[1],d=(0,v.useState)(),p=s()(d,2),h=p[0],x=p[1],g=(0,v.useState)("() => {}"),w=s()(g,2),S=w[0],T=w[1],N=j.Z.useForm(),E=s()(N,1)[0];return v.useImperativeHandle(t,(function(){return{callUpdateView:function(e){c(!0),x(e),T(e.handle||"() => {}"),E.setFieldsValue(e)}}})),(0,C.jsx)(y.Z,{width:600,title:"useImperativeHandle Action",placement:"right",destroyOnClose:!0,maskClosable:!0,open:u,extra:(0,C.jsxs)(f.Z,{children:[(0,C.jsx)(b.ZP,{onClick:function(){c(!1)},children:"取消"}),(0,C.jsx)(b.ZP,{type:"primary",onClick:o()(l()().mark((function e(){var t;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.validateFields();case 2:t=e.sent,null==n||n(r()(r()(r()({},h),t),{},{handle:S}));case 4:case"end":return e.stop()}}),e)}))),children:"保存"})]}),onClose:function(){c(!1),E.resetFields()},children:(0,C.jsxs)(j.Z,{form:E,children:[(0,C.jsx)(j.Z.Item,{label:"name",name:"name",children:(0,C.jsx)(Z.Z,{placeholder:"请输入方法名称"})}),(0,C.jsx)(j.Z.Item,{label:"handle",children:(0,C.jsx)(k.ZP,{height:"400px",value:S,style:{width:"100%"},extensions:[(0,I.eJ)({jsx:!0,typescript:!0})],onChange:function(e){return T(e)}})}),(0,C.jsx)(j.Z.Item,{label:"dependencies",name:"dependencies",children:(0,C.jsx)(m.default,{mode:"tags",style:{width:"100%"},tokenSeparators:[","]})})]})})},S=function(e){var n,t=e.container,a=e.saveCallback,i=(0,v.useState)([]),u=s()(i,2),c=u[0],j=u[1],y=(0,v.useState)([]),b=s()(y,2),Z=b[0],I=b[1],k=v.useRef();return v.useEffect((function(){j((null==t?void 0:t.usememos)||[])}),[t]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(d.Z,{title:"useMemo Hooks",size:"small",children:(0,C.jsx)(g.Z,{columns:[{title:"name",dataIndex:"name"},{title:"handle",dataIndex:"handle",valueType:"textarea"},{title:"dependencies",dataIndex:"dependencies",width:240,renderFormItem:function(){return(0,C.jsx)(m.default,{mode:"tags",style:{width:"100%"},tokenSeparators:[","]})},render:function(e,n){var t;return null==n||null===(t=n.dependencies)||void 0===t?void 0:t.map((function(e){return(0,C.jsx)(p.Z,{children:e},e)}))}},{title:"操作",valueType:"option",width:140,render:function(e,n,t,r){return(0,C.jsxs)(f.Z,{children:[(0,C.jsx)("a",{onClick:function(){var e;null===(e=k.current)||void 0===e||e.callUpdateView(n)},children:"高级"},"advanced"),(0,C.jsx)("a",{onClick:function(){var e;null==r||null===(e=r.startEditable)||void 0===e||e.call(r,n.uuid)},children:"编辑"},"editable"),(0,C.jsx)("a",{onClick:o()(l()().mark((function e(){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==a||a(c.filter((function(e){return e.uuid!==n.uuid})));case 1:case"end":return e.stop()}}),e)}))),children:"删除"})]})}}],rowKey:function(e){return e.uuid},value:c,onChange:j,recordCreatorProps:{newRecordType:"dataSource",record:function(){return{uuid:(0,h.Z)(),name:"",handle:"() => {}",required:!1,type:x.Yk.STRING,initialValue:"",order:0}}},editable:{type:"multiple",editableKeys:Z,actionRender:function(e,n,t){return[t.save,t.cancel,t.delete]},onValuesChange:function(e,n){j(n)},onSave:(n=o()(l()().mark((function e(n,t){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==a||a(c.map((function(e){return e.uuid===n?r()(r()({},e),t):e})));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)}),onChange:I}})}),(0,C.jsx)(w,{actionRef:k,saveCallback:function(){var e=o()(l()().mark((function e(n){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==a||a(c.map((function(e){return e.uuid===n.uuid?r()(r()({},e),n):e})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})]})}},75752:function(e,n,t){t.d(n,{Z:function(){return S}});var a=t(26068),r=t.n(a),i=t(90228),l=t.n(i),u=t(87999),o=t.n(u),c=t(48305),s=t.n(c),d=t(912),m=t(27672),p=t(14471),f=t(50959),v=t(64155),h=t(7733),x=t(20947),g=t(47113),j=t(17906),y=t(64684),b=t(11204),Z=t(89178),I=t(37024),k=t(19504),C=t(11527),w=function(e){var n=e.saveCallback,t=e.actionRef,a=(0,f.useState)(!1),i=s()(a,2),u=i[0],c=i[1],d=(0,f.useState)(),m=s()(d,2),v=m[0],h=m[1],x=(0,f.useState)("() => {}"),w=s()(x,2),S=w[0],T=w[1],N=g.Z.useForm(),E=s()(N,1)[0];return f.useImperativeHandle(t,(function(){return{callUpdateView:function(e){c(!0),h(e),T((null==e?void 0:e.handle)||"() => {}"),E.setFieldsValue(e)}}})),(0,C.jsx)(j.Z,{width:600,title:"useImperativeHandle Action",placement:"right",destroyOnClose:!0,maskClosable:!0,open:u,extra:(0,C.jsxs)(p.Z,{children:[(0,C.jsx)(y.ZP,{onClick:function(){c(!1)},children:"取消"}),(0,C.jsx)(y.ZP,{type:"primary",onClick:o()(l()().mark((function e(){var t;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.validateFields();case 2:t=e.sent,null==n||n(r()(r()(r()({},v),t),{},{handle:S}));case 4:case"end":return e.stop()}}),e)}))),children:"保存"})]}),onClose:function(){c(!1),E.resetFields()},children:(0,C.jsxs)(g.Z,{form:E,children:[(0,C.jsx)(g.Z.Item,{label:"name",name:"name",children:(0,C.jsx)(b.Z,{placeholder:"请输入方法名称"})}),(0,C.jsx)(g.Z.Item,{label:"type",name:"type",children:(0,C.jsx)(b.Z,{placeholder:"请输入参数及类型（可选）"})}),(0,C.jsx)(g.Z.Item,{label:"required",name:"required",tooltip:"方法是否必填",valuePropName:"checked",children:(0,C.jsx)(Z.Z,{})}),(0,C.jsx)(g.Z.Item,{label:"handle",children:(0,C.jsx)(k.ZP,{height:"400px",value:S,style:{width:"100%"},extensions:[(0,I.eJ)({jsx:!0,typescript:!0})],onChange:function(e){return T(e)}})})]})})},S=function(e){var n,t=e.container,a=e.saveCallback,i=(0,f.useState)([]),u=s()(i,2),c=u[0],g=u[1],j=(0,f.useState)([]),y=s()(j,2),b=y[0],Z=y[1],I=f.useRef();return f.useEffect((function(){g((null==t?void 0:t.actions)||[])}),[t]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(d.Z,{title:"Ref Actions",size:"small",children:(0,C.jsx)(x.Z,{columns:[{title:"name",dataIndex:"name"},{title:"type",dataIndex:"type",renderFormItem:function(){return(0,C.jsx)(m.Z,{allowClear:!0,options:[{label:"string",value:"string"},{label:"number",value:"number"},{label:"boolean",value:"boolean"},{label:"object",value:"object"},{label:"any",value:"any"},{label:"Record<string, any>",value:"Record<string, any>"},{label:"() => void",value:"() => void"},{label:"() => void",value:"() => Promise<void>"}]})}},{title:"required",dataIndex:"required",valueType:"switch"},{title:"handle",dataIndex:"handle",valueType:"textarea"},{title:"操作",valueType:"option",width:140,render:function(e,n,t,r){return(0,C.jsxs)(p.Z,{children:[(0,C.jsx)("a",{onClick:function(){var e;null===(e=I.current)||void 0===e||e.callUpdateView(n)},children:"高级"},"advanced"),(0,C.jsx)("a",{onClick:function(){var e;null==r||null===(e=r.startEditable)||void 0===e||e.call(r,n.uuid)},children:"编辑"},"editable"),(0,C.jsx)("a",{onClick:o()(l()().mark((function e(){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==a||a(c.filter((function(e){return e.uuid!==n.uuid})));case 1:case"end":return e.stop()}}),e)}))),children:"删除"})]})}}],rowKey:function(e){return e.uuid},value:c,onChange:g,recordCreatorProps:{newRecordType:"dataSource",record:function(){return{uuid:(0,v.Z)(),name:"",required:!1,type:h.Yk.STRING,initialValue:"",order:0}}},editable:{type:"multiple",editableKeys:b,actionRender:function(e,n,t){return[t.save,t.cancel,t.delete]},onValuesChange:function(e,n){g(n)},onSave:(n=o()(l()().mark((function e(n,t){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==a||a(c.map((function(e){return e.uuid===n?r()(r()({},e),t):e})));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)}),onChange:Z}})}),(0,C.jsx)(w,{actionRef:I,saveCallback:function(){var e=o()(l()().mark((function e(n){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==a||a(c.map((function(e){return e.uuid===n.uuid?r()(r()({},e),n):e})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})]})}},681:function(e,n,t){var a=t(26068),r=t.n(a),i=t(90228),l=t.n(i),u=t(87999),o=t.n(u),c=t(48305),s=t.n(c),d=t(912),m=t(56901),p=t(14471),f=t(50959),v=t(64155),h=t(20947),x=t(10218),g=t(11527);n.Z=function(e){var n,t=e.container,a=e.saveCallback,i=(0,f.useState)([]),u=s()(i,2),c=u[0],j=u[1],y=(0,f.useState)([]),b=s()(y,2),Z=b[0],I=b[1],k=(0,f.useState)([]),C=s()(k,2),w=C[0],S=C[1],T=function(){var e=o()(l()().mark((function e(n){var t;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.vM)({containerId:n});case 2:null!=(t=e.sent)&&t.success&&S(t.data||[]);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return f.useEffect((function(){j((null==t?void 0:t.references)||[]),t&&T(t.id)}),[t]),(0,g.jsx)(d.Z,{title:"Refs",size:"small",children:(0,g.jsx)(h.Z,{columns:[{title:"name",dataIndex:"name"},{title:"type",dataIndex:"type"},{title:"from",dataIndex:"from",renderFormItem:function(){return(0,g.jsx)(m.Z,{allowClear:!0,placeholder:"请选择关联组件",treeData:w,treeDefaultExpandAll:!0,fieldNames:{label:"name",value:"uuid",children:"children"}})}},{title:"remark",dataIndex:"remark"},{title:"操作",valueType:"option",width:140,render:function(e,n,t,r){return(0,g.jsxs)(p.Z,{children:[(0,g.jsx)("a",{onClick:function(){var e;null==r||null===(e=r.startEditable)||void 0===e||e.call(r,n.uuid)},children:"编辑"},"editable"),(0,g.jsx)("a",{onClick:o()(l()().mark((function e(){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==a||a(c.filter((function(e){return e.uuid!==n.uuid})));case 1:case"end":return e.stop()}}),e)}))),children:"删除"})]})}}],rowKey:function(e){return e.uuid},value:c,onChange:j,recordCreatorProps:{newRecordType:"dataSource",record:function(){return{uuid:(0,v.Z)(),name:"",from:"",type:"",initialValue:"",order:0}}},editable:{type:"multiple",editableKeys:Z,actionRender:function(e,n,t){return[t.save,t.cancel,t.delete]},onValuesChange:function(e,n){j(n)},onSave:(n=o()(l()().mark((function e(n,t){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==a||a(c.map((function(e){return e.uuid===n?r()(r()({},e),t):e})));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)}),onChange:I}})})}},86890:function(e,n,t){t.d(n,{Z:function(){return w}});var a=t(26068),r=t.n(a),i=t(90228),l=t.n(i),u=t(87999),o=t.n(u),c=t(48305),s=t.n(c),d=t(912),m=t(14471),p=t(50959),f=t(64155),v=t(7733),h=t(20947),x=t(47113),g=t(17906),j=t(64684),y=t(11204),b=t(45144),Z=t(37024),I=t(19504),k=t(11527),C=function(e){var n=e.saveCallback,t=e.actionRef,a=(0,p.useState)(!1),i=s()(a,2),u=i[0],c=i[1],d=(0,p.useState)(),f=s()(d,2),v=f[0],h=f[1],C=(0,p.useState)(""),w=s()(C,2),S=w[0],T=w[1],N=x.Z.useForm(),E=s()(N,1)[0];return p.useImperativeHandle(t,(function(){return{callUpdateView:function(e){c(!0),h(e),T(e.config||""),E.setFieldsValue(e)}}})),(0,k.jsx)(g.Z,{width:600,title:"useImperativeHandle Action",placement:"right",destroyOnClose:!0,maskClosable:!0,open:u,extra:(0,k.jsxs)(m.Z,{children:[(0,k.jsx)(j.ZP,{onClick:function(){c(!1)},children:"取消"}),(0,k.jsx)(j.ZP,{type:"primary",onClick:o()(l()().mark((function e(){var t;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.validateFields();case 2:t=e.sent,null==n||n(r()(r()(r()({},v),t),{},{config:S}));case 4:case"end":return e.stop()}}),e)}))),children:"保存"})]}),onClose:function(){c(!1),E.resetFields()},children:(0,k.jsxs)(x.Z,{form:E,children:[(0,k.jsx)(x.Z.Item,{label:"body",name:"body",tooltip:"示例：{ data, run, refresh, loading }，注意：带上花括号",children:(0,k.jsx)(y.Z,{placeholder:"请输入返回结果定义"})}),(0,k.jsx)(x.Z.Item,{label:"service",name:"service",tooltip:"上下已经定义好的服务名称，可选择配置中的接口服务",children:(0,k.jsx)(y.Z,{placeholder:"请输入方法名称"})}),(0,k.jsx)(x.Z.Item,{label:"config",tooltip:"useRequest 配置项",children:(0,k.jsx)(I.ZP,{height:"400px",value:S,style:{width:"100%"},extensions:[(0,Z.eJ)({jsx:!0,typescript:!0})],onChange:function(e){return T(e)}})}),(0,k.jsx)(x.Z.Item,{label:"dependencies",name:"dependencies",children:(0,k.jsx)(b.default,{mode:"tags",style:{width:"100%"},tokenSeparators:[","]})})]})})},w=function(e){var n,t=e.container,a=e.saveCallback,i=(0,p.useState)([]),u=s()(i,2),c=u[0],x=u[1],g=(0,p.useState)([]),j=s()(g,2),y=j[0],b=j[1],Z=p.useRef();return p.useEffect((function(){x((null==t?void 0:t.userequests)||[])}),[t]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(d.Z,{title:"useRequest Hooks",size:"small",children:(0,k.jsx)(h.Z,{columns:[{title:"body",dataIndex:"body"},{title:"service",dataIndex:"service"},{title:"config",dataIndex:"config",valueType:"textarea"},{title:"操作",valueType:"option",width:140,render:function(e,n,t,r){return(0,k.jsxs)(m.Z,{children:[(0,k.jsx)("a",{onClick:function(){var e;null===(e=Z.current)||void 0===e||e.callUpdateView(n)},children:"高级"},"advanced"),(0,k.jsx)("a",{onClick:function(){var e;null==r||null===(e=r.startEditable)||void 0===e||e.call(r,n.uuid)},children:"编辑"},"editable"),(0,k.jsx)("a",{onClick:o()(l()().mark((function e(){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==a||a(c.filter((function(e){return e.uuid!==n.uuid})));case 1:case"end":return e.stop()}}),e)}))),children:"删除"})]})}}],rowKey:function(e){return e.uuid},value:c,onChange:x,recordCreatorProps:{newRecordType:"dataSource",record:function(){return{uuid:(0,f.Z)(),name:"",body:"{ data, loading }",required:!1,type:v.Yk.STRING,initialValue:"",order:0}}},editable:{type:"multiple",editableKeys:y,actionRender:function(e,n,t){return[t.save,t.cancel,t.delete]},onValuesChange:function(e,n){x(n)},onSave:(n=o()(l()().mark((function e(n,t){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==a||a(c.map((function(e){return e.uuid===n?r()(r()({},e),t):e})));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)}),onChange:b}})}),(0,k.jsx)(C,{actionRef:Z,saveCallback:function(){var e=o()(l()().mark((function e(n){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==a||a(c.map((function(e){return e.uuid===n.uuid?r()(r()({},e),n):e})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})]})}},66394:function(e,n,t){var a=t(90228),r=t.n(a),i=t(26068),l=t.n(i),u=t(87999),o=t.n(u),c=t(48305),s=t.n(c),d=t(912),m=t(27672),p=t(14471),f=t(50959),v=t(64155),h=t(20947),x=t(11527);n.Z=function(e){var n,t=e.container,a=e.saveCallback,i=(0,f.useState)([]),u=s()(i,2),c=u[0],g=u[1],j=(0,f.useState)([]),y=s()(j,2),b=y[0],Z=y[1];return f.useEffect((function(){g((null==t?void 0:t.states)||[])}),[t]),(0,x.jsx)(d.Z,{title:"States",size:"small",children:(0,x.jsx)(h.Z,{columns:[{title:"name",dataIndex:"name"},{title:"type",dataIndex:"type",width:200,renderFormItem:function(){return(0,x.jsx)(m.Z,{allowClear:!0,options:[{label:"string",value:"string"},{label:"number",value:"number"},{label:"boolean",value:"boolean"},{label:"object",value:"object"},{label:"any",value:"any"},{label:"Record<string, any>",value:"Record<string, any>"},{label:"() => void",value:"() => void"},{label:"() => void",value:"() => Promise<void>"}]})}},{title:"initialValue",dataIndex:"initialValue"},{title:"remark",dataIndex:"remark"},{title:"操作",valueType:"option",width:140,render:function(e,n,t,r){return(0,x.jsxs)(p.Z,{children:[(0,x.jsx)("a",{onClick:function(){var e;null==r||null===(e=r.startEditable)||void 0===e||e.call(r,n.uuid)},children:"编辑"},"editable"),(0,x.jsx)("a",{onClick:function(){null==a||a(c.filter((function(e){return e.uuid!==n.uuid})))},children:"删除"})]})}}],rowKey:function(e){return e.uuid},value:c,onChange:g,recordCreatorProps:{newRecordType:"dataSource",record:function(){return{uuid:(0,v.Z)(),name:"",type:"string",initialValue:"",order:0}}},editable:{type:"multiple",editableKeys:b,actionRender:function(e,n,t){return[t.save,t.cancel,t.delete]},onValuesChange:function(e,n){g(n)},onSave:(n=o()(r()().mark((function e(n,t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==a||a(c.map((function(e){return e.uuid===n?l()(l()({},e),t):e})));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)}),onChange:Z}})})}},33330:function(e,n,t){var a=t(90228),r=t.n(a),i=t(82092),l=t.n(i),u=t(87999),o=t.n(u),c=t(15558),s=t.n(c),d=t(48305),m=t.n(d),p=t(26068),f=t.n(p),v=t(912),h=t(14471),x=t(64684),g=t(23683),j=t(50959),y=t(30565),b=t(64155),Z=t(71625),I=t(10218),k=t(73368),C=t(83745),w=t(73115),S=t(20947),T=t(11527),N=(0,y.W6)((function(){return(0,T.jsx)(C.Z,{style:{cursor:"grab",color:"#999"}})})),E=(0,y.W8)((function(e){return(0,T.jsx)("tr",f()({},e))})),P=(0,y.JN)((function(e){return(0,T.jsx)("tbody",f()({},e))})),R=[{title:"label",dataIndex:"label"},{title:"key",dataIndex:"key"},{title:"span",dataIndex:"span",valueType:"digit"}];n.Z=function(e){var n=e.property,t=e.component,a=e.saveCallback,i=e.setCurrentComponent,u=e.callSelectComponentView,c=(0,j.useState)([]),d=m()(c,2),p=d[0],y=d[1],C=(0,j.useState)([]),O=m()(C,2),A=O[0],F=O[1],z=j.useRef();j.useEffect((function(){t.config&&n&&y(t.config[n.name]||[])}),[t,n]);var D,L=j.useMemo((function(){return(null==A?void 0:A.length)>0?R:[{title:"Sort",dataIndex:"sort",width:60,className:"drag-visible",render:function(){return(0,T.jsx)(N,{})}}].concat(R)}),[A]);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(v.Z,{size:"small",title:(null==n?void 0:n.name)||"items",style:{marginBottom:12},extra:(0,T.jsx)(h.Z,{children:(0,T.jsx)(x.ZP,{type:"primary",onClick:function(){var e;null===(e=z.current)||void 0===e||e.open()},children:"根据数据源创建"})}),children:(0,T.jsx)(S.Z,{columns:[].concat(s()(L),[{title:"children",dataIndex:"children",renderFormItem:function(e,a){var r,l=a.record,o=null===(r=t.children)||void 0===r?void 0:r.find((function(e){var n;return(null===(n=e.relation)||void 0===n?void 0:n.item)===(null==l?void 0:l.uuid)}));return o?(0,T.jsx)(x.ZP,{type:"link",size:"small",onClick:function(){i(o)},children:null==o?void 0:o.name}):(0,T.jsx)(x.ZP,{type:"link",size:"small",icon:(0,T.jsx)(w.Z,{}),onClick:function(){null==u||u({type:"SUBPROP",item:null==l?void 0:l.uuid,subkey:"children",property:null==n?void 0:n.name})},children:"添加组件"})}},{title:"操作",dataIndex:"options",valueType:"option",render:function(e,a,i,u){return(0,T.jsxs)(h.Z,{children:[(0,T.jsx)("a",{onClick:function(){var e;null==u||null===(e=u.startEditable)||void 0===e||e.call(u,a.uuid)},children:"编辑"},"edit"),(0,T.jsx)("a",{onClick:o()(r()().mark((function e(){var i,u;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(p.filter((function(e){return e.uuid!==a.uuid}))),i=p.filter((function(e){return e.uuid!==a.uuid})),u=f()(f()({},t.config),{},l()({},null==n?void 0:n.name,i)),e.next=5,(0,I.vz)(t.id,{config:u});case 5:case"end":return e.stop()}}),e)}))),children:"删除"},"delete")]})}}]),rowKey:function(e){return e.uuid},value:p,onChange:function(e){return y(e)},recordCreatorProps:{newRecordType:"dataSource",record:function(){return{uuid:(0,b.Z)(),label:"",key:"",order:0}}},editable:{type:"multiple",editableKeys:A,actionRender:function(e,n,t){return[t.save,t.cancel,t.delete]},onValuesChange:function(e,n){y(n)},onSave:(D=o()(r()().mark((function e(i,u){var o,c;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=p.map((function(e){return e.uuid===u.uuid?u:e})),c=f()(f()({},t.config),{},l()({},null==n?void 0:n.name,o)),e.next=4,(0,I.vz)(t.id,{config:c});case 4:null==a||a(f()(f()({},t),{},{config:c}));case 5:case"end":return e.stop()}}),e)}))),function(e,n){return D.apply(this,arguments)}),onChange:F},components:(null==A?void 0:A.length)>0?{}:{body:{wrapper:function(e){return(0,T.jsx)(P,f()({useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:function(){var e=o()(r()().mark((function e(i){var u,o,c,s,d;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=i.oldIndex,o=i.newIndex,u===o){e.next=8;break}return c=(0,g.q)(p,u,o),s=c.map((function(e,n){return f()(f()({},e),{},{sort:n,order:(null==c?void 0:c.length)-n})})),d=f()(f()({},t.config),{},l()({},null==n?void 0:n.name,s)),e.next=7,(0,I.vz)(t.id,{config:d});case 7:null==a||a(f()(f()({},t),{},{config:d}));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},e))},row:function(e){var n=p.findIndex((function(n){return n.uuid===e["data-row-key"]}));return(0,T.jsx)(E,f()({index:n},e))}}}})}),(0,T.jsx)(Z.Z,{modalRef:z,selectedCallback:function(e,n,t){var a=(0,k.Qu)(e,n,null==t?void 0:t.tableName);y((function(e){return[].concat(s()(e),s()(a))})),F((function(e){return[].concat(s()(e),s()(a.map((function(e){return e.uuid}))))}))}})]})}},79841:function(e,n,t){t.d(n,{Z:function(){return ae}});var a=t(335),r=t.n(a),i=t(15558),l=t.n(i),u=t(90228),o=t.n(u),c=t(82092),s=t.n(c),d=t(87999),m=t.n(d),p=t(48305),f=t.n(p),v=t(26068),h=t.n(v),x=t(37956),g=t(912),j=t(14471),y=t(22825),b=t(64684),Z=t(23683),I=t(58643),k=t(50959),C=t(30565),w=t(64155),S=t(73252),T=t(71625),N=t(7733),E=t(10218),P=t(73368),R=t(83745),O=t(80525),A=t(25853),F=t(92336),z=t(13603),D=t(20947),L=t(67825),M=t.n(L),B=t(47113),V=t(17906),U=t(11204),G=t(17621),H=t(45144),K=t(89178),q=t(46611),_=t(73115),J=t(88884),Y=t(11527),$=["key","name"],W=["key","name"],Q=function(e){var n=e.saveCallback,t=e.actionRef,a=(0,k.useState)(N.E_.STRING),r=f()(a,2),i=r[0],l=r[1],u=(0,k.useState)(N.PA.INPUT),c=f()(u,2),s=c[0],d=c[1],p=(0,k.useState)(),v=f()(p,2),x=v[0],y=v[1],Z=(0,k.useState)("string"),I=f()(Z,2),C=I[0],w=I[1],S=(0,k.useState)(),T=f()(S,2),E=T[0],P=T[1],R=(0,k.useState)(),O=f()(R,2),A=O[0],F=O[1],z=(0,k.useState)(!1),D=f()(z,2),L=D[0],Q=D[1],X=B.Z.useForm(),ee=f()(X,1)[0];return k.useImperativeHandle(t,(function(){return{open:function(e){var n,t=e.record,a=e.columns;(P(t),Q(!0),F(a),d(t.widget||N.PA.INPUT),t.dependent)&&y(null===(n=t.dependent)||void 0===n?void 0:n.name);ee.setFieldsValue(t)},closeView:function(){Q(!1)}}})),(0,Y.jsx)(V.Z,{width:720,title:"编辑列表字段",placement:"right",destroyOnClose:!0,maskClosable:!0,open:L,extra:(0,Y.jsxs)(j.Z,{children:[(0,Y.jsx)(b.ZP,{onClick:function(){Q(!1)},children:"取消"}),(0,Y.jsx)(b.ZP,{type:"primary",onClick:m()(o()().mark((function e(){var t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.validateFields();case 2:if(!(t=e.sent)){e.next=7;break}return e.next=6,n(h()(h()({},E),t));case 6:Q(!1);case 7:case"end":return e.stop()}}),e)}))),children:"保存"})]}),onClose:function(){Q(!1)},afterOpenChange:function(e){e||(ee.resetFields(),w("string"),y(void 0),d(N.PA.INPUT),l(N.E_.STRING))},children:(0,Y.jsxs)(B.Z,{form:ee,labelCol:{span:4},wrapperCol:{span:18},children:[(0,Y.jsx)(B.Z.Item,{label:"label",name:"label",children:(0,Y.jsx)(U.Z,{placeholder:"label"})}),(0,Y.jsx)(B.Z.Item,{label:"name",name:"name",children:(0,Y.jsx)(U.Z,{placeholder:"name"})}),(0,Y.jsx)(B.Z.Item,{label:"tooltip",name:"tooltip",children:(0,Y.jsx)(U.Z,{placeholder:"tooltip"})}),(0,Y.jsx)(B.Z.Item,{label:"defaultValue",name:"defaultValue",children:(0,Y.jsx)(U.Z,{placeholder:"defaultValue"})}),(0,Y.jsx)(B.Z.Item,{label:"placeholder",name:"placeholder",children:(0,Y.jsx)(U.Z,{placeholder:"placeholder"})}),(0,Y.jsx)(B.Z.Item,{label:"colSize",name:"colSize",children:(0,Y.jsx)(G.Z,{placeholder:"colSize"})}),(0,Y.jsx)(B.Z.Item,{label:"datatype",name:"type",children:(0,Y.jsx)(H.default,{placeholder:"datatype",options:J.pl.map((function(e){return{label:e,value:e}})),onChange:function(e){return l(e)}})}),(0,Y.jsx)(B.Z.Item,{label:"widget",name:"widget",children:(0,Y.jsx)(H.default,{placeholder:"widget",options:J.b8.map((function(e){return{label:e,value:e}})),onChange:function(e){return d(e)}})}),(0,Y.jsx)(B.Z.Item,{label:"editable",name:"editable",valuePropName:"checked",children:(0,Y.jsx)(K.Z,{})}),(0,Y.jsx)(B.Z.Item,{label:"multiple",name:"multiple",valuePropName:"checked",children:(0,Y.jsx)(K.Z,{})}),(0,Y.jsx)(B.Z.Item,{label:"readOnly",name:"readOnly",valuePropName:"checked",children:(0,Y.jsx)(K.Z,{})}),(0,Y.jsx)(B.Z.Item,{label:"disabled",name:"disabled",valuePropName:"checked",children:(0,Y.jsx)(K.Z,{})}),[N.PA.SELECT,N.PA.RADIO,N.PA.CHECKBOX].includes(s)&&(0,Y.jsx)(B.Z.Item,{label:"options",children:(0,Y.jsx)(B.Z.List,{name:"options",children:function(e,n){var t=n.add,a=n.remove;return(0,Y.jsxs)(Y.Fragment,{children:[e.map((function(e){var n=e.key,t=e.name,r=M()(e,$);return(0,Y.jsxs)(j.Z,{style:{display:"flex",marginBottom:1},align:"baseline",children:[(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"label"],children:(0,Y.jsx)(U.Z,{placeholder:"请输入标题"})})),(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"key"],children:(0,Y.jsx)(U.Z,{placeholder:"请输入Key"})})),(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"value"],rules:[{required:!0,message:"请输入Value"}],children:(0,Y.jsx)(U.Z,{type:[N.E_.NUMBER].includes(i)?"number":"text",placeholder:"请输入Value"})})),(0,Y.jsx)(q.Z,{onClick:function(){return a(t)}})]},n)})),(0,Y.jsx)(B.Z.Item,{children:(0,Y.jsx)(b.ZP,{type:"dashed",onClick:function(){return t()},block:!0,icon:(0,Y.jsx)(_.Z,{}),children:"添 加"})})]})}})}),(0,Y.jsx)(B.Z.Item,{label:"rules",children:(0,Y.jsx)(B.Z.List,{name:"rules",children:function(e,n){var t=n.add,a=n.remove;return(0,Y.jsxs)(Y.Fragment,{children:[e.map((function(e){var n=e.key,t=e.name,r=M()(e,W);return(0,Y.jsxs)(j.Z,{style:{display:"flex",marginBottom:1},align:"baseline",children:[(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"type"],rules:[{required:!0,message:"请选择校验类型"}],children:(0,Y.jsx)(H.default,{placeholder:"type",onChange:function(e){return w(e)},options:[{label:"string",value:"string"},{label:"number",value:"number"},{label:"boolean",value:"boolean"},{label:"method",value:"method"},{label:"regexp",value:"regexp"},{label:"integer",value:"integer"},{label:"float",value:"float"},{label:"date",value:"date"},{label:"url",value:"url"},{label:"hex",value:"hex"},{label:"email",value:"email"}]})})),"regexp"===C&&(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"pattern"],children:(0,Y.jsx)(U.Z,{placeholder:"pattern"})})),["string","number"].includes(C)&&(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"min"],children:(0,Y.jsx)(G.Z,{placeholder:"min"})})),["string","number"].includes(C)&&(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"max"],children:(0,Y.jsx)(G.Z,{placeholder:"max"})})),["string","number"].includes(C)&&(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"len"],children:(0,Y.jsx)(G.Z,{placeholder:"len"})})),(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"message"],children:(0,Y.jsx)(U.Z,{placeholder:"message"})})),(0,Y.jsx)(q.Z,{onClick:function(){return a(t)}})]},n)})),(0,Y.jsx)(B.Z.Item,{children:(0,Y.jsx)(b.ZP,{type:"dashed",onClick:function(){return t()},block:!0,icon:(0,Y.jsx)(_.Z,{}),children:"添 加"})})]})}})}),(0,Y.jsxs)(g.Z,{title:"reference",size:"small",style:{marginBottom:12},children:[(0,Y.jsx)(B.Z.Item,{label:"service",name:["reference","service"],children:(0,Y.jsx)(U.Z,{placeholder:"service"})}),(0,Y.jsx)(B.Z.Item,{label:"label",name:["reference","label"],children:(0,Y.jsx)(U.Z,{placeholder:"label"})}),(0,Y.jsx)(B.Z.Item,{label:"key",name:["reference","key"],children:(0,Y.jsx)(U.Z,{placeholder:"key"})}),(0,Y.jsx)(B.Z.Item,{label:"params",name:["reference","params"],children:(0,Y.jsx)(U.Z.TextArea,{rows:2,placeholder:"params"})})]}),(0,Y.jsxs)(g.Z,{title:"dependent",size:"small",children:[(0,Y.jsx)(B.Z.Item,{label:"name",name:["reference","name"],children:(0,Y.jsx)(H.default,{onChange:function(e){return y(e)},options:null==A?void 0:A.map((function(e){return{label:e.name,value:e.name}}))})}),(0,Y.jsxs)(B.Z.Item,{label:"value",name:["reference","value"],children:["Number"===(null==x?void 0:x.datatype)&&(0,Y.jsx)(G.Z,{placeholder:"value"}),"Boolean"===(null==x?void 0:x.datatype)&&(0,Y.jsx)(H.default,{placeholder:"value",options:[{label:"true",value:!0},{label:"false",value:!1}]}),["String","Decimal","DateTime","Json"].includes(null==x?void 0:x.datatype)&&(0,Y.jsx)(U.Z,{placeholder:"value"})]})]})]})})},X=(0,C.W6)((function(){return(0,Y.jsx)(R.Z,{style:{cursor:"grab",color:"#999"}})})),ee=(0,C.W8)((function(e){return(0,Y.jsx)("tr",h()({},e))})),ne=(0,C.JN)((function(e){return(0,Y.jsx)("tbody",h()({},e))})),te=[{title:"label",dataIndex:"label"},{title:"name",dataIndex:"name"},{title:"widget",dataIndex:"widget",valueType:"select",valueEnum:N.PA},{title:"remark",dataIndex:"remark"}],ae=function(e){var n=e.property,t=e.component,a=e.saveCallback,i=x.Z.useApp().message,u=(0,k.useState)([]),c=f()(u,2),d=c[0],p=c[1],v=(0,k.useState)([]),C=f()(v,2),R=C[0],L=C[1],M=k.useRef(),B=k.useRef(),V=k.useRef();k.useEffect((function(){t.config&&n&&p(t.config[n.name]||[])}),[t,n]);var U,G=k.useMemo((function(){return(null==R?void 0:R.length)>0?te:[{title:"Sort",dataIndex:"sort",width:60,className:"drag-visible",render:function(){return(0,Y.jsx)(X,{})}}].concat(te)}),[R]);return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(g.Z,{size:"small",title:(null==n?void 0:n.name)||"Columns",style:{marginBottom:12},extra:(0,Y.jsxs)(j.Z,{children:[(0,Y.jsx)(y.Z,{trigger:["click"],menu:{items:[{label:"导入接口对象",key:"API",icon:(0,Y.jsx)(O.Z,{}),onClick:function(){var e;null===(e=M.current)||void 0===e||e.open()}},{label:"导入数据库字段",key:"DATABASE",icon:(0,Y.jsx)(A.Z,{}),onClick:function(){var e;null===(e=B.current)||void 0===e||e.open()}}]},children:(0,Y.jsx)(b.ZP,{ghost:!0,type:"primary",children:(0,Y.jsxs)(j.Z,{children:["数据源导入",(0,Y.jsx)(F.Z,{})]})})}),(0,Y.jsx)(b.ZP,{type:"primary",icon:(0,Y.jsx)(z.Z,{}),onClick:m()(o()().mark((function e(){var a;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.vz)(t.id,{config:h()(h()({},t.config),{},s()({},null==n?void 0:n.name,d))});case 2:null!=(a=e.sent)&&a.success&&(i.success("保存成功"),L([]));case 4:case"end":return e.stop()}}),e)}))),children:"保存"})]}),children:(0,Y.jsx)(D.Z,{columns:[].concat(l()(G),[{title:"操作",dataIndex:"option",valueType:"option",width:140,render:function(e,r,i,l){return(0,Y.jsxs)(j.Z,{children:[(0,Y.jsx)("a",{onClick:function(){var e;null===(e=V.current)||void 0===e||e.open({record:r,columns:d})},children:"高级"}),(0,Y.jsx)("a",{onClick:function(){var e;null==l||null===(e=l.startEditable)||void 0===e||e.call(l,r.uuid)},children:"编辑"},"editable"),(0,Y.jsx)(b.ZP,{danger:!0,size:"small",type:"link",style:{padding:0},onClick:m()(o()().mark((function e(){var i,l;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p((function(e){return e.filter((function(e){return e.uuid!==r.uuid}))})),i=d.filter((function(e){return e.uuid!==r.uuid})),l=h()(h()({},t.config),{},s()({},null==n?void 0:n.name,i)),e.next=5,(0,E.vz)(t.id,{config:l});case 5:null==a||a(h()(h()({},t),{},{config:l}));case 6:case"end":return e.stop()}}),e)}))),children:"删除"})]})}}]),rowKey:function(e){return e.uuid},value:d,onChange:p,recordCreatorProps:{newRecordType:"dataSource",record:function(){return{uuid:(0,w.Z)(),label:"",name:"",widget:N.PA.INPUT,order:0,editable:!0}}},editable:{type:"multiple",editableKeys:R,actionRender:function(e,n,t){return[t.save,t.cancel,t.delete]},onValuesChange:function(e,n){p(n)},onSave:(U=m()(o()().mark((function e(r,i){var l,u;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=d.map((function(e){return e.uuid===i.uuid?i:e})),u=h()(h()({},t.config),{},s()({},null==n?void 0:n.name,l)),e.next=4,(0,E.vz)(t.id,{config:u});case 4:null==a||a(h()(h()({},t),{},{config:u}));case 5:case"end":return e.stop()}}),e)}))),function(e,n){return U.apply(this,arguments)}),onChange:L},components:(null==R?void 0:R.length)>0?{}:{body:{wrapper:function(e){return(0,Y.jsx)(ne,h()({useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:function(){var e=m()(o()().mark((function e(r){var i,l,u,c,m;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.oldIndex,l=r.newIndex,i===l){e.next=8;break}return u=(0,Z.q)(d,i,l),c=u.map((function(e,n){return h()(h()({},e),{},{sort:n,order:(null==u?void 0:u.length)-n})})),m=h()(h()({},t.config),{},s()({},null==n?void 0:n.name,c)),e.next=7,(0,E.vz)(t.id,{config:m});case 7:null==a||a(h()(h()({},t),{},{config:m}));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},e))},row:function(e){var n=d.findIndex((function(n){return n.uuid===e["data-row-key"]}));return(0,Y.jsx)(ee,h()({index:n},e))}}}})}),(0,Y.jsx)(S.Z,{actionRef:M,selectedCallback:function(){var e=m()(o()().mark((function e(n){var t,a;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.filter((function(e){return!!e.type})).map((function(e){var n,t,a,i,l=(0,I.Ho)(e.type),u=[],o={name:e.name,label:e.title,widget:N.l9.INPUT,uuid:(0,w.Z)()};if(void 0!==e.default&&null!==e.default&&Object.assign(o,{defaultValue:e.default}),(e.type.indexOf("date")>-1||(null===(n=e.format)||void 0===n?void 0:n.indexOf("date"))>-1)&&Object.assign(o,{widget:N.l9.DATETIME,format:"YYYY-MM-DD HH:mm:ss",showTime:!0}),(null===(t=e.description)||void 0===t?void 0:t.indexOf("Decimal"))>-1&&Object.assign(o,{widget:N.l9.INPUT_NUMBER}),e.enum&&e.description){var c,s=e.description.match(/\{([^}]+)\}/g),d=(null==s||null===(c=s[0])||void 0===c?void 0:c.slice(1,-1)).split(",").map((function(e){var n=e.split(":"),t=f()(n,2),a=t[0],r=t[1];return{value:"Number"===l?Number(a):a,label:r,key:a.toString()}}));Object.assign(o,{options:d,widget:N.l9.SELECT})}if("Boolean"===l&&Object.assign(o,{widget:N.l9.SWITCH}),(null===(a=e.description)||void 0===a?void 0:a.indexOf("Json"))>-1&&Object.assign(o,{widget:N.l9.TEXTAREA}),(null===(i=e.description)||void 0===i?void 0:i.indexOf("RULES"))>-1){var m,p,v=e.description.match(/\[(.*?)\]/g),h=null==v||null===(m=v[0])||void 0===m?void 0:m.slice(1,-1),x=r()(h.split(","));try{for(x.s();!(p=x.n()).done;){var g=p.value.split(":"),j=f()(g,2),y=j[0],b=j[1];y===N.g9.IsNotEmpty&&u.concat({required:!0,message:b||"请输入".concat(e.comment)}),y===N.g9.Matches&&u.concat({pattern:e.value,message:b||"请输入正确的".concat(e.comment,"格式")}),y===N.g9.Max&&u.concat({max:Number(e.value),message:b||"已超出最大值限制"}),y===N.g9.Min&&u.concat({min:Number(e.value),message:b||"已低于最小值限制"}),y===N.g9.IsAlpha&&u.concat({pattern:/^[A-Za-z]+$/.toString(),message:b||"请输入符合规则的值"}),y===N.g9.IsAlphanumeric&&u.concat({pattern:/^[A-Za-z0-9]+$/.toString(),message:b||"请输入合法的值"}),y===N.g9.IsDecimal&&u.concat({pattern:/^-?\d*(\.\d+)?$/.toString(),message:b||"请输入合法的值"}),y===N.g9.IsEmail&&u.concat({type:"email",message:b||"请输入正确的邮箱号"}),y===N.g9.IsIP&&u.concat({pattern:/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.toString(),message:b||"请输入正确的邮箱号"}),y===N.g9.IsLowercase&&u.concat({pattern:/^[a-z]+$/.toString(),message:b||"请输入小写字符"}),y===N.g9.IsUppercase&&u.concat({pattern:/^[A-Z]+$/.toString(),message:b||"请输入大写字符"}),y===N.g9.IsUrl&&u.concat({type:"url",message:b||"请输入正确的URL格式"}),y===N.g9.IsUUID&&u.concat({pattern:/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.toString(),message:b||"请输入正确的UUID格式"}),y===N.g9.IsMobilePhone&&u.concat({pattern:/^1[3-9]\d{9}$/.toString(),message:b||"请输入正确的手机号"}),y===N.g9.IsPhoneNumber&&u.concat({pattern:/^(\+86)?1[3-9]\d{9}$|^(\+86)?0\d{2,3}-\d{7,8}$/.toString(),message:b||"请输入正确的电话号码格式"}),y===N.g9.IsStrongPassword&&u.concat({pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.toString(),message:b||"至少8个字符，包含大写、小写字母、数字和特殊字符"})}}catch(e){x.e(e)}finally{x.f()}}return(null==u?void 0:u.length)>0&&Object.assign(o,{rules:u}),o})),a=[].concat(l()(d),l()(t)),p(a),L((function(e){return[].concat(l()(e),l()(t.map((function(e){return e.uuid}))))}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),(0,Y.jsx)(T.Z,{modalRef:B,selectedCallback:function(e,n,t){var a=(0,P.Qu)(e,n,null==t?void 0:t.tableName),r=a.map((function(e){return{label:e.title,uuid:e.uuid,name:e.name,widget:e.widget,datatype:e.type,order:e.order,options:e.options}}));p((function(e){return[].concat(l()(e),l()(r))})),L((function(e){return[].concat(l()(e),l()(a.map((function(e){return e.uuid}))))}))}}),(0,Y.jsx)(Q,{actionRef:V,saveCallback:function(){var e=m()(o()().mark((function e(r){var i,l;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=d.map((function(e){return e.uuid===r.uuid?r:e})),l=h()(h()({},t.config),{},s()({},null==n?void 0:n.name,i)),e.next=4,(0,E.vz)(t.id,{config:l});case 4:null==a||a(h()(h()({},t),{},{config:l}));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})]})}},78956:function(e,n,t){t.d(n,{Z:function(){return ne}});var a=t(15558),r=t.n(a),i=t(90228),l=t.n(i),u=t(82092),o=t.n(u),c=t(87999),s=t.n(c),d=t(48305),m=t.n(d),p=t(26068),f=t.n(p),v=t(37956),h=t(912),x=t(14471),g=t(22825),j=t(64684),y=t(91283),b=t(58643),Z=t(50959),I=t(30565),k=t(64155),C=t(73252),w=t(71625),S=t(7733),T=t(10218),N=t(73368),E=t(83745),P=t(80525),R=t(25853),O=t(92336),A=t(13603),F=t(20947),z=t(67825),D=t.n(z),L=t(47113),M=t(17906),B=t(11204),V=t(45144),U=t(89178),G=t(46611),H=t(73115),K=t(88884),q=t(11527),_=["key","name"],J=function(e){var n=e.saveCallback,t=e.actionRef,a=(0,Z.useState)(S.E_.STRING),r=m()(a,2),i=r[0],u=r[1],o=(0,Z.useState)(),c=m()(o,2),d=c[0],p=c[1],v=(0,Z.useState)(!1),h=m()(v,2),g=h[0],y=h[1],b=L.Z.useForm(),I=m()(b,1)[0];return Z.useImperativeHandle(t,(function(){return{open:function(e){var n=e.record;p(n),y(!0),I.setFieldsValue(n)},closeView:function(){y(!1)}}})),(0,q.jsx)(M.Z,{width:720,title:"编辑列表字段",placement:"right",destroyOnClose:!0,maskClosable:!0,open:g,extra:(0,q.jsxs)(x.Z,{children:[(0,q.jsx)(j.ZP,{onClick:function(){y(!1)},children:"取消"}),(0,q.jsx)(j.ZP,{type:"primary",onClick:s()(l()().mark((function e(){var t;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.validateFields();case 2:(t=e.sent)&&(n(f()(f()({},d),t)),y(!1),I.resetFields());case 4:case"end":return e.stop()}}),e)}))),children:"保存"})]}),onClose:function(){y(!1),I.resetFields()},children:(0,q.jsxs)(L.Z,{form:I,children:[(0,q.jsx)(L.Z.Item,{label:"title",name:"title",children:(0,q.jsx)(B.Z,{placeholder:"title"})}),(0,q.jsx)(L.Z.Item,{label:"dataIndex",name:"dataIndex",children:(0,q.jsx)(B.Z,{placeholder:"dataIndex"})}),(0,q.jsx)(L.Z.Item,{label:"tooltip",name:"tooltip",children:(0,q.jsx)(B.Z,{placeholder:"tooltip"})}),(0,q.jsx)(L.Z.Item,{label:"type",name:"type",children:(0,q.jsx)(V.default,{placeholder:"type",options:K.pl.map((function(e){return{label:e,value:e}})),onChange:function(e){return u(e)}})}),(0,q.jsx)(L.Z.Item,{label:"valueType",name:"valueType",children:(0,q.jsx)(V.default,{placeholder:"valueType",options:K.Jp.map((function(e){return{label:e,value:e}}))})}),(0,q.jsx)(L.Z.Item,{label:"editable",name:"editable",valuePropName:"checked",children:(0,q.jsx)(U.Z,{})}),(0,q.jsx)(L.Z.Item,{label:"ellipsis",name:"ellipsis",valuePropName:"checked",children:(0,q.jsx)(U.Z,{})}),(0,q.jsx)(L.Z.Item,{label:"copyable",name:"copyable",valuePropName:"checked",children:(0,q.jsx)(U.Z,{})}),(0,q.jsx)(L.Z.Item,{label:"valueEnum",children:(0,q.jsx)(L.Z.List,{name:"enums",children:function(e,n){var t=n.add,a=n.remove;return(0,q.jsxs)(q.Fragment,{children:[e.map((function(e){var n=e.key,t=e.name,r=D()(e,_);return(0,q.jsxs)(x.Z,{style:{display:"flex",marginBottom:1},align:"baseline",children:[(0,q.jsx)(L.Z.Item,f()(f()({},r),{},{name:[t,"label"],children:(0,q.jsx)(B.Z,{placeholder:"请输入标题"})})),(0,q.jsx)(L.Z.Item,f()(f()({},r),{},{name:[t,"key"],children:(0,q.jsx)(B.Z,{placeholder:"请输入Key"})})),(0,q.jsx)(L.Z.Item,f()(f()({},r),{},{name:[t,"value"],rules:[{required:!0,message:"请输入Value"}],children:(0,q.jsx)(B.Z,{type:[S.E_.NUMBER].includes(i)?"number":"text",placeholder:"请输入Value"})})),(0,q.jsx)(G.Z,{onClick:function(){return a(t)}})]},n)})),(0,q.jsx)(L.Z.Item,{children:(0,q.jsx)(j.ZP,{type:"dashed",onClick:function(){return t()},block:!0,icon:(0,q.jsx)(H.Z,{}),children:"添 加"})})]})}})})]})})},Y=t(23683),$=t(16166),W=[{title:"title",dataIndex:"title"},{title:"dataIndex",dataIndex:"dataIndex"},{title:"valueType",dataIndex:"valueType",valueType:"select",valueEnum:S.co},{title:"editable",dataIndex:"editable",valueType:"switch"},{title:"order",tooltip:"查询表单中的权重，权重大排序靠前",dataIndex:"order"}],Q=(0,I.W6)((function(){return(0,q.jsx)(E.Z,{style:{cursor:"grab",color:"#999"}})})),X=(0,I.W8)((function(e){return(0,q.jsx)("tr",f()({},e))})),ee=(0,I.JN)((function(e){return(0,q.jsx)("tbody",f()({},e))})),ne=function(e){var n,t=e.component,a=e.property,i=e.saveCallback,u=(0,Z.useState)([]),c=m()(u,2),d=c[0],p=c[1],I=(0,Z.useState)([]),E=m()(I,2),z=E[0],D=E[1],L=(0,Z.useState)(!1),M=m()(L,2),B=M[0],V=M[1],U=v.Z.useApp().message,G=Z.useRef(),H=Z.useRef(),K=Z.useRef(),_=Z.useMemo((function(){return(null==z?void 0:z.length)>0?W:[{title:"Sort",dataIndex:"sort",width:60,className:"drag-visible",render:function(){return(0,q.jsx)(Q,{})}}].concat(W)}),[z]);return Z.useEffect((function(){t.config&&a&&p(t.config[a.name]||[])}),[t,a]),(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(h.Z,{size:"small",style:{marginBottom:12},title:(null==a?void 0:a.name)||"columns",styles:{header:{paddingRight:12},body:{padding:12}},extra:(0,q.jsxs)(x.Z,{children:[(0,q.jsx)(g.Z,{trigger:["click"],menu:{items:[{label:"导入接口对象",key:"API",icon:(0,q.jsx)(P.Z,{}),onClick:function(){var e;null===(e=H.current)||void 0===e||e.open()}},{label:"导入数据库字段",key:"DATABASE",icon:(0,q.jsx)(R.Z,{}),onClick:function(){var e;null===(e=G.current)||void 0===e||e.open()}}]},children:(0,q.jsx)(j.ZP,{ghost:!0,type:"primary",children:(0,q.jsxs)(x.Z,{children:["数据源导入",(0,q.jsx)(O.Z,{})]})})}),(0,q.jsx)(j.ZP,{type:"primary",icon:(0,q.jsx)(A.Z,{}),onClick:s()(l()().mark((function e(){var n,r;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f()(f()({},t.config),{},o()({},null==a?void 0:a.name,d)),e.next=3,(0,T.vz)(t.id,{config:n});case 3:null!=(r=e.sent)&&r.success&&(U.success("保存成功"),null==i||i(f()(f()({},t),{},{config:n})),D([]));case 5:case"end":return e.stop()}}),e)}))),children:"保存"})]}),children:[(0,q.jsx)(F.Z,{size:"small",columns:[].concat(r()(_),[{title:"操作",valueType:"option",width:140,render:function(e,n,r,u){return(0,q.jsxs)(x.Z,{children:[(0,q.jsx)("a",{onClick:function(){var e;null===(e=K.current)||void 0===e||e.open({record:n})},children:"高级"}),(0,q.jsx)("a",{onClick:function(){var e;null==u||null===(e=u.startEditable)||void 0===e||e.call(u,n.uuid)},children:"编辑"},"editable"),(0,q.jsx)(y.Z,{title:"确认删除该记录？",onConfirm:s()(l()().mark((function e(){var r,u;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V(!0),r=d.filter((function(e){return e.uuid!==n.uuid})),u=f()(f()({},t.config),{},o()({},null==a?void 0:a.name,r)),e.next=5,(0,T.vz)(t.id,{config:u});case 5:V(!1),p(r),null==i||i(f()(f()({},t),{},{config:u}));case 8:case"end":return e.stop()}}),e)}))),children:(0,q.jsx)(j.ZP,{type:"link",size:"small",loading:B,style:{padding:0},children:"删除"},"delete")})]})}}]),rowKey:function(e){return e.uuid},value:d,onChange:p,recordCreatorProps:{newRecordType:"dataSource",record:function(){return{uuid:(0,k.Z)(),title:"",dataIndex:"",sort:null==d?void 0:d.length,editable:!1}}},editable:{type:"multiple",editableKeys:z,actionRender:function(e,n,t){return[t.save,t.cancel,t.delete]},onValuesChange:function(e,n){p(n)},onSave:(n=s()(l()().mark((function e(n,r){var u,c;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=d.map((function(e){return e.uuid===r.uuid?r:e})),c=f()(f()({},t.config),{},o()({},null==a?void 0:a.name,u)),e.next=4,(0,T.vz)(t.id,{config:c});case 4:null==i||i(f()(f()({},t),{},{config:c}));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)}),onChange:D},components:(null==z?void 0:z.length)>0?void 0:{body:{wrapper:function(e){return(0,q.jsx)(ee,f()({useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:function(){var e=s()(l()().mark((function e(n){var r,u,c,s,m;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.oldIndex,u=n.newIndex,r===u){e.next=8;break}return c=(0,Y.q)(d,r,u),s=c.map((function(e,n){return f()(f()({},e),{},{sort:n,order:(null==c?void 0:c.length)-n})})),m=f()(f()({},t.config),{},o()({},null==a?void 0:a.name,s)),e.next=7,(0,T.vz)(t.id,{config:m});case 7:null==i||i(f()(f()({},t),{},{config:m}));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},e))},row:function(e){var n=d.findIndex((function(n){return n.uuid===e["data-row-key"]}));return(0,q.jsx)(X,f()({index:n},e))}}}}),(0,q.jsx)(J,{actionRef:K,saveCallback:function(){var e=s()(l()().mark((function e(n){var r,u;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.map((function(e){return e.uuid===n.uuid?n:e})),u=f()(f()({},t.config),{},o()({},null==a?void 0:a.name,r)),p(r),e.next=5,(0,T.vz)(t.id,{config:u});case 5:null==i||i(f()(f()({},t),{},{config:u}));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),(0,q.jsx)(C.Z,{actionRef:H,selectedCallback:function(){var e=s()(l()().mark((function e(n){var t,a;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.filter((function(e){return!!e.type})).map((function(e){var n,t,a,r=(0,b.Ho)(e.type),i=f()(f()({},e),{},{type:r,editable:!1});if((e.type.indexOf("date")>-1||(null===(n=e.format)||void 0===n?void 0:n.indexOf("date"))>-1)&&(r="DateTime",Object.assign(i,{type:"DateTime",valueType:S.Ge.DATETIME,format:"YYYY-MM-DD HH:mm:ss",showTime:!0})),(null===(t=e.description)||void 0===t?void 0:t.indexOf("Decimal"))>-1&&(r="Decimal",Object.assign(i,{type:"Decimal",valueType:S.Ge.MONEY})),e.enum&&e.description){var l,u=e.description.match(/\{([^}]+)\}/g),o=(null==u||null===(l=u[0])||void 0===l?void 0:l.slice(1,-1)).split(",").map((function(e){var n=e.split(":"),t=m()(n,2),a=t[0],i=t[1];return{value:"Number"===r?Number(a):a,label:i,key:a.toString()}}));Object.assign(i,{valueType:"select",enums:o})}return"Boolean"===r&&Object.assign(i,{valueType:S.Ge.SWITCH}),(null===(a=e.description)||void 0===a?void 0:a.indexOf("Json"))>-1&&Object.assign(i,{type:"Json",valueType:S.Ge.JSONCODE}),i})),a=[].concat(r()(d),r()(t)),p(a);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})]}),(0,q.jsx)(w.Z,{modalRef:G,selectedCallback:function(e,n,t){var a=(0,N.Qu)(e,n,null==t?void 0:t.tableName),i=a.map((function(e){return(0,$.e7)(e,["name","widget","type","table"])}));p((function(e){return[].concat(r()(e),r()(i))})),D((function(e){return[].concat(r()(e),r()(a.map((function(e){return e.uuid}))))}))}})]})}},46393:function(e,n,t){t.d(n,{Z:function(){return ie}});var a=t(335),r=t.n(a),i=t(15558),l=t.n(i),u=t(90228),o=t.n(u),c=t(82092),s=t.n(c),d=t(87999),m=t.n(d),p=t(48305),f=t.n(p),v=t(26068),h=t.n(v),x=t(37956),g=t(912),j=t(14471),y=t(22825),b=t(64684),Z=t(91283),I=t(58643),k=t(50959),C=t(30565),w=t(64155),S=t(73252),T=t(71625),N=t(7733),E=t(10218),P=t(73368),R=t(83745),O=t(80525),A=t(25853),F=t(92336),z=t(13603),D=t(20947),L=t(67825),M=t.n(L),B=t(47113),V=t(17906),U=t(11204),G=t(17621),H=t(45144),K=t(89178),q=t(46611),_=t(73115),J=t(88884),Y=t(11527),$=["key","name"],W=["key","name"],Q=function(e){var n=e.saveCallback,t=e.actionRef,a=(0,k.useState)(N.E_.STRING),r=f()(a,2),i=r[0],l=r[1],u=(0,k.useState)("string"),c=f()(u,2),s=c[0],d=c[1],p=(0,k.useState)(),v=f()(p,2),x=v[0],g=v[1],y=(0,k.useState)(!1),Z=f()(y,2),I=Z[0],C=Z[1],w=B.Z.useForm(),S=f()(w,1)[0];return k.useImperativeHandle(t,(function(){return{open:function(e){var n=e.record;g(n),C(!0),S.setFieldsValue(n)},closeView:function(){C(!1)}}})),(0,Y.jsx)(V.Z,{width:720,title:"编辑列表字段",placement:"right",destroyOnClose:!0,maskClosable:!0,open:I,extra:(0,Y.jsxs)(j.Z,{children:[(0,Y.jsx)(b.ZP,{onClick:function(){C(!1)},children:"取消"}),(0,Y.jsx)(b.ZP,{type:"primary",onClick:m()(o()().mark((function e(){var t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.validateFields();case 2:(t=e.sent)&&(n(h()(h()({},x),t)),C(!1),S.resetFields());case 4:case"end":return e.stop()}}),e)}))),children:"保存"})]}),onClose:function(){C(!1),S.resetFields()},children:(0,Y.jsxs)(B.Z,{form:S,children:[(0,Y.jsx)(B.Z.Item,{label:"title",name:"title",children:(0,Y.jsx)(U.Z,{placeholder:"title"})}),(0,Y.jsx)(B.Z.Item,{label:"dataIndex",name:"dataIndex",children:(0,Y.jsx)(U.Z,{placeholder:"dataIndex"})}),(0,Y.jsx)(B.Z.Item,{label:"tooltip",name:"tooltip",children:(0,Y.jsx)(U.Z,{placeholder:"tooltip"})}),(0,Y.jsx)(B.Z.Item,{label:"initialValue",name:"initialValue",children:(0,Y.jsx)(U.Z,{placeholder:"initialValue"})}),(0,Y.jsx)(B.Z.Item,{label:"colSize",name:"colSize",children:(0,Y.jsx)(G.Z,{placeholder:"colSize"})}),(0,Y.jsx)(B.Z.Item,{label:"type",name:"type",children:(0,Y.jsx)(H.default,{placeholder:"type",options:J.pl.map((function(e){return{label:e,value:e}})),onChange:function(e){return l(e)}})}),(0,Y.jsx)(B.Z.Item,{label:"valueType",name:"valueType",children:(0,Y.jsx)(H.default,{placeholder:"valueType",options:J.Jp.map((function(e){return{label:e,value:e}}))})}),(0,Y.jsx)(B.Z.Item,{label:"editable",name:"editable",valuePropName:"checked",children:(0,Y.jsx)(K.Z,{})}),(0,Y.jsx)(B.Z.Item,{label:"ellipsis",name:"ellipsis",valuePropName:"checked",children:(0,Y.jsx)(K.Z,{})}),(0,Y.jsx)(B.Z.Item,{label:"copyable",name:"copyable",valuePropName:"checked",children:(0,Y.jsx)(K.Z,{})}),(0,Y.jsx)(B.Z.Item,{label:"search",name:"search",valuePropName:"checked",children:(0,Y.jsx)(K.Z,{})}),(0,Y.jsx)(B.Z.Item,{label:"filters",name:"filters",valuePropName:"checked",children:(0,Y.jsx)(K.Z,{})}),(0,Y.jsx)(B.Z.Item,{label:"multiple",name:"multiple",valuePropName:"checked",children:(0,Y.jsx)(K.Z,{})}),(0,Y.jsx)(B.Z.Item,{label:"hideInTable",name:"hideInTable",valuePropName:"checked",children:(0,Y.jsx)(K.Z,{})}),(0,Y.jsx)(B.Z.Item,{label:"hideInForm",name:"hideInForm",valuePropName:"checked",children:(0,Y.jsx)(K.Z,{})}),(0,Y.jsx)(B.Z.Item,{label:"hideInSearch",name:"hideInSearch",valuePropName:"checked",children:(0,Y.jsx)(K.Z,{})}),(0,Y.jsx)(B.Z.Item,{label:"hideInDescriptions",name:"hideInDescriptions",valuePropName:"checked",children:(0,Y.jsx)(K.Z,{})}),(0,Y.jsx)(B.Z.Item,{label:"valueEnum",children:(0,Y.jsx)(B.Z.List,{name:"enums",children:function(e,n){var t=n.add,a=n.remove;return(0,Y.jsxs)(Y.Fragment,{children:[e.map((function(e){var n=e.key,t=e.name,r=M()(e,$);return(0,Y.jsxs)(j.Z,{style:{display:"flex",marginBottom:1},align:"baseline",children:[(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"label"],children:(0,Y.jsx)(U.Z,{placeholder:"请输入标题"})})),(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"key"],children:(0,Y.jsx)(U.Z,{placeholder:"请输入Key"})})),(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"value"],rules:[{required:!0,message:"请输入Value"}],children:(0,Y.jsx)(U.Z,{type:[N.E_.NUMBER].includes(i)?"number":"text",placeholder:"请输入Value"})})),(0,Y.jsx)(q.Z,{onClick:function(){return a(t)}})]},n)})),(0,Y.jsx)(B.Z.Item,{children:(0,Y.jsx)(b.ZP,{type:"dashed",onClick:function(){return t()},block:!0,icon:(0,Y.jsx)(_.Z,{}),children:"添 加"})})]})}})}),(0,Y.jsx)(B.Z.Item,{label:"rules",children:(0,Y.jsx)(B.Z.List,{name:"rules",children:function(e,n){var t=n.add,a=n.remove;return(0,Y.jsxs)(Y.Fragment,{children:[e.map((function(e){var n=e.key,t=e.name,r=M()(e,W);return(0,Y.jsxs)(j.Z,{style:{display:"flex",marginBottom:1},align:"baseline",children:[(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"type"],rules:[{required:!0,message:"请选择校验类型"}],children:(0,Y.jsx)(H.default,{placeholder:"type",onChange:function(e){return d(e)},options:[{label:"string",value:"string"},{label:"number",value:"number"},{label:"boolean",value:"boolean"},{label:"method",value:"method"},{label:"regexp",value:"regexp"},{label:"integer",value:"integer"},{label:"float",value:"float"},{label:"date",value:"date"},{label:"url",value:"url"},{label:"hex",value:"hex"},{label:"email",value:"email"}]})})),"regexp"===s&&(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"pattern"],children:(0,Y.jsx)(U.Z,{placeholder:"pattern"})})),["string","number"].includes(s)&&(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"min"],children:(0,Y.jsx)(G.Z,{placeholder:"min"})})),["string","number"].includes(s)&&(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"max"],children:(0,Y.jsx)(G.Z,{placeholder:"max"})})),["string","number"].includes(s)&&(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"len"],children:(0,Y.jsx)(G.Z,{placeholder:"len"})})),(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"message"],children:(0,Y.jsx)(U.Z,{placeholder:"message"})})),(0,Y.jsx)(q.Z,{onClick:function(){return a(t)}})]},n)})),(0,Y.jsx)(B.Z.Item,{children:(0,Y.jsx)(b.ZP,{type:"dashed",onClick:function(){return t()},block:!0,icon:(0,Y.jsx)(_.Z,{}),children:"添 加"})})]})}})})]})})},X=t(23683),ee=t(16166),ne=[{title:"title",dataIndex:"title"},{title:"dataIndex",dataIndex:"dataIndex"},{title:"valueType",dataIndex:"valueType",valueType:"select",valueEnum:N.co},{title:"hideInForm",dataIndex:"hideInForm",valueType:"switch"},{title:"ellipsis",dataIndex:"ellipsis",valueType:"switch"},{title:"copyable",dataIndex:"copyable",valueType:"switch"},{title:"order",tooltip:"查询表单中的权重，权重大排序靠前",dataIndex:"order"}],te=(0,C.W6)((function(){return(0,Y.jsx)(R.Z,{style:{cursor:"grab",color:"#999"}})})),ae=(0,C.W8)((function(e){return(0,Y.jsx)("tr",h()({},e))})),re=(0,C.JN)((function(e){return(0,Y.jsx)("tbody",h()({},e))})),ie=function(e){var n,t=e.component,a=e.property,i=e.saveCallback,u=x.Z.useApp().message,c=(0,k.useState)([]),d=f()(c,2),p=d[0],v=d[1],C=(0,k.useState)([]),R=f()(C,2),L=R[0],M=R[1],B=(0,k.useState)(!1),V=f()(B,2),U=V[0],G=V[1],H=k.useRef(),K=k.useRef(),q=k.useRef(),_=k.useMemo((function(){return(null==L?void 0:L.length)>0?ne:[{title:"Sort",dataIndex:"sort",width:60,className:"drag-visible",render:function(){return(0,Y.jsx)(te,{})}}].concat(ne)}),[L]);return k.useEffect((function(){t.config&&a&&v(t.config[a.name]||[])}),[t,a]),(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(g.Z,{size:"small",style:{marginBottom:12},title:(null==a?void 0:a.name)||"columns",styles:{header:{paddingRight:12},body:{padding:12}},extra:(0,Y.jsxs)(j.Z,{children:[(0,Y.jsx)(y.Z,{trigger:["click"],menu:{items:[{label:"导入接口对象",key:"API",icon:(0,Y.jsx)(O.Z,{}),onClick:function(){var e;null===(e=H.current)||void 0===e||e.open()}},{label:"导入数据库字段",key:"DATABASE",icon:(0,Y.jsx)(A.Z,{}),onClick:function(){var e;null===(e=K.current)||void 0===e||e.open()}}]},children:(0,Y.jsx)(b.ZP,{ghost:!0,type:"primary",children:(0,Y.jsxs)(j.Z,{children:["数据源导入",(0,Y.jsx)(F.Z,{})]})})}),(0,Y.jsx)(b.ZP,{type:"primary",icon:(0,Y.jsx)(z.Z,{}),onClick:m()(o()().mark((function e(){var n,r;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h()(h()({},t.config),{},s()({},null==a?void 0:a.name,p)),e.next=3,(0,E.vz)(t.id,{config:n});case 3:null!=(r=e.sent)&&r.success&&(u.success("保存成功"),null==i||i(h()(h()({},t),{},{config:n})),M([]));case 5:case"end":return e.stop()}}),e)}))),children:"保存"})]}),children:(0,Y.jsx)(D.Z,{size:"small",columns:[].concat(l()(_),[{title:"操作",valueType:"option",width:140,render:function(e,n,r,l){return(0,Y.jsxs)(j.Z,{children:[(0,Y.jsx)("a",{onClick:function(){var e;null===(e=q.current)||void 0===e||e.open({record:n})},children:"高级"}),(0,Y.jsx)("a",{onClick:function(){var e;null==l||null===(e=l.startEditable)||void 0===e||e.call(l,n.uuid)},children:"编辑"},"editable"),(0,Y.jsx)(Z.Z,{title:"确认删除该记录？",onConfirm:m()(o()().mark((function e(){var r,l;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!0),r=p.filter((function(e){return e.uuid!==n.uuid})),l=h()(h()({},t.config),{},s()({},null==a?void 0:a.name,r)),e.next=5,(0,E.vz)(t.id,{config:l});case 5:G(!1),v(r),null==i||i(h()(h()({},t),{},{config:l}));case 8:case"end":return e.stop()}}),e)}))),children:(0,Y.jsx)(b.ZP,{type:"link",size:"small",loading:U,style:{padding:0},children:"删除"},"delete")})]})}}]),rowKey:function(e){return e.uuid},value:p,onChange:v,recordCreatorProps:{newRecordType:"dataSource",record:function(){return{uuid:(0,w.Z)(),title:"",dataIndex:"",sort:null==p?void 0:p.length,editable:!0}}},editable:{type:"multiple",editableKeys:L,actionRender:function(e,n,t){return[t.save,t.cancel,t.delete]},onValuesChange:function(e,n){v(n)},onSave:(n=m()(o()().mark((function e(n,r){var l,u;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=p.map((function(e){return e.uuid===r.uuid?r:e})),u=h()(h()({},t.config),{},s()({},null==a?void 0:a.name,l)),e.next=4,(0,E.vz)(t.id,{config:u});case 4:null==i||i(h()(h()({},t),{},{config:u}));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)}),onChange:M},components:(null==L?void 0:L.length)>0?void 0:{body:{wrapper:function(e){return(0,Y.jsx)(re,h()({useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:function(){var e=m()(o()().mark((function e(n){var r,l,u,c,d;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.oldIndex,l=n.newIndex,r===l){e.next=8;break}return u=(0,X.q)(p,r,l),c=u.map((function(e,n){return h()(h()({},e),{},{sort:n,order:(null==u?void 0:u.length)-n})})),d=h()(h()({},t.config),{},s()({},null==a?void 0:a.name,c)),e.next=7,(0,E.vz)(t.id,{config:d});case 7:null==i||i(h()(h()({},t),{},{config:d}));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},e))},row:function(e){var n=p.findIndex((function(n){return n.uuid===e["data-row-key"]}));return(0,Y.jsx)(ae,h()({index:n},e))}}}})}),(0,Y.jsx)(Q,{actionRef:q,saveCallback:function(){var e=m()(o()().mark((function e(n){var r,l;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.map((function(e){return e.uuid===n.uuid?n:e})),l=h()(h()({},t.config),{},s()({},null==a?void 0:a.name,r)),v(r),e.next=5,(0,E.vz)(t.id,{config:l});case 5:null==i||i(h()(h()({},t),{},{config:l}));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),(0,Y.jsx)(S.Z,{actionRef:H,selectedCallback:function(){var e=m()(o()().mark((function e(n){var t,a;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.filter((function(e){return!!e.type})).map((function(e){var n,t,a,i,l=(0,I.Ho)(e.type),u=[],o=h()(h()({},e),{},{type:l,uuid:(0,w.Z)()});if(void 0!==e.default&&null!==e.default&&Object.assign(o,{initialValue:e.default}),(e.type.indexOf("date")>-1||(null===(n=e.format)||void 0===n?void 0:n.indexOf("date"))>-1)&&(l="DateTime",Object.assign(o,{type:"DateTime",valueType:N.Ge.DATETIME,format:"YYYY-MM-DD HH:mm:ss",showTime:!0})),(null===(t=e.description)||void 0===t?void 0:t.indexOf("Decimal"))>-1&&(l="Decimal",Object.assign(o,{type:"Decimal",valueType:N.Ge.MONEY})),e.enum&&e.description){var c,s=e.description.match(/\{([^}]+)\}/g),d=(null==s||null===(c=s[0])||void 0===c?void 0:c.slice(1,-1)).split(",").map((function(e){var n=e.split(":"),t=f()(n,2),a=t[0],r=t[1];return{value:"Number"===l?Number(a):a,label:r,key:a.toString()}}));Object.assign(o,{enums:d})}if("Boolean"===l&&Object.assign(o,{valueType:N.Ge.SWITCH}),(null===(a=e.description)||void 0===a?void 0:a.indexOf("Json"))>-1&&Object.assign(o,{type:"Json",valueType:N.Ge.JSONCODE}),(null===(i=e.description)||void 0===i?void 0:i.indexOf("RULES"))>-1){var m,p,v=e.description.match(/\[(.*?)\]/g),x=null==v||null===(m=v[0])||void 0===m?void 0:m.slice(1,-1),g=r()(x.split(","));try{for(g.s();!(p=g.n()).done;){var j=p.value.split(":"),y=f()(j,2),b=y[0],Z=y[1];b===N.g9.IsNotEmpty&&u.concat({required:!0,message:Z||"请输入".concat(e.comment)}),b===N.g9.Matches&&u.concat({pattern:e.value,message:Z||"请输入正确的".concat(e.comment,"格式")}),b===N.g9.Max&&u.concat({max:Number(e.value),message:Z||"已超出最大值限制"}),b===N.g9.Min&&u.concat({min:Number(e.value),message:Z||"已低于最小值限制"}),b===N.g9.IsAlpha&&u.concat({pattern:/^[A-Za-z]+$/.toString(),message:Z||"请输入符合规则的值"}),b===N.g9.IsAlphanumeric&&u.concat({pattern:/^[A-Za-z0-9]+$/.toString(),message:Z||"请输入合法的值"}),b===N.g9.IsDecimal&&u.concat({pattern:/^-?\d*(\.\d+)?$/.toString(),message:Z||"请输入合法的值"}),b===N.g9.IsEmail&&u.concat({type:"email",message:Z||"请输入正确的邮箱号"}),b===N.g9.IsIP&&u.concat({pattern:/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.toString(),message:Z||"请输入正确的邮箱号"}),b===N.g9.IsLowercase&&u.concat({pattern:/^[a-z]+$/.toString(),message:Z||"请输入小写字符"}),b===N.g9.IsUppercase&&u.concat({pattern:/^[A-Z]+$/.toString(),message:Z||"请输入大写字符"}),b===N.g9.IsUrl&&u.concat({type:"url",message:Z||"请输入正确的URL格式"}),b===N.g9.IsUUID&&u.concat({pattern:/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.toString(),message:Z||"请输入正确的UUID格式"}),b===N.g9.IsMobilePhone&&u.concat({pattern:/^1[3-9]\d{9}$/.toString(),message:Z||"请输入正确的手机号"}),b===N.g9.IsPhoneNumber&&u.concat({pattern:/^(\+86)?1[3-9]\d{9}$|^(\+86)?0\d{2,3}-\d{7,8}$/.toString(),message:Z||"请输入正确的电话号码格式"}),b===N.g9.IsStrongPassword&&u.concat({pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.toString(),message:Z||"至少8个字符，包含大写、小写字母、数字和特殊字符"})}}catch(e){g.e(e)}finally{g.f()}}return(null==u?void 0:u.length)>0&&Object.assign(o,{rules:u}),o})),a=[].concat(l()(p),l()(t)),v(a),M(t.map((function(e){return e.uuid})));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),(0,Y.jsx)(T.Z,{modalRef:K,selectedCallback:function(e,n,t){var a=(0,P.Qu)(e,n,null==t?void 0:t.tableName),r=a.map((function(e){return(0,ee.e7)(e,["name","widget","type","table"])}));v((function(e){return[].concat(l()(e),l()(r))})),M((function(e){return[].concat(l()(e),l()(a.map((function(e){return e.uuid}))))}))}})]})}},51131:function(e,n,t){t.d(n,{Z:function(){return ie}});var a=t(335),r=t.n(a),i=t(15558),l=t.n(i),u=t(90228),o=t.n(u),c=t(82092),s=t.n(c),d=t(87999),m=t.n(d),p=t(48305),f=t.n(p),v=t(26068),h=t.n(v),x=t(37956),g=t(912),j=t(14471),y=t(22825),b=t(64684),Z=t(91283),I=t(58643),k=t(50959),C=t(30565),w=t(64155),S=t(73252),T=t(71625),N=t(7733),E=t(10218),P=t(73368),R=t(83745),O=t(80525),A=t(25853),F=t(92336),z=t(13603),D=t(20947),L=t(67825),M=t.n(L),B=t(47113),V=t(17906),U=t(11204),G=t(17621),H=t(45144),K=t(89178),q=t(46611),_=t(73115),J=t(88884),Y=t(11527),$=["key","name"],W=["key","name"],Q=function(e){var n=e.saveCallback,t=e.actionRef,a=(0,k.useState)(N.E_.STRING),r=f()(a,2),i=r[0],l=r[1],u=(0,k.useState)("string"),c=f()(u,2),s=c[0],d=c[1],p=(0,k.useState)(),v=f()(p,2),x=v[0],y=v[1],Z=(0,k.useState)(!1),I=f()(Z,2),C=I[0],w=I[1],S=B.Z.useForm(),T=f()(S,1)[0];return k.useImperativeHandle(t,(function(){return{open:function(e){var n=e.record;y(n),w(!0),T.setFieldsValue(n)},closeView:function(){w(!1)}}})),(0,Y.jsx)(V.Z,{width:720,title:"编辑列表字段",placement:"right",destroyOnClose:!0,maskClosable:!0,open:C,extra:(0,Y.jsxs)(j.Z,{children:[(0,Y.jsx)(b.ZP,{onClick:function(){w(!1)},children:"取消"}),(0,Y.jsx)(b.ZP,{type:"primary",onClick:m()(o()().mark((function e(){var t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.validateFields();case 2:(t=e.sent)&&(n(h()(h()({},x),t)),w(!1),T.resetFields());case 4:case"end":return e.stop()}}),e)}))),children:"保存"})]}),onClose:function(){w(!1),T.resetFields()},children:(0,Y.jsxs)(B.Z,{form:T,children:[(0,Y.jsx)(B.Z.Item,{label:"title",name:"title",children:(0,Y.jsx)(U.Z,{placeholder:"title"})}),(0,Y.jsx)(B.Z.Item,{label:"name",name:"name",children:(0,Y.jsx)(U.Z,{placeholder:"name"})}),(0,Y.jsx)(B.Z.Item,{label:"tooltip",name:"tooltip",children:(0,Y.jsx)(U.Z,{placeholder:"tooltip"})}),(0,Y.jsx)(B.Z.Item,{label:"initialValue",name:"initialValue",children:(0,Y.jsx)(U.Z,{placeholder:"initialValue"})}),(0,Y.jsx)(B.Z.Item,{label:"colSize",name:"colSize",children:(0,Y.jsx)(G.Z,{placeholder:"colSize"})}),(0,Y.jsx)(B.Z.Item,{label:"datatype",name:"type",children:(0,Y.jsx)(H.default,{placeholder:"datatype",options:J.pl.map((function(e){return{label:e,value:e}})),onChange:function(e){return l(e)}})}),(0,Y.jsx)(B.Z.Item,{label:"widget",name:"widget",children:(0,Y.jsx)(H.default,{placeholder:"widget",options:J.b8.map((function(e){return{label:e,value:e}}))})}),(0,Y.jsx)(B.Z.Item,{label:"valueType",name:"valueType",children:(0,Y.jsx)(H.default,{placeholder:"valueType",options:J.Jp.map((function(e){return{label:e,value:e}}))})}),(0,Y.jsx)(B.Z.Item,{label:"operator",name:"operator",children:(0,Y.jsx)(H.default,{placeholder:"operator",options:J.xW.map((function(e){return{label:e,value:e}}))})}),(0,Y.jsx)(B.Z.Item,{label:"editable",name:"editable",valuePropName:"checked",children:(0,Y.jsx)(K.Z,{})}),(0,Y.jsx)(B.Z.Item,{label:"ellipsis",name:"ellipsis",valuePropName:"checked",children:(0,Y.jsx)(K.Z,{})}),(0,Y.jsx)(B.Z.Item,{label:"copyable",name:"copyable",valuePropName:"checked",children:(0,Y.jsx)(K.Z,{})}),(0,Y.jsx)(B.Z.Item,{label:"search",name:"search",valuePropName:"checked",children:(0,Y.jsx)(K.Z,{})}),(0,Y.jsx)(B.Z.Item,{label:"filters",name:"filters",valuePropName:"checked",children:(0,Y.jsx)(K.Z,{})}),(0,Y.jsx)(B.Z.Item,{label:"multiple",name:"multiple",valuePropName:"checked",children:(0,Y.jsx)(K.Z,{})}),(0,Y.jsx)(B.Z.Item,{label:"hideInTable",name:"hideInTable",valuePropName:"checked",children:(0,Y.jsx)(K.Z,{})}),(0,Y.jsx)(B.Z.Item,{label:"hideInForm",name:"hideInForm",valuePropName:"checked",children:(0,Y.jsx)(K.Z,{})}),(0,Y.jsx)(B.Z.Item,{label:"hideInSearch",name:"hideInSearch",valuePropName:"checked",children:(0,Y.jsx)(K.Z,{})}),(0,Y.jsx)(B.Z.Item,{label:"hideInDescriptions",name:"hideInDescriptions",valuePropName:"checked",children:(0,Y.jsx)(K.Z,{})}),(0,Y.jsx)(B.Z.Item,{label:"enums",children:(0,Y.jsx)(B.Z.List,{name:"enums",children:function(e,n){var t=n.add,a=n.remove;return(0,Y.jsxs)(Y.Fragment,{children:[e.map((function(e){var n=e.key,t=e.name,r=M()(e,$);return(0,Y.jsxs)(j.Z,{style:{display:"flex",marginBottom:1},align:"baseline",children:[(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"label"],children:(0,Y.jsx)(U.Z,{placeholder:"请输入标题"})})),(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"key"],children:(0,Y.jsx)(U.Z,{placeholder:"请输入Key"})})),(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"value"],rules:[{required:!0,message:"请输入Value"}],children:(0,Y.jsx)(U.Z,{type:[N.E_.NUMBER].includes(i)?"number":"text",placeholder:"请输入Value"})})),(0,Y.jsx)(q.Z,{onClick:function(){return a(t)}})]},n)})),(0,Y.jsx)(B.Z.Item,{children:(0,Y.jsx)(b.ZP,{type:"dashed",onClick:function(){return t()},block:!0,icon:(0,Y.jsx)(_.Z,{}),children:"添 加"})})]})}})}),(0,Y.jsx)(B.Z.Item,{label:"rules",children:(0,Y.jsx)(B.Z.List,{name:"rules",children:function(e,n){var t=n.add,a=n.remove;return(0,Y.jsxs)(Y.Fragment,{children:[e.map((function(e){var n=e.key,t=e.name,r=M()(e,W);return(0,Y.jsxs)(j.Z,{style:{display:"flex",marginBottom:1},align:"baseline",children:[(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"type"],rules:[{required:!0,message:"请选择校验类型"}],children:(0,Y.jsx)(H.default,{placeholder:"type",onChange:function(e){return d(e)},options:[{label:"string",value:"string"},{label:"number",value:"number"},{label:"boolean",value:"boolean"},{label:"method",value:"method"},{label:"regexp",value:"regexp"},{label:"integer",value:"integer"},{label:"float",value:"float"},{label:"date",value:"date"},{label:"url",value:"url"},{label:"hex",value:"hex"},{label:"email",value:"email"}]})})),"regexp"===s&&(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"pattern"],children:(0,Y.jsx)(U.Z,{placeholder:"pattern"})})),["string","number"].includes(s)&&(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"min"],children:(0,Y.jsx)(G.Z,{placeholder:"min"})})),["string","number"].includes(s)&&(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"max"],children:(0,Y.jsx)(G.Z,{placeholder:"max"})})),["string","number"].includes(s)&&(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"len"],children:(0,Y.jsx)(G.Z,{placeholder:"len"})})),(0,Y.jsx)(B.Z.Item,h()(h()({},r),{},{name:[t,"message"],children:(0,Y.jsx)(U.Z,{placeholder:"message"})})),(0,Y.jsx)(q.Z,{onClick:function(){return a(t)}})]},n)})),(0,Y.jsx)(B.Z.Item,{children:(0,Y.jsx)(b.ZP,{type:"dashed",onClick:function(){return t()},block:!0,icon:(0,Y.jsx)(_.Z,{}),children:"添 加"})})]})}})}),(0,Y.jsxs)(g.Z,{title:"reference",size:"small",children:[(0,Y.jsx)(B.Z.Item,{label:"path",name:["reference","path"],children:(0,Y.jsx)(U.Z,{placeholder:"path"})}),(0,Y.jsx)(B.Z.Item,{label:"label",name:["reference","label"],children:(0,Y.jsx)(U.Z,{placeholder:"label"})}),(0,Y.jsx)(B.Z.Item,{label:"key",name:["reference","key"],children:(0,Y.jsx)(U.Z,{placeholder:"key"})}),(0,Y.jsx)(B.Z.Item,{label:"params",name:["reference","params"],children:(0,Y.jsx)(U.Z.TextArea,{rows:2,placeholder:"params"})})]})]})})},X=t(16166),ee=t(23683),ne=[{title:"title",dataIndex:"title"},{title:"name",dataIndex:"name"},{title:"valueType",dataIndex:"valueType",valueType:"select",valueEnum:N.co},{title:"datatype",dataIndex:"datatype",valueType:"select",valueEnum:N.Nr},{title:"widget",dataIndex:"widget",valueType:"select",valueEnum:N.PA},{title:"options",dataIndex:"options",valueType:"select"},{title:"hideInForm",dataIndex:"hideInForm",valueType:"switch"}],te=(0,C.W6)((function(){return(0,Y.jsx)(R.Z,{style:{cursor:"grab",color:"#999"}})})),ae=(0,C.W8)((function(e){return(0,Y.jsx)("tr",h()({},e))})),re=(0,C.JN)((function(e){return(0,Y.jsx)("tbody",h()({},e))})),ie=function(e){var n,t=e.component,a=e.property,i=e.saveCallback,u=x.Z.useApp().message,c=(0,k.useState)([]),d=f()(c,2),p=d[0],v=d[1],C=(0,k.useState)([]),R=f()(C,2),L=R[0],M=R[1],B=k.useRef(),V=k.useRef(),U=k.useRef(),G=(0,k.useState)(!1),H=f()(G,2),K=H[0],q=H[1],_=k.useMemo((function(){return(null==L?void 0:L.length)>0?ne:[{title:"Sort",dataIndex:"sort",width:60,className:"drag-visible",render:function(){return(0,Y.jsx)(te,{})}}].concat(ne)}),[L]);return k.useEffect((function(){t.config&&a&&v(t.config[a.name]||[])}),[t,a]),(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)(g.Z,{size:"small",style:{marginBottom:12},title:(null==a?void 0:a.name)||"columns",styles:{header:{paddingRight:12},body:{padding:12}},extra:(0,Y.jsxs)(j.Z,{children:[(0,Y.jsx)(y.Z,{trigger:["click"],menu:{items:[{label:"导入接口对象",key:"API",icon:(0,Y.jsx)(O.Z,{}),onClick:function(){var e;null===(e=B.current)||void 0===e||e.open()}},{label:"导入数据库字段",key:"DATABASE",icon:(0,Y.jsx)(A.Z,{}),onClick:function(){var e;null===(e=V.current)||void 0===e||e.open()}}]},children:(0,Y.jsx)(b.ZP,{ghost:!0,type:"primary",children:(0,Y.jsxs)(j.Z,{children:["数据源导入",(0,Y.jsx)(F.Z,{})]})})}),(0,Y.jsx)(b.ZP,{type:"primary",icon:(0,Y.jsx)(z.Z,{}),onClick:m()(o()().mark((function e(){var n,r;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h()(h()({},t.config),{},s()({},null==a?void 0:a.name,p)),e.next=3,(0,E.vz)(t.id,{config:n});case 3:null!=(r=e.sent)&&r.success&&(u.success("保存成功"),M([]),null==i||i(h()(h()({},t),{},{config:n})));case 5:case"end":return e.stop()}}),e)}))),children:"保存"})]}),children:[(0,Y.jsx)(D.Z,{size:"small",columns:[].concat(l()(_),[{title:"操作",valueType:"option",width:140,render:function(e,n,r,l){return(0,Y.jsxs)(j.Z,{children:[(0,Y.jsx)("a",{onClick:function(){var e;null===(e=U.current)||void 0===e||e.open({record:n})},children:"高级"}),(0,Y.jsx)("a",{onClick:function(){var e;null==l||null===(e=l.startEditable)||void 0===e||e.call(l,n.uuid)},children:"编辑"},"editable"),(0,Y.jsx)(Z.Z,{title:"确认删除该记录？",onConfirm:m()(o()().mark((function e(){var r,l;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),r=p.filter((function(e){return e.uuid!==n.uuid})),l=h()(h()({},t.config),{},s()({},null==a?void 0:a.name,r)),e.next=5,(0,E.vz)(t.id,{config:l});case 5:q(!1),v(r),null==i||i(h()(h()({},t),{},{config:l}));case 8:case"end":return e.stop()}}),e)}))),children:(0,Y.jsx)(b.ZP,{danger:!0,type:"link",size:"small",loading:K,style:{padding:0},children:"删除"},"delete")})]})}}]),rowKey:function(e){return e.uuid},value:p,onChange:v,recordCreatorProps:{newRecordType:"dataSource",record:function(){return{uuid:(0,w.Z)(),title:"",name:"",type:N.Nr.STRING,widget:N.PA.INPUT,sort:null==p?void 0:p.length,editable:!0}}},editable:{type:"multiple",editableKeys:L,actionRender:function(e,n,t){return[t.save,t.cancel,t.delete]},onValuesChange:function(e,n){v(n)},onSave:(n=m()(o()().mark((function e(n,r){var l,u;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=p.map((function(e){return e.uuid===r.uuid?r:e})),u=h()(h()({},t.config),{},s()({},null==a?void 0:a.name,l)),e.next=4,(0,E.vz)(t.id,{config:u});case 4:null==i||i(h()(h()({},t),{},{config:u}));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)}),onChange:M},components:(null==L?void 0:L.length)>0?{}:{body:{wrapper:function(e){return(0,Y.jsx)(re,h()({useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:function(){var e=m()(o()().mark((function e(n){var r,l,u,c,d;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.oldIndex,l=n.newIndex,r===l){e.next=8;break}return u=(0,ee.q)(p,r,l),c=u.map((function(e,n){return h()(h()({},e),{},{sort:n,order:(null==u?void 0:u.length)-n})})),d=h()(h()({},t.config),{},s()({},null==a?void 0:a.name,c)),e.next=7,(0,E.vz)(t.id,{config:d});case 7:null==i||i(h()(h()({},t),{},{config:d}));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},e))},row:function(e){var n=p.findIndex((function(n){return n.uuid===e["data-row-key"]}));return(0,Y.jsx)(ae,h()({index:n},e))}}}}),(0,Y.jsx)(Q,{actionRef:U,saveCallback:function(){var e=m()(o()().mark((function e(n){var r,l;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.map((function(e){return e.uuid===n.uuid?n:e})),l=h()(h()({},t.config),{},s()({},null==a?void 0:a.name,r)),v(r),e.next=5,(0,E.vz)(t.id,{config:l});case 5:null==i||i(h()(h()({},t),{},{config:l}));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),(0,Y.jsx)(S.Z,{actionRef:B,selectedCallback:function(){var e=m()(o()().mark((function e(n){var t,a;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.filter((function(e){return!!e.type})).map((function(e){var n,t,a,i,l,u=(0,I.Ho)(e.type),o=[],c=h()(h()({},e),{},{type:u,uuid:(0,w.Z)()});if(void 0!==e.default&&null!==e.default&&Object.assign(c,{initialValue:e.default}),(e.type.indexOf("date")>-1||(null===(n=e.format)||void 0===n?void 0:n.indexOf("date"))>-1)&&(u="DateTime",Object.assign(c,{type:"DateTime",valueType:N.Ge.DATETIME,widget:N.PA.DATETIME,format:"YYYY-MM-DD HH:mm:ss",showTime:!0})),(null===(t=e.description)||void 0===t?void 0:t.indexOf("Decimal"))>-1&&(u="Decimal",Object.assign(c,{type:"Decimal",valueType:N.Ge.MONEY,widget:N.PA.INPUT_NUMBER})),e.enum&&e.description){var s,d=e.description.match(/\{([^}]+)\}/g),m=(null==d||null===(s=d[0])||void 0===s?void 0:s.slice(1,-1)).split(",").map((function(e){var n=e.split(":"),t=f()(n,2),a=t[0],r=t[1];return{value:"Number"===u?Number(a):a,label:r,key:a.toString()}}));Object.assign(c,{enums:m,widget:N.PA.SELECT})}if((null===(a=e.description)||void 0===a?void 0:a.indexOf("File"))>-1&&Object.assign(c,{widget:N.PA.UPLOAD}),"Boolean"===u&&Object.assign(c,{widget:N.PA.SWITCH,valueType:N.Ge.SWITCH}),(null===(i=e.description)||void 0===i?void 0:i.indexOf("Json"))>-1&&Object.assign(c,{type:"Json",widget:N.PA.TEXTAREA,valueType:N.Ge.JSONCODE}),(null===(l=e.description)||void 0===l?void 0:l.indexOf("RULES"))>-1){var p,v,x=e.description.match(/\[(.*?)\]/g),g=null==x||null===(p=x[0])||void 0===p?void 0:p.slice(1,-1),j=r()(g.split(","));try{for(j.s();!(v=j.n()).done;){var y=v.value.split(":"),b=f()(y,2),Z=b[0],k=b[1];Z===N.g9.IsNotEmpty&&o.concat({required:!0,message:k||"请输入".concat(e.comment)}),Z===N.g9.Matches&&o.concat({pattern:e.value,message:k||"请输入正确的".concat(e.comment,"格式")}),Z===N.g9.Max&&o.concat({max:Number(e.value),message:k||"已超出最大值限制"}),Z===N.g9.Min&&o.concat({min:Number(e.value),message:k||"已低于最小值限制"}),Z===N.g9.IsAlpha&&o.concat({pattern:/^[A-Za-z]+$/.toString(),message:k||"请输入符合规则的值"}),Z===N.g9.IsAlphanumeric&&o.concat({pattern:/^[A-Za-z0-9]+$/.toString(),message:k||"请输入合法的值"}),Z===N.g9.IsDecimal&&o.concat({pattern:/^-?\d*(\.\d+)?$/.toString(),message:k||"请输入合法的值"}),Z===N.g9.IsEmail&&o.concat({type:"email",message:k||"请输入正确的邮箱号"}),Z===N.g9.IsIP&&o.concat({pattern:/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.toString(),message:k||"请输入正确的邮箱号"}),Z===N.g9.IsLowercase&&o.concat({pattern:/^[a-z]+$/.toString(),message:k||"请输入小写字符"}),Z===N.g9.IsUppercase&&o.concat({pattern:/^[A-Z]+$/.toString(),message:k||"请输入大写字符"}),Z===N.g9.IsUrl&&o.concat({type:"url",message:k||"请输入正确的URL格式"}),Z===N.g9.IsUUID&&o.concat({pattern:/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.toString(),message:k||"请输入正确的UUID格式"}),Z===N.g9.IsMobilePhone&&o.concat({pattern:/^1[3-9]\d{9}$/.toString(),message:k||"请输入正确的手机号"}),Z===N.g9.IsPhoneNumber&&o.concat({pattern:/^(\+86)?1[3-9]\d{9}$|^(\+86)?0\d{2,3}-\d{7,8}$/.toString(),message:k||"请输入正确的电话号码格式"}),Z===N.g9.IsStrongPassword&&o.concat({pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.toString(),message:k||"至少8个字符，包含大写、小写字母、数字和特殊字符"})}}catch(e){j.e(e)}finally{j.f()}}return(null==o?void 0:o.length)>0&&Object.assign(c,{rules:o}),c})),a=[].concat(l()(p),l()(t)),v(a),M(t.map((function(e){return e.uuid})));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})]}),(0,Y.jsx)(T.Z,{modalRef:V,selectedCallback:function(e,n,t){var a=(0,P.Qu)(e,n,null==t?void 0:t.tableName),r=a.map((function(e){return(0,X.e7)(e,["table"])}));v((function(e){return[].concat(l()(e),l()(r))})),M((function(e){return[].concat(l()(e),l()(a.map((function(e){return e.uuid}))))}))}})]})}},46766:function(e,n,t){var a=t(90228),r=t.n(a),i=t(82092),l=t.n(i),u=t(26068),o=t.n(u),c=t(87999),s=t.n(c),d=t(48305),m=t.n(d),p=t(912),f=t(64684),v=t(50959),h=t(64155),x=t(20947),g=t(10218),j=t(11527);n.Z=function(e){var n,t=e.property,a=e.component,i=e.saveCallback,u=(0,v.useState)([]),c=m()(u,2),d=c[0],y=c[1],b=(0,v.useState)([]),Z=m()(b,2),I=Z[0],k=Z[1];return v.useEffect((function(){a.config&&t&&y(a.config[t.name]||[])}),[a,t]),(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(p.Z,{title:(null==t?void 0:t.name)||"options",size:"small",children:(0,j.jsx)(x.Z,{columns:[{title:"label",dataIndex:"label"},{title:"key",dataIndex:"key"},{title:"value",dataIndex:"value"},{title:"操作",dataIndex:"option",valueType:"option",render:function(e,n,i,u){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("a",{onClick:function(){var e;null==u||null===(e=u.startEditable)||void 0===e||e.call(u,n.uuid)},children:"编辑"},"edit"),(0,j.jsx)(f.ZP,{type:"link",danger:!0,onClick:s()(r()().mark((function e(){var i,u;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y((function(e){return e.filter((function(e){return e.uuid!==n.uuid}))})),i=d.filter((function(e){return e.uuid!==n.uuid})),u=o()(o()({},a.config),{},l()({},null==t?void 0:t.name,i)),e.next=5,(0,g.vz)(a.id,{config:u});case 5:case"end":return e.stop()}}),e)}))),children:"删除"})]})}}],rowKey:function(e){return e.uuid},value:d,onChange:y,recordCreatorProps:{newRecordType:"dataSource",record:function(){return{uuid:(0,h.Z)(),label:"",key:"",value:"",order:0}}},editable:{type:"multiple",editableKeys:I,actionRender:function(e,n,t){return[t.save,t.cancel,t.delete]},onValuesChange:function(e,n){y(n)},onSave:(n=s()(r()().mark((function e(n,u){var c,s;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=d.map((function(e){return e.uuid===u.uuid?u:e})),s=o()(o()({},a.config),{},l()({},null==t?void 0:t.name,c)),e.next=4,(0,g.vz)(a.id,{config:s});case 4:null==i||i(o()(o()({},a),{},{config:s}));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)}),onChange:k}})})})}},78992:function(e,n,t){var a=t(90228),r=t.n(a),i=t(82092),l=t.n(i),u=t(87999),o=t.n(u),c=t(15558),s=t.n(c),d=t(48305),m=t.n(d),p=t(26068),f=t.n(p),v=t(912),h=t(64684),x=t(23683),g=t(50959),j=t(30565),y=t(64155),b=t(10218),Z=t(83745),I=t(73115),k=t(20947),C=t(11527),w=[{title:"label",dataIndex:"label"},{title:"key",dataIndex:"key"},{title:"icon",dataIndex:"icon"},{title:"forceRender",dataIndex:"forceRender",valueType:"switch"},{title:"closable",dataIndex:"closable",valueType:"switch"},{title:"disabled",dataIndex:"disabled",valueType:"switch"},{title:"destroyInactiveTabPane",dataIndex:"destroyInactiveTabPane",valueType:"switch"}],S=(0,j.W6)((function(){return(0,C.jsx)(Z.Z,{style:{cursor:"grab",color:"#999"}})})),T=(0,j.W8)((function(e){return(0,C.jsx)("tr",f()({},e))})),N=(0,j.JN)((function(e){return(0,C.jsx)("tbody",f()({},e))}));n.Z=function(e){var n=e.property,t=e.component,a=e.saveCallback,i=e.setCurrentComponent,u=e.callSelectComponentView,c=(0,g.useState)([]),d=m()(c,2),p=d[0],j=d[1],Z=(0,g.useState)([]),E=m()(Z,2),P=E[0],R=E[1];g.useEffect((function(){t.config&&n&&j(t.config[n.name]||[])}),[t,n]);var O,A=g.useMemo((function(){return(null==P?void 0:P.length)>0?w:[{title:"Sort",dataIndex:"sort",width:60,className:"drag-visible",render:function(){return(0,C.jsx)(S,{})}}].concat(w)}),[P]);return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(v.Z,{title:(null==n?void 0:n.name)||"items",size:"small",children:(0,C.jsx)(k.Z,{columns:[].concat(s()(A),[{title:"children",dataIndex:"children",renderFormItem:function(e,a){var r,l=a.record,o=null===(r=t.children)||void 0===r?void 0:r.find((function(e){var n;return(null===(n=e.relation)||void 0===n?void 0:n.item)===(null==l?void 0:l.uuid)}));return o?(0,C.jsx)(h.ZP,{type:"link",size:"small",onClick:function(){i(o)},children:null==o?void 0:o.name}):(0,C.jsx)(h.ZP,{type:"link",size:"small",icon:(0,C.jsx)(I.Z,{}),onClick:function(){null==u||u({type:"SUBPROP",item:null==l?void 0:l.uuid,subkey:"children",property:null==n?void 0:n.name})},children:"添加组件"})}},{title:"操作",dataIndex:"option",valueType:"option",render:function(e,a,i,u){return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("a",{onClick:function(){var e;null==u||null===(e=u.startEditable)||void 0===e||e.call(u,a.uuid)},children:"编辑"},"edit"),(0,C.jsx)(h.ZP,{type:"link",danger:!0,onClick:o()(r()().mark((function e(){var i,u;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j((function(e){return e.filter((function(e){return e.uuid!==a.uuid}))})),i=p.filter((function(e){return e.uuid!==a.uuid})),u=f()(f()({},t.config),{},l()({},null==n?void 0:n.name,i)),e.next=5,(0,b.vz)(t.id,{config:u});case 5:case"end":return e.stop()}}),e)}))),children:"删除"})]})}}]),rowKey:function(e){return e.uuid},value:p,onChange:j,recordCreatorProps:{newRecordType:"dataSource",record:function(){return{uuid:(0,y.Z)(),label:"",key:"",order:0}}},editable:{type:"multiple",editableKeys:P,actionRender:function(e,n,t){return[t.save,t.cancel,t.delete]},onValuesChange:function(e,n){j(n)},onSave:(O=o()(r()().mark((function e(i,u){var o,c;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=p.map((function(e){return e.uuid===u.uuid?u:e})),c=f()(f()({},t.config),{},l()({},null==n?void 0:n.name,o)),e.next=4,(0,b.vz)(t.id,{config:c});case 4:null==a||a(f()(f()({},t),{},{config:c}));case 5:case"end":return e.stop()}}),e)}))),function(e,n){return O.apply(this,arguments)}),onChange:R},components:(null==P?void 0:P.length)>0?{}:{body:{wrapper:function(e){return(0,C.jsx)(N,f()({useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:function(){var e=o()(r()().mark((function e(i){var u,o,c,s,d;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=i.oldIndex,o=i.newIndex,u===o){e.next=8;break}return c=(0,x.q)(p,u,o),s=c.map((function(e,n){return f()(f()({},e),{},{sort:n,order:(null==c?void 0:c.length)-n})})),d=f()(f()({},t.config),{},l()({},null==n?void 0:n.name,s)),e.next=7,(0,b.vz)(t.id,{config:d});case 7:null==a||a(f()(f()({},t),{},{config:d}));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},e))},row:function(e){var n=p.findIndex((function(n){return n.uuid===e["data-row-key"]}));return(0,C.jsx)(T,f()({index:n},e))}}}})})})}},87965:function(e,n,t){t.d(n,{Z:function(){return ee}});var a=t(15558),r=t.n(a),i=t(90228),l=t.n(i),u=t(82092),o=t.n(u),c=t(87999),s=t.n(c),d=t(48305),m=t.n(d),p=t(26068),f=t.n(p),v=t(912),h=t(14471),x=t(22825),g=t(64684),j=t(56655),y=t(91283),b=t(23683),Z=t(50959),I=t(30565),k=t(64155),C=t(73252),w=t(71625),S=t(7733),T=t(10218),N=t(73368),E=t(83745),P=t(80525),R=t(25853),O=t(92336),A=t(13603),F=t(20947),z=t(67825),D=t.n(z),L=t(47113),M=t(17906),B=t(11204),V=t(45144),U=t(17621),G=t(89178),H=t(46611),K=t(73115),q=t(88884),_=t(11527),J=["key","name"],Y=function(e){var n=e.saveCallback,t=e.actionRef,a=(0,Z.useState)(S.E_.STRING),r=m()(a,2),i=r[0],u=r[1],o=(0,Z.useState)(),c=m()(o,2),d=c[0],p=c[1],v=(0,Z.useState)(!1),x=m()(v,2),j=x[0],y=x[1],b=L.Z.useForm(),I=m()(b,1)[0];return Z.useImperativeHandle(t,(function(){return{open:function(e){var n=e.record;p(n),y(!0),I.setFieldsValue(n)},closeView:function(){y(!1)}}})),(0,_.jsx)(M.Z,{width:720,title:"编辑列表字段",placement:"right",destroyOnClose:!0,maskClosable:!0,open:j,extra:(0,_.jsxs)(h.Z,{children:[(0,_.jsx)(g.ZP,{onClick:function(){y(!1)},children:"取消"}),(0,_.jsx)(g.ZP,{type:"primary",onClick:s()(l()().mark((function e(){var t;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.validateFields();case 2:(t=e.sent)&&(n(f()(f()({},d),t)),y(!1),I.resetFields());case 4:case"end":return e.stop()}}),e)}))),children:"保存"})]}),onClose:function(){y(!1),I.resetFields()},children:(0,_.jsxs)(L.Z,{form:I,children:[(0,_.jsx)(L.Z.Item,{label:"title",name:"title",children:(0,_.jsx)(B.Z,{placeholder:"title"})}),(0,_.jsx)(L.Z.Item,{label:"dataIndex",name:"dataIndex",children:(0,_.jsx)(B.Z,{placeholder:"dataIndex"})}),(0,_.jsx)(L.Z.Item,{label:"tooltip",name:"tooltip",children:(0,_.jsx)(B.Z,{placeholder:"tooltip"})}),(0,_.jsx)(L.Z.Item,{label:"dataType",name:"type",children:(0,_.jsx)(V.default,{placeholder:"type",options:q.pl.map((function(e){return{label:e,value:e}})),onChange:function(e){return u(e)}})}),(0,_.jsx)(L.Z.Item,{label:"width",name:"width",children:(0,_.jsx)(U.Z,{placeholder:"width"})}),(0,_.jsx)(L.Z.Item,{label:"valueType",name:"valueType",children:(0,_.jsx)(V.default,{placeholder:"valueType",options:q.Jp.map((function(e){return{label:e,value:e}}))})}),(0,_.jsx)(L.Z.Item,{label:"operator",name:"operator",children:(0,_.jsx)(V.default,{placeholder:"operator",options:q.xW.map((function(e){return{label:e,value:e}}))})}),(0,_.jsx)(L.Z.Item,{label:"ellipsis",name:"ellipsis",valuePropName:"checked",children:(0,_.jsx)(G.Z,{})}),(0,_.jsx)(L.Z.Item,{label:"copyable",name:"copyable",valuePropName:"checked",children:(0,_.jsx)(G.Z,{})}),(0,_.jsx)(L.Z.Item,{label:"valueEnums",children:(0,_.jsx)(L.Z.List,{name:"enums",children:function(e,n){var t=n.add,a=n.remove;return(0,_.jsxs)(_.Fragment,{children:[e.map((function(e){var n=e.key,t=e.name,r=D()(e,J);return(0,_.jsxs)(h.Z,{style:{display:"flex",marginBottom:1},align:"baseline",children:[(0,_.jsx)(L.Z.Item,f()(f()({},r),{},{name:[t,"label"],children:(0,_.jsx)(B.Z,{placeholder:"请输入标题"})})),(0,_.jsx)(L.Z.Item,f()(f()({},r),{},{name:[t,"key"],children:(0,_.jsx)(B.Z,{placeholder:"请输入Key"})})),(0,_.jsx)(L.Z.Item,f()(f()({},r),{},{name:[t,"value"],rules:[{required:!0,message:"请输入Value"}],children:(0,_.jsx)(B.Z,{type:[S.E_.NUMBER].includes(i)?"number":"text",placeholder:"请输入Value"})})),(0,_.jsx)(H.Z,{onClick:function(){return a(t)}})]},n)})),(0,_.jsx)(L.Z.Item,{children:(0,_.jsx)(g.ZP,{type:"dashed",onClick:function(){return t()},block:!0,icon:(0,_.jsx)(K.Z,{}),children:"添 加"})})]})}})})]})})},$=[{title:"name",dataIndex:"name"},{title:"title",dataIndex:"title"},{title:"valueType",dataIndex:"valueType",valueType:"select",valueEnum:S.co},{title:"options",dataIndex:"options",valueType:"select"}],W=(0,I.W6)((function(){return(0,_.jsx)(E.Z,{style:{cursor:"grab",color:"#999"}})})),Q=(0,I.W8)((function(e){return(0,_.jsx)("tr",f()({},e))})),X=(0,I.JN)((function(e){return(0,_.jsx)("tbody",f()({},e))})),ee=function(e){var n,t=e.component,a=e.property,i=e.saveCallback,u=(0,Z.useState)([]),c=m()(u,2),d=c[0],p=c[1],I=(0,Z.useState)([]),E=m()(I,2),z=E[0],D=E[1],L=Z.useRef(),M=Z.useRef(),B=Z.useRef(),V=(0,Z.useState)(!1),U=m()(V,2),G=U[0],H=U[1],K=Z.useMemo((function(){return(null==z?void 0:z.length)>0?$:[{title:"Sort",dataIndex:"sort",width:60,className:"drag-visible",render:function(){return(0,_.jsx)(W,{})}}].concat($)}),[z]);return Z.useEffect((function(){t.config&&a&&p(t.config[a.name]||[])}),[t,a]),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(v.Z,{title:(null==a?void 0:a.name)||"columns",styles:{header:{paddingRight:12},body:{padding:12}},extra:(0,_.jsxs)(h.Z,{children:[(0,_.jsx)(x.Z,{trigger:["click"],menu:{items:[{label:"导入接口对象",key:"API",icon:(0,_.jsx)(P.Z,{}),onClick:function(){var e;null===(e=L.current)||void 0===e||e.open()}},{label:"导入数据库字段",key:"DATABASE",icon:(0,_.jsx)(R.Z,{}),onClick:function(){var e;null===(e=M.current)||void 0===e||e.open()}}]},children:(0,_.jsx)(g.ZP,{ghost:!0,type:"primary",children:(0,_.jsxs)(h.Z,{children:["数据源导入",(0,_.jsx)(O.Z,{})]})})}),(0,_.jsx)(g.ZP,{type:"primary",icon:(0,_.jsx)(A.Z,{}),onClick:s()(l()().mark((function e(){var n,r;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f()(f()({},t.config),{},o()({},null==a?void 0:a.name,d)),e.next=3,(0,T.vz)(t.id,{config:n});case 3:null!=(r=e.sent)&&r.success&&(j.ZP.success("保存成功"),null==i||i(f()(f()({},t),{},{config:n})),D([]));case 5:case"end":return e.stop()}}),e)}))),children:"保存"})]}),children:[(0,_.jsx)(F.Z,{size:"small",columns:[].concat(r()(K),[{title:"操作",valueType:"option",width:140,render:function(e,n,r,u){return(0,_.jsxs)(h.Z,{children:[(0,_.jsx)("a",{onClick:function(){var e;null===(e=B.current)||void 0===e||e.open({record:n})},children:"高级"}),(0,_.jsx)("a",{onClick:function(){var e;null==u||null===(e=u.startEditable)||void 0===e||e.call(u,n.uuid)},children:"编辑"},"editable"),(0,_.jsx)(y.Z,{title:"确认删除该记录？",onConfirm:s()(l()().mark((function e(){var r,u;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!0),r=d.filter((function(e){return e.uuid!==n.uuid})),u=f()(f()({},t.config),{},o()({},null==a?void 0:a.name,r)),e.next=5,(0,T.vz)(t.id,{config:u});case 5:H(!1),p(r),null==i||i(f()(f()({},t),{},{config:u}));case 8:case"end":return e.stop()}}),e)}))),children:(0,_.jsx)(g.ZP,{type:"link",size:"small",loading:G,style:{padding:0},children:"删除"},"delete")})]})}}]),rowKey:function(e){return e.uuid},value:d,onChange:p,recordCreatorProps:{newRecordType:"dataSource",record:function(){return{uuid:(0,k.Z)(),title:"",prop:"",widget:S.l9.INPUT,order:0,editable:!0}}},editable:{type:"multiple",editableKeys:z,actionRender:function(e,n,t){return[t.save,t.cancel,t.delete]},onValuesChange:function(e,n){p(n)},onSave:(n=s()(l()().mark((function e(n,r){var u,c;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=d.map((function(e){return e.uuid===r.uuid?r:e})),c=f()(f()({},t.config),{},o()({},null==a?void 0:a.name,u)),e.next=4,(0,T.vz)(t.id,{config:c});case 4:null==i||i(f()(f()({},t),{},{config:c}));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)}),onChange:D},components:(null==z?void 0:z.length)>0?{}:{body:{wrapper:function(e){return(0,_.jsx)(X,f()({useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:function(){var e=s()(l()().mark((function e(n){var r,u,c,s,m;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.oldIndex,u=n.newIndex,r===u){e.next=8;break}return c=(0,b.q)(d,r,u),s=c.map((function(e,n){return f()(f()({},e),{},{sort:n,order:(null==c?void 0:c.length)-n})})),m=f()(f()({},t.config),{},o()({},null==a?void 0:a.name,s)),e.next=7,(0,T.vz)(t.id,{config:m});case 7:null==i||i(f()(f()({},t),{},{config:m}));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},e))},row:function(e){var n=d.findIndex((function(n){return n.uuid===e["data-row-key"]}));return(0,_.jsx)(Q,f()({index:n},e))}}}}),(0,_.jsx)(Y,{actionRef:B,saveCallback:function(){var e=s()(l()().mark((function e(n){var r,u;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.map((function(e){return e.uuid===n.uuid?n:e})),u=f()(f()({},t.config),{},o()({},null==a?void 0:a.name,r)),p(r),e.next=5,(0,T.vz)(t.id,{config:u});case 5:null==i||i(f()(f()({},t),{},{config:u}));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),(0,_.jsx)(C.Z,{actionRef:L,selectedCallback:function(){var e=s()(l()().mark((function e(n){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p((function(e){return[].concat(r()(e),r()(n))})),D(n.map((function(e){return e.uuid})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})]}),(0,_.jsx)(w.Z,{modalRef:M,selectedCallback:function(e,n,t){var a=(0,N.Qu)(e,n,null==t?void 0:t.tableName);p((function(e){return[].concat(r()(e),r()(a))})),D((function(e){return[].concat(r()(e),r()(a.map((function(e){return e.uuid}))))}))}})]})}},96730:function(e,n,t){var a=t(90228),r=t.n(a),i=t(82092),l=t.n(i),u=t(87999),o=t.n(u),c=t(15558),s=t.n(c),d=t(48305),m=t.n(d),p=t(26068),f=t.n(p),v=t(912),h=t(64684),x=t(23683),g=t(50959),j=t(30565),y=t(64155),b=t(10218),Z=t(83745),I=t(20947),k=t(11527),C=(0,j.W6)((function(){return(0,k.jsx)(Z.Z,{style:{cursor:"grab",color:"#999"}})})),w=(0,j.W8)((function(e){return(0,k.jsx)("tr",f()({},e))})),S=(0,j.JN)((function(e){return(0,k.jsx)("tbody",f()({},e))})),T=[{title:"target",dataIndex:"target"},{title:"title",dataIndex:"title"},{title:"description",dataIndex:"description"},{title:"placement",dataIndex:"placement"},{title:"cover",dataIndex:"cover"},{title:"type",dataIndex:"type",valueEnum:{default:"default",primary:"primary"}},{title:"arrow",dataIndex:"arrow",valueType:"switch"},{title:"mask",dataIndex:"mask",valueType:"switch"},{title:"onClose",dataIndex:"onClose"}];n.Z=function(e){var n=e.property,t=e.component,a=e.saveCallback,i=(0,g.useState)([]),u=m()(i,2),c=u[0],d=u[1],p=(0,g.useState)([]),j=m()(p,2),Z=j[0],N=j[1];g.useEffect((function(){t.config&&n&&d(t.config[n.name]||[])}),[t,n]);var E,P=g.useMemo((function(){return(null==Z?void 0:Z.length)>0?T:[{title:"Sort",dataIndex:"sort",width:60,className:"drag-visible",render:function(){return(0,k.jsx)(C,{})}}].concat(T)}),[Z]);return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(v.Z,{title:(null==n?void 0:n.name)||"options",size:"small",children:(0,k.jsx)(I.Z,{columns:[].concat(s()(P),[{title:"操作",dataIndex:"option",valueType:"option",render:function(e,a,i,u){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("a",{onClick:function(){var e;null==u||null===(e=u.startEditable)||void 0===e||e.call(u,a.uuid)},children:"编辑"},"edit"),(0,k.jsx)(h.ZP,{type:"link",danger:!0,onClick:o()(r()().mark((function e(){var i,u;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d((function(e){return e.filter((function(e){return e.uuid!==a.uuid}))})),i=c.filter((function(e){return e.uuid!==a.uuid})),u=f()(f()({},t.config),{},l()({},null==n?void 0:n.name,i)),e.next=5,(0,b.vz)(t.id,{config:u});case 5:case"end":return e.stop()}}),e)}))),children:"删除"})]})}}]),rowKey:function(e){return e.uuid},value:c,onChange:d,recordCreatorProps:{newRecordType:"dataSource",record:function(){return{uuid:(0,y.Z)(),target:"",title:"",description:"",order:0}}},editable:{type:"multiple",editableKeys:Z,actionRender:function(e,n,t){return[t.save,t.cancel,t.delete]},onValuesChange:function(e,n){d(n)},onSave:(E=o()(r()().mark((function e(i,u){var o,s;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=c.map((function(e){return e.uuid===u.uuid?u:e})),s=f()(f()({},t.config),{},l()({},null==n?void 0:n.name,o)),e.next=4,(0,b.vz)(t.id,{config:s});case 4:null==a||a(f()(f()({},t),{},{config:s}));case 5:case"end":return e.stop()}}),e)}))),function(e,n){return E.apply(this,arguments)}),onChange:N},components:(null==Z?void 0:Z.length)>0?{}:{body:{wrapper:function(e){return(0,k.jsx)(S,f()({useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:function(){var e=o()(r()().mark((function e(i){var u,o,s,d,m;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=i.oldIndex,o=i.newIndex,u===o){e.next=8;break}return s=(0,x.q)(c,u,o),d=s.map((function(e,n){return f()(f()({},e),{},{sort:n,order:(null==s?void 0:s.length)-n})})),m=f()(f()({},t.config),{},l()({},null==n?void 0:n.name,d)),e.next=7,(0,b.vz)(t.id,{config:m});case 7:null==a||a(f()(f()({},t),{},{config:m}));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},e))},row:function(e){var n=c.findIndex((function(n){return n.uuid===e["data-row-key"]}));return(0,k.jsx)(w,f()({index:n},e))}}}})})})}},76502:function(e,n,t){var a=t(90228),r=t.n(a),i=t(87999),l=t.n(i),u=t(48305),o=t.n(u),c=t(35363),s=t(56655),d=t(64684),m=t(37348),p=t(50959),f=t(90943),v=t.n(f),h=t(7733),x=t(10218),g=t(80434),j=t(37024),y=t(19504),b=t(11527);n.Z=function(e){var n=e.modalRef,t=(0,p.useState)(!1),a=o()(t,2),i=a[0],u=a[1],f=(0,p.useState)(!1),Z=o()(f,2),I=Z[0],k=Z[1],C=(0,p.useState)(),w=o()(C,2),S=w[0],T=w[1],N=function(){var e=l()(r()().mark((function e(n){var t,a,i,l=arguments;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=l.length>1&&void 0!==l[1]?l[1]:h.Hs.COMPONENT,k(!0),i=null,a!==h.Hs.COMPONENT){e.next=9;break}return e.next=6,(0,x.Bi)(n,{withChildren:!1});case 6:i=e.sent,e.next=18;break;case 9:if(a!==h.Hs.APPCOMPONENT){e.next=15;break}return e.next=12,(0,x.yN)(n,{withChildren:!1});case 12:i=e.sent,e.next=18;break;case 15:return e.next=17,(0,x.WK)(n);case 17:i=e.sent;case 18:k(!1),null!==(t=i)&&void 0!==t&&t.success&&T(i.data);case 20:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,p.useImperativeHandle)(n,(function(){return{open:function(e,n){u(!0),N(e.id,n)}}})),(0,b.jsx)(c.Z,{width:1200,title:"代码预览",destroyOnClose:!0,centered:!0,maskClosable:!1,open:i||!1,onCancel:function(){u(!1)},afterClose:function(){T(void 0)},footer:(0,b.jsxs)(b.Fragment,{children:[S&&(0,b.jsx)(v(),{text:S,onCopy:function(){s.ZP.success("拷贝成功")},children:(0,b.jsx)(d.ZP,{ghost:!0,type:"primary",icon:(0,b.jsx)(g.Z,{}),children:"拷贝代码"})}),(0,b.jsx)(d.ZP,{type:"primary",onClick:function(){u(!0)},children:"确认"})]}),children:(0,b.jsx)(m.Z,{spinning:I,children:S&&(0,b.jsx)(y.ZP,{value:S,height:"700px",style:{width:"100%"},extensions:[(0,j.eJ)({jsx:!0,typescript:!0})],onChange:function(){}})})})}},20370:function(e,n,t){t.d(n,{B$:function(){return c},CX:function(){return p},FT:function(){return h},FW:function(){return s},KR:function(){return d},Lk:function(){return f},_j:function(){return o},r$:function(){return u},r1:function(){return x},rn:function(){return m},yv:function(){return v}});var a=t(67825),r=t.n(a),i=t(92447),l=["datasource"],u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.ZP.post("api/datasources/database/list",e)},o=function(){return i.ZP.post("api/datasources/service-group/list")},c=function(e){return i.ZP.post("api/datasources/service-group",e)},s=function(e){return i.ZP.delete("api/datasources/service-group/".concat(e))},d=function(e){return i.ZP.post("api/datasources/dataservice/page",e)},m=function(e){return i.ZP.get("api/datasources/database/".concat(e,"/queryDatabaseTables/"))},p=function(e){var n=e.datasource,t=r()(e,l);return i.ZP.get("api/datasources/database/".concat(n,"/queryTableColumns/"),t)},f=function(e){return i.ZP.get("api/datasources/dataservice/".concat(e))},v=function(e,n){return i.ZP.post("api/datasources/service-group/".concat(e,"/migrate"),n)},h=function(e){return i.ZP.post("api/datasources/dataschema/list",e)},x=function(e){var n=e.datasource;return i.ZP.delete("api/datasources/database/".concat(n))}},78809:function(e,n,t){t.d(n,{HU:function(){return x},OB:function(){return o},Or:function(){return s},T4:function(){return h},TP:function(){return f},Z7:function(){return c},aU:function(){return v},an:function(){return m},ew:function(){return d},np:function(){return p}});var a=t(67825),r=t.n(a),i=t(92447),l=["id"],u=["id"],o=function(e){return i.ZP.post("api/materials/material/list",e)},c=function(e){return i.ZP.post("api/materials/material/list",e)},s=function(){return i.ZP.get("api/materials/material/treadstone")},d=function(e){var n=e.material;return i.ZP.post("api/materials/material/".concat(n,"/migrate"))},m=function(e){return i.ZP.post("api/materials/component-props/list",e)},p=function(e){var n=e.id,t=r()(e,l);return i.ZP.patch("api/materials/component/".concat(n,"/"),t)},f=function(e){return i.ZP.post("api/materials/component-props/reorder/",{props:e})},v=function(e){var n=e.id,t=r()(e,u);return i.ZP.patch("api/materials/component-props/".concat(n,"/"),t)},h=function(e){return i.ZP.post("api/materials/component-props/",e)},x=function(e){return i.ZP.post("api/materials/component-props/delete",e)}},73368:function(e,n,t){t.d(n,{Qu:function(){return c}});var a=t(48305),r=t.n(a),i=t(7733),l=t(64155),u=["TINYINT","SMALLINT","MEDIUMINT","INT","INTEGER","BIGINT","FLOAT","DOUBLE","DECIMAL"],o=["smallint","integer","bigint","decimal","numeric","real","double precision","smallserial","serial","bigserial","money"],c=function(e,n,t){return e.map((function(e){var a,c=function(e){if(/\[(.*)\]/.test(e.columnComment)){var n,t=null===(n=e.columnComment)||void 0===n?void 0:n.match(/\[(.*)\]/);return null==t?void 0:t[1].split(" ").map((function(e,n){return{label:e,value:n}}))}if(/\{(.*)\}/.test(e.columnComment)){var a,i=null===(a=e.columnComment)||void 0===a?void 0:a.match(/\[(.*)\]/);return null==i?void 0:i[1].split(" ").map((function(e){var n=e.split(":"),t=r()(n,2),a=t[0];return{label:t[1],value:a}}))}return[]}(e),s=function(e){var n,t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.YH.MYSQL;if(null!==(n=e.columnComment)&&void 0!==n&&n.includes("bool"))return i.PA.SWITCH;if(null!==(t=e.columnComment)&&void 0!==t&&t.includes("enum")||/\[(.*)\]/.test(e.columnComment)||/\{(.*)\}/.test(e.columnComment))return i.PA.SELECT;if(a===i.YH.MYSQL){if(u.includes(e.columnType))return i.PA.INPUT_NUMBER;if(["DATE"].includes(e.columnType))return i.PA.DATE;if(["DATETIME","TIMESTAMP"].includes(e.columnType))return i.PA.DATETIME}if(a===i.YH.PGSQL){if(o.includes(e.columnType))return i.PA.INPUT_NUMBER;if(["date"].includes(e.columnType))return i.PA.DATE;if(["boolean"].includes(e.columnType))return i.PA.SWITCH;if(["timestamp","datetime"].includes(e.columnType))return i.PA.DATETIME}return i.PA.INPUT}(e,n.type),d=function(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.YH.MYSQL;if(null!==(n=e.columnComment)&&void 0!==n&&n.includes("bool"))return i.Nr.BOOLEAN;if(t===i.YH.MYSQL){if(u.includes(e.columnType))return i.Nr.NUMBER;if(["DATE"].includes(e.columnType))return i.Nr.DATE;if(["DATETIME","TIMESTAMP"].includes(e.columnType))return i.Nr.DATETIME}if(t===i.YH.PGSQL){if(o.includes(e.columnType))return i.Nr.NUMBER;if(["date"].includes(e.columnType))return i.Nr.DATE;if(["boolean"].includes(e.columnType))return i.Nr.BOOLEAN;if(["timestamp","datetime"].includes(e.columnType))return i.Nr.DATETIME}return i.Nr.STRING}(e,n.type);return{title:(a=e.columnComment,/\[(.*)\]/.test(a)?a.replace(/\[(.*)\]/,"").trim():/\{(.*)\}/.test(a)?a.replace(/\{(.*)\}/,"").trim():a.includes("bool")?a.replace("bool","").trim():a.includes("ennum")?a.replace("ennum","").trim():a),uuid:(0,l.Z)(),dataIndex:e.columnName,name:e.columnName,widget:s,type:d,order:0,options:c,table:t}}))}},16166:function(e,n,t){t.d(n,{XV:function(){return s},c7:function(){return p},e7:function(){return m},kL:function(){return d},pM:function(){return c}});var a=t(335),r=t.n(a),i=t(26068),l=t.n(i),u=t(82092),o=t.n(u),c=function(e){try{return JSON.parse(e),!0}catch(e){return!1}},s=function(e){var n;return/[A-Za-z]/.test(null==e?void 0:e.substring(0,1))?null==e||null===(n=e.substring(0,1))||void 0===n?void 0:n.toUpperCase():null==e?void 0:e.substring(0,1)},d=function(e){return Object.keys(e).reduce((function(n,t){return null!==e[t]&&""!==e[t]?Object.assign(n,o()({},t,e[t])):n}),{})},m=function(e,n){var t,a=l()({},e),i=r()(n);try{for(i.s();!(t=i.n()).done;){var u=t.value;a.hasOwnProperty(u)&&delete a[u]}}catch(e){i.e(e)}finally{i.f()}return a},p=function(e,n){var t=document.createElement("script");t.type="text/javascript",t.src=e,t.onload=function(){console.log("Script loaded: ".concat(e)),n&&n()},t.onerror=function(){console.error("Failed to load script: ".concat(e))},document.head.appendChild(t)}}}]);