"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[889],{45889:function(n,t,e){e.d(t,{Z:function(){return Z}});var r=function(){return r=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n},r.apply(this,arguments)};function i(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]])}return e}function o(n,t,e,r){return new(e||(e=Promise))((function(i,o){function u(n){try{c(r.next(n))}catch(n){o(n)}}function a(n){try{c(r.throw(n))}catch(n){o(n)}}function c(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,a)}c((r=r.apply(n,t||[])).next())}))}function u(n,t){var e,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(u=0)),u;)try{if(e=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(i=u.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){u.label=a[1];break}if(6===a[0]&&u.label<i[1]){u.label=i[1],i=a;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(a);break}i[2]&&u.ops.pop(),u.trys.pop();continue}a=t.call(n,u)}catch(n){a=[6,n],r=0}finally{e=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}Object.create;function a(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var r,i,o=e.call(n),u=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)u.push(r.value)}catch(n){i={error:n}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return u}function c(n,t,e){if(e||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return n.concat(r||Array.prototype.slice.call(t))}Object.create;"function"==typeof SuppressedError&&SuppressedError;var l=e(50959),s=function(n){return function(t,e){var r=(0,l.useRef)(!1);n((function(){return function(){r.current=!1}}),[]),n((function(){if(r.current)return t();r.current=!0}),e)}},f=s(l.useEffect),d=function(n,t){var e=t.manual,r=t.ready,i=void 0===r||r,o=t.defaultParams,u=void 0===o?[]:o,s=t.refreshDeps,d=void 0===s?[]:s,v=t.refreshDepsAction,p=(0,l.useRef)(!1);return p.current=!1,f((function(){!e&&i&&(p.current=!0,n.run.apply(n,c([],a(u),!1)))}),[i]),f((function(){p.current||e||(p.current=!0,v?v():n.refresh())}),c([],a(d),!1)),{onBefore:function(){if(!i)return{stopNow:!0}}}};d.onInit=function(n){var t=n.ready,e=void 0===t||t;return{loading:!n.manual&&e}};var v=d;function p(n,t){var e=(0,l.useRef)({deps:t,obj:void 0,initialized:!1}).current;return!1!==e.initialized&&function(n,t){if(n===t)return!0;for(var e=0;e<n.length;e++)if(!Object.is(n[e],t[e]))return!1;return!0}(e.deps,t)||(e.deps=t,e.obj=n(),e.initialized=!0),e.obj}var h=function(n){var t=(0,l.useRef)(n);return t.current=n,t},y=function(n){return"function"==typeof n},m=function(n){var t=h(n);(0,l.useEffect)((function(){return function(){t.current()}}),[])},g=new Map,b=new Map,w={},O=function(n,t){return w[n]||(w[n]=[]),w[n].push(t),function(){var e=w[n].indexOf(t);w[n].splice(e,1)}},P=function(n,t){var e=t.cacheKey,i=t.cacheTime,o=void 0===i?3e5:i,u=t.staleTime,s=void 0===u?0:u,f=t.setCache,d=t.getCache,v=(0,l.useRef)(),h=(0,l.useRef)(),y=function(n,t){f?f(t):function(n,t,e){var i=g.get(n);(null==i?void 0:i.timer)&&clearTimeout(i.timer);var o=void 0;t>-1&&(o=setTimeout((function(){g.delete(n)}),t)),g.set(n,r(r({},e),{timer:o}))}(n,o,t),function(n,t){w[n]&&w[n].forEach((function(n){return n(t)}))}(n,t.data)},P=function(n,t){return void 0===t&&(t=[]),d?d(t):function(n){return g.get(n)}(n)};return p((function(){if(e){var t=P(e);t&&Object.hasOwnProperty.call(t,"data")&&(n.state.data=t.data,n.state.params=t.params,(-1===s||(new Date).getTime()-t.time<=s)&&(n.state.loading=!1)),v.current=O(e,(function(t){n.setState({data:t})}))}}),[]),m((function(){var n;null===(n=v.current)||void 0===n||n.call(v)})),e?{onBefore:function(n){var t=P(e,n);return t&&Object.hasOwnProperty.call(t,"data")?-1===s||(new Date).getTime()-t.time<=s?{loading:!1,data:null==t?void 0:t.data,error:void 0,returnNow:!0}:{data:null==t?void 0:t.data,error:void 0}:{}},onRequest:function(n,t){var r=function(n){return b.get(n)}(e);return r&&r!==h.current||(r=n.apply(void 0,c([],a(t),!1)),h.current=r,function(n,t){b.set(n,t),t.then((function(t){return b.delete(n),t})).catch((function(){b.delete(n)}))}(e,r)),{servicePromise:r}},onSuccess:function(t,r){var i;e&&(null===(i=v.current)||void 0===i||i.call(v),y(e,{data:t,params:r,time:(new Date).getTime()}),v.current=O(e,(function(t){n.setState({data:t})})))},onMutate:function(t){var r;e&&(null===(r=v.current)||void 0===r||r.call(v),y(e,{data:t,params:n.state.params,time:(new Date).getTime()}),v.current=O(e,(function(t){n.setState({data:t})})))}}:{}},S=e(66292),R=e.n(S),E=function(n,t){var e=t.debounceWait,r=t.debounceLeading,i=t.debounceTrailing,o=t.debounceMaxWait,u=(0,l.useRef)(),s=(0,l.useMemo)((function(){var n={};return void 0!==r&&(n.leading=r),void 0!==i&&(n.trailing=i),void 0!==o&&(n.maxWait=o),n}),[r,i,o]);return(0,l.useEffect)((function(){if(e){var t=n.runAsync.bind(n);return u.current=R()((function(n){n()}),e,s),n.runAsync=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return new Promise((function(e,r){var i;null===(i=u.current)||void 0===i||i.call(u,(function(){t.apply(void 0,c([],a(n),!1)).then(e).catch(r)}))}))},function(){var e;null===(e=u.current)||void 0===e||e.cancel(),n.runAsync=t}}}),[e,s]),e?{onCancel:function(){var n;null===(n=u.current)||void 0===n||n.cancel()}}:{}},T=function(n,t){var e=t.loadingDelay,r=t.ready,i=(0,l.useRef)();if(!e)return{};var o=function(){i.current&&clearTimeout(i.current)};return{onBefore:function(){return o(),!1!==r&&(i.current=setTimeout((function(){n.setState({loading:!0})}),e)),{loading:!1}},onFinally:function(){o()},onCancel:function(){o()}}},j=!("undefined"==typeof window||!window.document||!window.document.createElement);function A(){return!j||"hidden"!==document.visibilityState}var x=[];if(j){window.addEventListener("visibilitychange",(function(){if(A())for(var n=0;n<x.length;n++){(0,x[n])()}}),!1)}var C=function(n){return x.push(n),function(){var t=x.indexOf(n);x.splice(t,1)}},H=function(n,t){var e=t.pollingInterval,r=t.pollingWhenHidden,i=void 0===r||r,o=t.pollingErrorRetryCount,u=void 0===o?-1:o,a=(0,l.useRef)(),c=(0,l.useRef)(),s=(0,l.useRef)(0),d=function(){var n;a.current&&clearTimeout(a.current),null===(n=c.current)||void 0===n||n.call(c)};return f((function(){e||d()}),[e]),e?{onBefore:function(){d()},onError:function(){s.current+=1},onSuccess:function(){s.current=0},onFinally:function(){-1===u||-1!==u&&s.current<=u?a.current=setTimeout((function(){i||A()?n.refresh():c.current=C((function(){n.refresh()}))}),e):s.current=0},onCancel:function(){d()}}:{}};var k=[];if(j){var B=function(){if(A()&&(!j||void 0===navigator.onLine||navigator.onLine))for(var n=0;n<k.length;n++){(0,k[n])()}};window.addEventListener("visibilitychange",B,!1),window.addEventListener("focus",B,!1)}var M=function(n){return k.push(n),function(){var t=k.indexOf(n);t>-1&&k.splice(t,1)}},D=function(n,t){var e=t.refreshOnWindowFocus,r=t.focusTimespan,i=void 0===r?5e3:r,o=(0,l.useRef)(),u=function(){var n;null===(n=o.current)||void 0===n||n.call(o)};return(0,l.useEffect)((function(){if(e){var t=(r=n.refresh.bind(n),l=i,s=!1,function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];s||(s=!0,r.apply(void 0,c([],a(n),!1)),setTimeout((function(){s=!1}),l))});o.current=M((function(){t()}))}var r,l,s;return function(){u()}}),[e,i]),m((function(){u()})),{}},F=function(n,t){var e=t.retryInterval,r=t.retryCount,i=(0,l.useRef)(),o=(0,l.useRef)(0),u=(0,l.useRef)(!1);return r?{onBefore:function(){u.current||(o.current=0),u.current=!1,i.current&&clearTimeout(i.current)},onSuccess:function(){o.current=0},onError:function(){if(o.current+=1,-1===r||o.current<=r){var t=null!=e?e:Math.min(1e3*Math.pow(2,o.current),3e4);i.current=setTimeout((function(){u.current=!0,n.refresh()}),t)}else o.current=0},onCancel:function(){o.current=0,i.current&&clearTimeout(i.current)}}:{}},I=e(38209),L=e.n(I),N=function(n,t){var e=t.throttleWait,r=t.throttleLeading,i=t.throttleTrailing,o=(0,l.useRef)(),u={};return void 0!==r&&(u.leading=r),void 0!==i&&(u.trailing=i),(0,l.useEffect)((function(){if(e){var t=n.runAsync.bind(n);return o.current=L()((function(n){n()}),e,u),n.runAsync=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return new Promise((function(e,r){var i;null===(i=o.current)||void 0===i||i.call(o,(function(){t.apply(void 0,c([],a(n),!1)).then(e).catch(r)}))}))},function(){var e;n.runAsync=t,null===(e=o.current)||void 0===e||e.cancel()}}}),[e,r,i]),e?{onCancel:function(){var n;null===(n=o.current)||void 0===n||n.cancel()}}:{}};var W=function(n){var t=(0,l.useRef)(n);t.current=(0,l.useMemo)((function(){return n}),[n]);var e=(0,l.useRef)();return e.current||(e.current=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return t.current.apply(this,n)}),e.current},_=function(n){(0,l.useEffect)((function(){null==n||n()}),[])},z=function(){var n=a((0,l.useState)({}),2)[1];return(0,l.useCallback)((function(){return n({})}),[])},q=function(){function n(n,t,e,i){void 0===i&&(i={}),this.serviceRef=n,this.options=t,this.subscribe=e,this.initState=i,this.count=0,this.state={loading:!1,params:void 0,data:void 0,error:void 0},this.state=r(r(r({},this.state),{loading:!t.manual}),i)}return n.prototype.setState=function(n){void 0===n&&(n={}),this.state=r(r({},this.state),n),this.subscribe()},n.prototype.runPluginHandler=function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var r=this.pluginImpls.map((function(e){var r;return null===(r=e[n])||void 0===r?void 0:r.call.apply(r,c([e],a(t),!1))})).filter(Boolean);return Object.assign.apply(Object,c([{}],a(r),!1))},n.prototype.runAsync=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return o(this,void 0,void 0,(function(){var t,e,o,l,s,f,d,v,p,h,y,m,g,b,w,O,P,S,R,E,T;return u(this,(function(u){switch(u.label){case 0:if(this.count+=1,t=this.count,e=this.runPluginHandler("onBefore",n),o=e.stopNow,l=void 0!==o&&o,s=e.returnNow,f=void 0!==s&&s,d=i(e,["stopNow","returnNow"]),l)return[2,new Promise((function(){}))];if(this.setState(r({loading:!0,params:n},d)),f)return[2,Promise.resolve(d.data)];null===(g=(m=this.options).onBefore)||void 0===g||g.call(m,n),u.label=1;case 1:return u.trys.push([1,3,,4]),(v=this.runPluginHandler("onRequest",this.serviceRef.current,n).servicePromise)||(v=(y=this.serviceRef).current.apply(y,c([],a(n),!1))),[4,v];case 2:return p=u.sent(),t!==this.count?[2,new Promise((function(){}))]:(this.setState({data:p,error:void 0,loading:!1}),null===(w=(b=this.options).onSuccess)||void 0===w||w.call(b,p,n),this.runPluginHandler("onSuccess",p,n),null===(P=(O=this.options).onFinally)||void 0===P||P.call(O,n,p,void 0),t===this.count&&this.runPluginHandler("onFinally",n,p,void 0),[2,p]);case 3:if(h=u.sent(),t!==this.count)return[2,new Promise((function(){}))];throw this.setState({error:h,loading:!1}),null===(R=(S=this.options).onError)||void 0===R||R.call(S,h,n),this.runPluginHandler("onError",h,n),null===(T=(E=this.options).onFinally)||void 0===T||T.call(E,n,void 0,h),t===this.count&&this.runPluginHandler("onFinally",n,void 0,h),h;case 4:return[2]}}))}))},n.prototype.run=function(){for(var n=this,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.runAsync.apply(this,c([],a(t),!1)).catch((function(t){n.options.onError||console.error(t)}))},n.prototype.cancel=function(){this.count+=1,this.setState({loading:!1}),this.runPluginHandler("onCancel")},n.prototype.refresh=function(){this.run.apply(this,c([],a(this.state.params||[]),!1))},n.prototype.refreshAsync=function(){return this.runAsync.apply(this,c([],a(this.state.params||[]),!1))},n.prototype.mutate=function(n){var t=y(n)?n(this.state.data):n;this.runPluginHandler("onMutate",t),this.setState({data:t})},n}(),G=q;var K=function(n,t,e){void 0===t&&(t={}),void 0===e&&(e=[]);var o=t.manual,u=void 0!==o&&o,l=t.ready,s=void 0===l||l,f=i(t,["manual","ready"]),d=r({manual:u,ready:s},f),v=h(n),y=z(),g=p((function(){var n=e.map((function(n){var t;return null===(t=null==n?void 0:n.onInit)||void 0===t?void 0:t.call(n,d)})).filter(Boolean);return new G(v,d,y,Object.assign.apply(Object,c([{}],a(n),!1)))}),[]);return g.options=d,g.pluginImpls=e.map((function(n){return n(g,d)})),_((function(){if(!u&&s){var n=g.state.params||t.defaultParams||[];g.run.apply(g,c([],a(n),!1))}})),m((function(){g.cancel()})),{loading:g.state.loading,data:g.state.data,error:g.state.error,params:g.state.params||[],cancel:W(g.cancel.bind(g)),refresh:W(g.refresh.bind(g)),refreshAsync:W(g.refreshAsync.bind(g)),run:W(g.run.bind(g)),runAsync:W(g.runAsync.bind(g)),mutate:W(g.mutate.bind(g))}};var Z=function(n,t,e){return K(n,t,c(c([],a(e||[]),!1),[E,T,H,D,N,v,P,F],!1))}}}]);