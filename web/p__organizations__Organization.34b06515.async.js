"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[503],{9560:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(2053),a=t(50959),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M573.7 252.5C422.5 197.4 201.3 96.7 201.3 96.7c-15.7-4.1-17.9 11.1-17.9 11.1-5 61.1 33.6 160.5 53.6 182.8 19.9 22.3 319.1 113.7 319.1 113.7S326 357.9 270.5 341.9c-55.6-16-37.9 17.8-37.9 17.8 11.4 61.7 64.9 131.8 107.2 138.4 42.2 6.6 220.1 4 220.1 4s-35.5 4.1-93.2 11.9c-42.7 5.8-97 12.5-111.1 17.8-33.1 12.5 24 62.6 24 62.6 84.7 76.8 129.7 50.5 129.7 50.5 33.3-10.7 61.4-18.5 85.2-24.2L565 743.1h84.6L603 928l205.3-271.9H700.8l22.3-38.7c.3.5.4.8.4.8S799.8 496.1 829 433.8l.6-1h-.1c5-10.8 8.6-19.7 10-25.8 17-71.3-114.5-99.4-265.8-154.5z"}}]},name:"dingtalk",theme:"outlined"},l=t(58714),s=function(e,n){return a.createElement(l.Z,(0,r.Z)({},e,{ref:n,icon:i}))};var c=a.forwardRef(s)},92336:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(2053),a=t(50959),i={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM653.3 424.6l52.2 52.2a8.01 8.01 0 01-4.7 13.6l-179.4 21c-5.1.6-9.5-3.7-8.9-8.9l21-179.4c.8-6.6 8.9-9.4 13.6-4.7l52.4 52.4 256.2-256.2c3.1-3.1 8.2-3.1 11.3 0l42.4 42.4c3.1 3.1 3.1 8.2 0 11.3L653.3 424.6z"}}]},name:"import",theme:"outlined"},l=t(58714),s=function(e,n){return a.createElement(l.Z,(0,r.Z)({},e,{ref:n,icon:i}))};var c=a.forwardRef(s)},12322:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(2053),a=t(50959),i={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.78 729.59a135.87 135.87 0 00-47.04 19.04 114.24 114.24 0 01-51.4 31.08 76.29 76.29 0 0124.45-45.42 169.3 169.3 0 0023.4-55.02 50.41 50.41 0 1150.6 50.32zm-92.21-120.76a168.83 168.83 0 00-54.81-23.68 50.41 50.41 0 01-50.4-50.42 50.41 50.41 0 11100.8 0 137.5 137.5 0 0018.82 47.2 114.8 114.8 0 0130.76 51.66 76.08 76.08 0 01-45.02-24.76h-.19zm-83.04-177.71c-15.19-127.33-146.98-227.1-306.44-227.1-169.87 0-308.09 113.1-308.09 252.2A235.81 235.81 0 00230.06 647.6a311.28 311.28 0 0033.6 21.59L250 723.76c4.93 2.31 9.7 4.78 14.75 6.9l69-34.5c10.07 2.61 20.68 4.3 31.2 6.08 6.73 1.2 13.45 2.43 20.35 3.25a354.83 354.83 0 00128.81-7.4 248.88 248.88 0 0010.15 55.06 425.64 425.64 0 01-96.17 11.24 417.98 417.98 0 01-86.4-9.52L216.52 817.4a27.62 27.62 0 01-29.98-3.14 28.02 28.02 0 01-9.67-28.61l22.4-90.24A292.26 292.26 0 0164 456.21C64 285.98 227 148 428.09 148c190.93 0 347.29 124.53 362.52 282.82a244.97 244.97 0 00-26.47-2.62c-9.9.38-19.79 1.31-29.6 2.88zm-116.3 198.81a135.76 135.76 0 0047.05-19.04 114.24 114.24 0 0151.45-31 76.47 76.47 0 01-24.5 45.34 169.48 169.48 0 00-23.4 55.05 50.41 50.41 0 01-100.8.23 50.41 50.41 0 0150.2-50.58m90.8 121.32a168.6 168.6 0 0054.66 23.9 50.44 50.44 0 0135.64 86.08 50.38 50.38 0 01-86.04-35.66 136.74 136.74 0 00-18.67-47.28 114.71 114.71 0 01-30.54-51.8 76 76 0 0144.95 25.06z"}}]},name:"wechat-work",theme:"outlined"},l=t(58714),s=function(e,n){return a.createElement(l.Z,(0,r.Z)({},e,{ref:n,icon:i}))};var c=a.forwardRef(s)},87648:function(e,n,t){t.r(n),t.d(n,{default:function(){return $}});var r=t(67825),a=t.n(r),i=t(90228),l=t.n(i),s=t(87999),c=t.n(s),o=t(48305),d=t.n(o),u=t(37956),p=t(70725),x=t(73264),v=t(912),h=t(22825),f=t(64684),m=t(10754),g=t(14471),j=t(74230),b=t(11204),Z=t(91283),I=t(50959),w=t(38653),k=t(26068),y=t.n(k),z=t(17906),C=t(9073),R=t(7733),S=t(49434),E=t(7313),T=t(33600),P=t(11527),Y=function(e){var n,t,r,a,i=e.saveCallback,s=e.actionRef,o=u.Z.useApp(),p=o.message,x=o.modal,v=(0,I.useState)(!1),h=d()(v,2),m=h[0],b=h[1],w=(0,I.useState)(),k=d()(w,2),Y=k[0],O=k[1],U=(0,T.useModel)("@@initialState").initialState;return I.useImperativeHandle(s,(function(){return{open:function(e){O(e),b(!0)}}})),(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(z.Z,{width:600,zIndex:188,title:"成员设置",placement:"right",destroyOnClose:!0,maskClosable:!0,open:m,onClose:function(){b(!1)},children:(0,P.jsxs)(E.vY,{column:1,editable:{onSave:(a=c()(l()().mark((function e(n,t){var r;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.CV)(y()({id:null==Y?void 0:Y.id},t));case 2:null!=(r=e.sent)&&r.success&&(p.success("保存成功"),null==i||i());case 4:case"end":return e.stop()}}),e)}))),function(e,n){return a.apply(this,arguments)})},children:[(0,P.jsx)(E.vY.Item,{label:"用户ID",dataIndex:"serial",copyable:!0,editable:!1,children:null==Y?void 0:Y.serial}),(null==U||null===(n=U.currentUser)||void 0===n?void 0:n.role)===R.uU.ADMIN&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(E.vY.Item,{label:"名称",dataIndex:"name",children:null==Y?void 0:Y.name}),(0,P.jsx)(E.vY.Item,{label:"邮箱",dataIndex:"email",children:null==Y?void 0:Y.email}),(0,P.jsx)(E.vY.Item,{label:"手机号",dataIndex:"phone",children:null==Y?void 0:Y.phone}),(0,P.jsx)(E.vY.Item,{label:"岗位",dataIndex:"position",children:null==Y?void 0:Y.position}),(0,P.jsx)(E.vY.Item,{label:"钉钉用户ID",dataIndex:"dingtalkUserId",children:null==Y?void 0:Y.dingtalkUserId}),(0,P.jsx)(E.vY.Item,{label:"企微用户ID",dataIndex:"weworkUserId",children:null==Y?void 0:Y.weworkUserId}),(0,P.jsx)(E.vY.Item,{label:"登录密码",editable:!1,children:(0,P.jsxs)(g.Z,{children:[(0,P.jsx)(j.Z.Text,{children:"********"}),(0,P.jsx)(Z.Z,{title:"确定为该成员重置密码吗？",onConfirm:c()(l()().mark((function e(){var n;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y){e.next=5;break}return e.next=3,(0,S.x8)(Y.id);case 3:null!=(n=e.sent)&&n.success&&(null==i||i(),x.confirm({title:"请保存好成员登录密码！",width:600,content:(0,P.jsxs)(g.Z,{direction:"vertical",children:[(0,P.jsx)(C.Z,{type:"warning",message:"成员登录密码在创建时会进行加密存储，如果忘记只能重新生成，创建后请保存好！"}),(0,P.jsx)(j.Z.Text,{strong:!0,copyable:!0,children:n.data})]})}));case 5:case"end":return e.stop()}}),e)}))),children:(0,P.jsx)(f.ZP,{size:"small",type:"link",style:{paddingRight:0},children:"重置"})},"reset")]})}),null!=Y&&Y.superuser?(0,P.jsx)(E.vY.Item,{label:"开发者密钥",editable:!1,children:(0,P.jsxs)(g.Z,{children:[(0,P.jsx)(j.Z.Text,{children:"********"}),(0,P.jsx)(Z.Z,{title:"确定重置开发者密钥吗？",onConfirm:c()(l()().mark((function e(){var n;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y){e.next=5;break}return e.next=3,(0,S.S0)(Y.id);case 3:null!=(n=e.sent)&&n.success&&(null==i||i(),x.confirm({title:"请保存好开发者密钥！",width:600,content:(0,P.jsxs)(g.Z,{direction:"vertical",children:[(0,P.jsx)(C.Z,{type:"warning",message:"开发者密钥在创建时会进行加密存储，如果忘记只能重新生成，创建后请保存好！"}),(0,P.jsx)(j.Z.Text,{strong:!0,copyable:!0,children:n.data})]})}));case 5:case"end":return e.stop()}}),e)}))),children:(0,P.jsx)(f.ZP,{size:"small",type:"link",style:{paddingRight:0},children:"重置"})},"reset")]})}):(0,P.jsx)(E.vY.Item,{label:"授权为开发者",dataIndex:"developer",valueType:"switch",children:null==Y?void 0:Y.developer}),(0,P.jsx)(E.vY.Item,{label:"启用状态",dataIndex:"activated",editable:!1,children:(0,P.jsxs)(g.Z,{children:[(0,P.jsx)(j.Z.Text,{children:null!=Y&&Y.activated?"启用中":"已禁用"}),(0,P.jsx)(Z.Z,{title:"确定要".concat(null!=Y&&Y.activated?"禁用":"启用","该成员吗？"),onConfirm:c()(l()().mark((function e(){var n;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y){e.next=12;break}if(null==Y||!Y.activated){e.next=7;break}return e.next=4,(0,S.Lc)(Y.id);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,(0,S.YP)(Y.id);case 9:e.t0=e.sent;case 10:null!=(n=e.t0)&&n.success&&(O((function(e){return y()(y()({},e),{},{activated:!Y.activated})})),null==i||i());case 12:case"end":return e.stop()}}),e)}))),children:(0,P.jsx)(f.ZP,{size:"small",type:"link",danger:null==Y?void 0:Y.activated,style:{paddingRight:0},children:null!=Y&&Y.activated?"禁用":"启用"})},"reset")]})})]}),(null==U||null===(t=U.currentUser)||void 0===t?void 0:t.role)===R.uU.DEVELOPER&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(E.vY.Item,{label:"名称",dataIndex:"name",editable:!1,children:null==Y?void 0:Y.name}),(0,P.jsx)(E.vY.Item,{label:"邮箱",dataIndex:"email",editable:!1,children:null==Y?void 0:Y.email}),(0,P.jsx)(E.vY.Item,{label:"手机号",dataIndex:"phone",editable:!1,children:null==Y?void 0:Y.phone}),(0,P.jsx)(E.vY.Item,{label:"岗位",dataIndex:"position",editable:!1,children:null==Y?void 0:Y.position}),(0,P.jsx)(E.vY.Item,{label:"钉钉用户ID",dataIndex:"dingtalkUserId",editable:!1,children:null==Y?void 0:Y.dingtalkUserId}),(0,P.jsx)(E.vY.Item,{label:"企微用户ID",dataIndex:"weworkUserId",editable:!1,children:null==Y?void 0:Y.weworkUserId}),(null==Y?void 0:Y.serial)===(null==U||null===(r=U.currentUser)||void 0===r?void 0:r.serial)&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(E.vY.Item,{label:"登录密码",editable:!1,children:(0,P.jsxs)(g.Z,{children:[(0,P.jsx)(j.Z.Text,{children:"********"}),(0,P.jsx)(Z.Z,{title:"确定重置密码吗？",onConfirm:c()(l()().mark((function e(){var n;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y){e.next=5;break}return e.next=3,(0,S.x8)(Y.id);case 3:null!=(n=e.sent)&&n.success&&(null==i||i(),x.confirm({title:"请保存好登录密码！",width:600,content:(0,P.jsxs)(g.Z,{direction:"vertical",children:[(0,P.jsx)(C.Z,{type:"warning",message:"登录密码在创建时会进行加密存储，如果忘记只能重新生成，创建后请保存好！"}),(0,P.jsx)(j.Z.Text,{strong:!0,copyable:!0,children:n.data})]})}));case 5:case"end":return e.stop()}}),e)}))),children:(0,P.jsx)(f.ZP,{size:"small",type:"link",style:{paddingRight:0},children:"重置"})},"reset")]})}),(0,P.jsx)(E.vY.Item,{label:"开发者密钥",editable:!1,children:(0,P.jsxs)(g.Z,{children:[(0,P.jsx)(j.Z.Text,{children:"********"}),(0,P.jsx)(Z.Z,{title:"确定重置开发者密钥吗？",onConfirm:c()(l()().mark((function e(){var n;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y){e.next=5;break}return e.next=3,(0,S.S0)(Y.id);case 3:null!=(n=e.sent)&&n.success&&(null==i||i(),x.confirm({title:"请保存好开发者密钥！",width:600,content:(0,P.jsxs)(g.Z,{direction:"vertical",children:[(0,P.jsx)(C.Z,{type:"warning",message:"开发者密钥在创建时会进行加密存储，如果忘记只能重新生成，创建后请保存好！"}),(0,P.jsx)(j.Z.Text,{strong:!0,copyable:!0,children:n.data})]})}));case 5:case"end":return e.stop()}}),e)}))),children:(0,P.jsx)(f.ZP,{size:"small",type:"link",style:{paddingRight:0},children:"重置"})},"reset")]})})]})]})]})})})},O=t(81796),U=t(28213),A=["id"];function D(e,n){return L.apply(this,arguments)}function L(){return(L=c()(l()().mark((function e(n,t){var r,i;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,i=a()(n,A),e.abrupt("return",(0,T.request)("/api/organizations/department/".concat(r),y()({method:"DELETE",params:y()({},i)},t||{})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=c()(l()().mark((function e(n,t){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,T.request)("/api/organizations/member/page",y()({method:"POST",headers:{"Content-Type":"application/json"},data:n},t||{})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=t(16166),F=t(12322),V=t(9560),q=t(92336),_=t(29328),B=t(52296),H=t(73115),K=t(5135),G=t(70346),J=t(41778),X=t(21686),Q=t(28117),W=["current","pageSize","keyword"],$=function(){var e,n,t=(0,I.useState)([]),r=d()(t,2),i=r[0],s=r[1],o=(0,I.useState)([]),k=d()(o,2),y=k[0],z=k[1],C=(0,I.useState)(!1),E=d()(C,2),A=E[0],L=E[1],$=(0,I.useState)(),ee=d()($,2),ne=ee[0],te=ee[1],re=(0,I.useState)([]),ae=d()(re,2),ie=ae[0],le=ae[1],se=I.useState(""),ce=d()(se,2),oe=ce[0],de=ce[1],ue=u.Z.useApp(),pe=ue.message,xe=ue.modal,ve=(0,T.useModel)("@@initialState").initialState,he=I.useRef(),fe=I.useRef(),me=I.useRef(),ge=I.useRef(),je=(0,T.useRequest)(S.Mg,{onSuccess:function(e){if(le(e||[]),!ne&&(null==e?void 0:e.length)>0){var n=e[0];te(n),z([n.uuid]),s([n.uuid])}}}).refresh;return(0,P.jsx)(U.Z,{activateKey:R.z_.ORGANIZATION,children:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(p.Z,{children:[(0,P.jsx)(x.Z,{span:4,style:{paddingRight:6},children:(0,P.jsx)(v.Z,{title:"组织部门",styles:{body:{padding:12,height:"83vh",overflowY:"auto"}},extra:(0,P.jsx)(h.Z,{trigger:["click"],menu:{items:[{label:"企微组织架构",key:"wework",icon:(0,P.jsx)(F.Z,{})},{label:"钉钉组织架构",key:"dingtalk",icon:(0,P.jsx)(V.Z,{})}],onClick:(n=c()(l()().mark((function e(n){var t,r,a,i,s;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.key,L(!0),"wework"!==a){e.next=8;break}return e.next=5,(0,S.mT)({organization:null==ve||null===(t=ve.organization)||void 0===t?void 0:t.id});case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,(0,S.Bo)({organization:null==ve||null===(r=ve.organization)||void 0===r?void 0:r.id});case 10:e.t0=e.sent;case 11:i=e.t0,L(!1),null!=i&&i.success&&(pe.success("同步成功"),je(),null===(s=he.current)||void 0===s||s.reload());case 14:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},children:(0,P.jsx)(f.ZP,{type:"primary",icon:(0,P.jsx)(q.Z,{}),loading:A,children:"导入"})}),children:(0,P.jsx)(m.Z,{showLine:!0,blockNode:!0,treeData:ie||[],switcherIcon:function(e){return null!=e&&e.expanded?(0,P.jsx)(_.Z,{style:{fontSize:20}}):(0,P.jsx)(B.Z,{style:{fontSize:20}})},defaultExpandAll:!0,autoExpandParent:!0,selectedKeys:i,expandedKeys:y,onExpand:function(e){return z(e)},fieldNames:{title:"name",key:"uuid",children:"children"},onSelect:function(){var e=c()(l()().mark((function e(n,t){var r,a,i;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.selected,a=t.node,s(n),r&&(te(a),null===(i=he.current)||void 0===i||i.reload());case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),titleRender:function(e){return(0,P.jsxs)(g.Z,{style:{width:"100%",justifyContent:"space-between"},children:[(0,P.jsx)(j.Z.Text,{strong:!0,children:e.name}),(0,P.jsx)(h.Z,{trigger:["click"],menu:{items:[{label:"添加子部门",key:"CREATE_DEPARTMENT",icon:(0,P.jsx)(H.Z,{}),onClick:function(n){var t;n.domEvent.stopPropagation(),null===(t=ge.current)||void 0===t||t.callCreateView({params:{parentId:e.id,organizationId:e.organizationId,organizationName:e.organizationName}})}},{label:"编辑",key:"EDIT_DEPARTMENT",icon:(0,P.jsx)(K.Z,{}),onClick:function(n){var t;n.domEvent.stopPropagation(),null===(t=ge.current)||void 0===t||t.callUpdateView({record:e})}},{label:"删除",key:"DELETE",danger:!0,disabled:e.isRoot,icon:(0,P.jsx)(G.Z,{}),onClick:function(n){var t;n.domEvent.stopPropagation(),xe.confirm({title:"确认删除该部门？",onOk:(t=c()(l()().mark((function n(){var t,r;return l()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,D({id:e.id.toString()});case 2:null!=(t=n.sent)&&t.success&&(pe.success("删除成功"),je(),null===(r=he.current)||void 0===r||r.reload());case 4:case"end":return n.stop()}}),n)}))),function(){return t.apply(this,arguments)})})}}]},children:(0,P.jsx)(f.ZP,{size:"small",variant:"filled",icon:(0,P.jsx)(J.Z,{}),onClick:function(e){e.stopPropagation()}})},"options")]})}})})}),(0,P.jsx)(x.Z,{span:20,children:(0,P.jsx)(v.Z,{title:"组织成员",styles:{body:{padding:12,height:"83vh",overflowY:"auto"}},extra:(0,P.jsxs)(g.Z,{children:[(0,P.jsx)(b.Z.Search,{value:oe,style:{width:360},placeholder:"编号/名称/手机号/邮箱",enterButton:(0,P.jsx)(f.ZP,{type:"primary",icon:(0,P.jsx)(X.Z,{})}),onChange:function(e){return de(e.target.value)}}),(0,P.jsx)(f.ZP,{type:"primary",icon:(0,P.jsx)(H.Z,{}),onClick:function(){var e,n;null===(e=fe.current)||void 0===e||e.callCreateView({values:{departmentId:null==ne?void 0:ne.id},params:{departmentId:null==ne?void 0:ne.id,organizationId:null==ve||null===(n=ve.organization)||void 0===n?void 0:n.id}})},children:"添加成员"})]}),children:(0,P.jsx)(Q.Z,{rowKey:"uuid",size:"small",actionRef:he,tableAlertOptionRender:!1,tableAlertRender:!1,toolBarRender:!1,pagination:{pageSize:18},search:!1,params:{keyword:oe,departmentId:null==ne?void 0:ne.id,organizationId:null==ve||null===(e=ve.organization)||void 0===e?void 0:e.id},request:function(e){var n=e.current,t=void 0===n?1:n,r=e.pageSize,i=void 0===r?20:r,l=e.keyword,s=a()(e,W);return l&&Object.assign(s,{OR:[{serial:{contains:l}},{name:{contains:l}},{phone:{contains:l}},{email:{contains:l}}]}),function(e,n){return M.apply(this,arguments)}({current:t,pageSize:i,where:(0,N.kL)(s)})},columns:[{title:"所属部门",dataIndex:"departmentName",hideInForm:!0,search:!1},{title:"名称",dataIndex:"name"},{title:"编号",dataIndex:"serial",copyable:!0},{title:"手机号",dataIndex:"phone",copyable:!0},{title:"邮箱",dataIndex:"email",copyable:!0},{title:"岗位",dataIndex:"position",search:!1},{title:"状态",dataIndex:"activated",valueEnum:{true:"启用",false:"禁用"},search:!1},{title:"操作",dataIndex:"option",valueType:"option",render:function(e,n){return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(f.ZP,{type:"link",size:"small",onClick:function(){var e;null===(e=me.current)||void 0===e||e.open(n)},children:"设置"}),(0,P.jsx)(Z.Z,{title:"确定要删除该成员吗？",onConfirm:c()(l()().mark((function e(){var t,r;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.yP)(n.id);case 2:null!=(t=e.sent)&&t.success&&(pe.success("保存成功"),je(),null===(r=he.current)||void 0===r||r.reload());case 4:case"end":return e.stop()}}),e)}))),children:(0,P.jsx)(f.ZP,{danger:!0,size:"small",type:"link",style:{paddingRight:0},children:"删除"})},"reset")]})}}]})})})]}),(0,P.jsx)(w.Z,{}),(0,P.jsx)(O.Z,{title:"编辑部门",columns:[{name:"name",dataIndex:"name",title:"部门名称",rules:[{required:!0}]}],actionRef:ge,path:"api/organizations/department",saveCallback:function(){var e=c()(l()().mark((function e(n){var t;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.data,te(t),e.next=4,je();case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),(0,P.jsx)(O.Z,{title:"编辑成员",columns:[{name:"departmentId",dataIndex:"departmentId",widget:R.l9.AUTOCOMPLETE,title:"所属部门",reference:{method:"POST",path:"api/organizations/department/list"}},{name:"name",dataIndex:"name",title:"名称",rules:[{required:!0}]},{name:"email",dataIndex:"email",title:"邮箱",rules:[{required:!0}]},{name:"phone",dataIndex:"phone",title:"手机号"},{name:"position",dataIndex:"position",title:"岗位"}],actionRef:fe,path:"api/organizations/member",saveCallback:c()(l()().mark((function e(){var n;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(n=he.current)||void 0===n||n.reload();case 1:case"end":return e.stop()}}),e)})))}),(0,P.jsx)(Y,{actionRef:me,saveCallback:function(){var e;null===(e=he.current)||void 0===e||e.reload()}})]})})}},16166:function(e,n,t){t.d(n,{XV:function(){return d},c7:function(){return x},e7:function(){return p},kL:function(){return u},pM:function(){return o}});var r=t(335),a=t.n(r),i=t(26068),l=t.n(i),s=t(82092),c=t.n(s),o=function(e){try{return JSON.parse(e),!0}catch(e){return!1}},d=function(e){var n;return/[A-Za-z]/.test(null==e?void 0:e.substring(0,1))?null==e||null===(n=e.substring(0,1))||void 0===n?void 0:n.toUpperCase():null==e?void 0:e.substring(0,1)},u=function(e){return Object.keys(e).reduce((function(n,t){return null!==e[t]&&""!==e[t]?Object.assign(n,c()({},t,e[t])):n}),{})},p=function(e,n){var t,r=l()({},e),i=a()(n);try{for(i.s();!(t=i.n()).done;){var s=t.value;r.hasOwnProperty(s)&&delete r[s]}}catch(e){i.e(e)}finally{i.f()}return r},x=function(e,n){var t=document.createElement("script");t.type="text/javascript",t.src=e,t.onload=function(){console.log("Script loaded: ".concat(e)),n&&n()},t.onerror=function(){console.error("Failed to load script: ".concat(e))},document.head.appendChild(t)}}}]);