"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[784],{3557:function(n,t,e){e.r(t);var i=e(90228),r=e.n(i),a=e(87999),l=e.n(a),o=e(26068),c=e.n(o),s=e(14471),u=e(912),d=e(64684),p=e(92640),f=e(91283),h=e(56655),g=e(37714),v=e(74230),m=e(60247),x=e(50959),y=e(38653),j=e(7733),Z=e(28213),C=e(10218),I=e(16166),P=e(73115),k=e(33600),w=e(11527);t.default=function(){var n=(0,k.useModel)("@@initialState"),t=n.initialState,e=n.setInitialState,i=x.useRef();return(0,w.jsxs)(Z.Z,{actionRef:i,children:[(0,w.jsx)("div",{style:{padding:12,width:"100%"},children:(0,w.jsx)(s.Z,{direction:"vertical",style:{width:"100%"},children:(0,w.jsx)(u.Z,{title:"应用列表",style:{width:"100%"},styles:{body:{minHeight:"80vh"}},extra:(0,w.jsx)(d.ZP,{type:"primary",icon:(0,w.jsx)(P.Z,{}),onClick:function(){var n;null===(n=i.current)||void 0===n||n.callAppCreateView()},children:"创建应用"}),children:null!=t&&t.applications&&t.applications.length>0?(0,w.jsx)(p.Z,{itemLayout:"horizontal",dataSource:(null==t?void 0:t.applications)||[],grid:{gutter:16,column:3},style:{marginTop:12},renderItem:function(n){return(0,w.jsx)(p.Z.Item,{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:12,padding:24,border:"1px solid #E8E8E8",borderRadius:6,cursor:"pointer"},actions:[(0,w.jsx)(d.ZP,{type:"link",size:"small",onClick:function(){e((function(t){return c()(c()({},t),{},{application:n})})),localStorage.setItem(j.Qt.APPLICATIONID,n.uuid),k.history.push("/application/building")},children:"详情"},"edit"),(0,w.jsx)(d.ZP,{type:"link",size:"small",onClick:function(t){var e;null==t||t.stopPropagation(),null===(e=i.current)||void 0===e||e.callAppUpdateView(n)},children:"编辑"},"edit"),(0,w.jsx)(f.Z,{title:"删除之后将同步清楚应用所有配置数据，请确认是否删除~",onConfirm:function(){var i=l()(r()().mark((function i(a){var l,o,s,u,d;return r()().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return null==a||a.stopPropagation(),i.next=3,(0,C.e2)(n.id);case 3:if(null==(l=i.sent)||!l.success){i.next=10;break}return h.ZP.success("删除成功"),i.next=8,(0,C.rC)();case 8:null!=(o=i.sent)&&o.success&&o.data&&((null==t||null===(s=t.application)||void 0===s?void 0:s.uuid)===n.uuid?((d=null===(u=o.data)||void 0===u?void 0:u[0])?localStorage.setItem(j.Qt.APPLICATIONID,d.uuid):localStorage.removeItem(j.Qt.APPLICATIONID),e((function(n){return c()(c()({},n),{},{application:d,applications:o.data||[]})}))):e((function(n){return c()(c()({},n),{},{applications:o.data||[]})})));case 10:case"end":return i.stop()}}),i)})));return function(n){return i.apply(this,arguments)}}(),onCancel:function(){},children:(0,w.jsx)(d.ZP,{type:"link",size:"small",danger:!0,onClick:function(n){null==n||n.stopPropagation()},children:"删除"})},"delete")],onClick:l()(r()().mark((function t(){return r()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e((function(t){return c()(c()({},t),{},{application:n})})),localStorage.setItem(j.Qt.APPLICATIONID,n.uuid),k.history.push("/application/building");case 3:case"end":return t.stop()}}),t)}))),children:(0,w.jsxs)(s.Z,{size:"small",children:[(0,w.jsx)(p.Z.Item.Meta,{avatar:(0,w.jsx)(g.C,{src:n.logo,size:"large",children:(0,I.XV)(n.name)})}),(0,w.jsx)(v.Z.Title,{style:{marginBottom:0},level:5,children:n.name})]})})}}):(0,w.jsx)(m.Z,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:60},description:(0,w.jsx)(v.Z.Text,{strong:!0,children:"还没有应用，请先创建一个吧"}),children:(0,w.jsx)(d.ZP,{size:"large",type:"primary",icon:(0,w.jsx)(P.Z,{}),onClick:function(){var n;null===(n=i.current)||void 0===n||n.callAppCreateView()},children:"创建应用"})})})})}),(0,w.jsx)(y.Z,{})]})}},16166:function(n,t,e){e.d(t,{XV:function(){return u},c7:function(){return f},e7:function(){return p},kL:function(){return d},pM:function(){return s}});var i=e(335),r=e.n(i),a=e(26068),l=e.n(a),o=e(82092),c=e.n(o),s=function(n){try{return JSON.parse(n),!0}catch(n){return!1}},u=function(n){var t;return/[A-Za-z]/.test(null==n?void 0:n.substring(0,1))?null==n||null===(t=n.substring(0,1))||void 0===t?void 0:t.toUpperCase():null==n?void 0:n.substring(0,1)},d=function(n){return Object.keys(n).reduce((function(t,e){return null!==n[e]&&""!==n[e]?Object.assign(t,c()({},e,n[e])):t}),{})},p=function(n,t){var e,i=l()({},n),a=r()(t);try{for(a.s();!(e=a.n()).done;){var o=e.value;i.hasOwnProperty(o)&&delete i[o]}}catch(n){a.e(n)}finally{a.f()}return i},f=function(n,t){var e=document.createElement("script");e.type="text/javascript",e.src=n,e.onload=function(){console.log("Script loaded: ".concat(n)),t&&t()},e.onerror=function(){console.error("Failed to load script: ".concat(n))},document.head.appendChild(e)}}}]);