(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[506],{20544:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Cn}});var a=t(912),i=t(60247),r=t(74230),l=t(64684),s=t(50959),o=t(7733),u=t(28213),c=t(73115),d=t(33600),p=t(67825),f=t.n(p),m=t(15558),h=t.n(m),x=t(90228),v=t.n(x),j=t(87999),y=t.n(j),g=t(48305),Z=t.n(g),b=t(26068),I=t.n(b),C=t(45889),k=t(37956),E=t(70725),S=t(73264),w=t(31331),O=t(10754),T=t(14471),R=t(22825),N=t(37348),P=t(91283),D=t(23683),$=t(58643),A=t(30565),L=t(64155),M=t(71625),F=t(38653),_=t(81796),U=t(72002),V=t(21621),q=t(1002),z=t(10218),G=t(11527),B=function(){var e,n,t=(0,d.useModel)("@@initialState"),a=t.initialState,i=t.setInitialState,r=s.useRef();return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(U.Z,{title:"切换应用",placement:"rightTop",trigger:["click"],content:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(V.Z,{mode:"inline",style:{width:"100%",borderRight:"none"},selectedKeys:null!=a&&a.application?[null==a||null===(e=a.application)||void 0===e?void 0:e.appId]:[],items:null==a||null===(n=a.applications)||void 0===n?void 0:n.map((function(e){return{key:e.appId,label:e.name}})),onSelect:function(e){var n,t=e.key,r=null==a||null===(n=a.applications)||void 0===n?void 0:n.find((function(e){return e.appId===t}));r&&(localStorage.setItem(o.Qt.APPLICATIONID,r.uuid),i((function(e){return I()(I()({},e),{},{application:r})})))}}),(0,G.jsx)(w.Z,{title:"切换应用",children:(0,G.jsx)(l.ZP,{block:!0,ghost:!0,icon:(0,G.jsx)(c.Z,{}),type:"primary",onClick:function(){var e;null===(e=r.current)||void 0===e||e.callCreateView()},children:"创建应用"})})]}),children:(0,G.jsx)(l.ZP,{ghost:!0,type:"primary",icon:(0,G.jsx)(q.Z,{})})}),(0,G.jsx)(_.Z,{title:"编辑应用",columns:[{name:"name",dataIndex:"name",title:"应用名称(英文)",rules:[{required:!0},{pattern:/^[a-zA-Z0-9_-]{4,32}$/,message:"4-32个字符,包含英文、数字、-、_"}]},{name:"title",dataIndex:"title",title:"应用标题",rules:[{required:!0}]},{name:"type",dataIndex:"type",title:"应用类型",widget:o.l9.SELECT,rules:[{required:!0,message:"请选择应用类型"}],options:[{label:"前端应用(Ant Design Pro)",value:o.pR.WEBAPP},{label:"后端应用(NestJS)",value:o.pR.NESTJS}]}],actionRef:r,path:"api/applications/application",saveCallback:function(){var e=y()(v()().mark((function e(n){var t,a,r;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.data,localStorage.setItem(o.Qt.APPLICATIONID,null==t?void 0:t.uuid),e.next=4,(0,z.rC)();case 4:null!=(a=e.sent)&&a.success&&a.data&&(r=a.data.find((function(e){return e.uuid===(null==t?void 0:t.uuid)})),i((function(e){return I()(I()({},e),{},{applications:a.data||[],application:r})})));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})]})},J=t(83745),H=t(29328),W=t(52296),Q=t(5135),Y=t(70346),K=t(41778),X=t(29217),ee=t(20869),ne=t(92336),te=t(13603),ae=t(20947),ie=t(35363),re=t(45470),le=t(90943),se=t.n(le),oe=t(37024),ue=t(19504),ce=t(80434),de=function(e){var n=e.modalRef,t=(0,s.useState)(!1),a=Z()(t,2),i=a[0],r=a[1],u=(0,s.useState)(!1),c=Z()(u,2),d=c[0],p=c[1],f=(0,s.useState)(),m=Z()(f,2),h=m[0],x=m[1],j=(0,s.useState)(),g=Z()(j,2),b=g[0],I=g[1],C=k.Z.useApp().message,E=function(){var e=y()(v()().mark((function e(n){var t,a,i,r=arguments;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.length>1&&void 0!==r[1]?r[1]:o.GM.MODULE,p(!0),i=null,a!==o.GM.MODULE){e.next=9;break}return e.next=6,(0,z.rN)(n.id);case 6:i=e.sent,e.next=42;break;case 9:if(a!==o.GM.CONTROLLER){e.next=15;break}return e.next=12,(0,z.HV)(n.id);case 12:i=e.sent,e.next=42;break;case 15:if(a!==o.GM.SERVICE){e.next=21;break}return e.next=18,(0,z.lw)(n.id);case 18:i=e.sent,e.next=42;break;case 21:if(a!==o.GM.MODEL){e.next=27;break}return e.next=24,(0,z.FH)(n.id);case 24:i=e.sent,e.next=42;break;case 27:if(a!==o.GM.DTO){e.next=33;break}return e.next=30,(0,z.Xi)(n.id);case 30:i=e.sent,e.next=42;break;case 33:if(a!==o.GM.VO){e.next=39;break}return e.next=36,(0,z.pc)(n.id);case 36:i=e.sent,e.next=42;break;case 39:return e.next=41,(0,z.Q3)(n.id);case 41:i=e.sent;case 42:p(!1),null!==(t=i)&&void 0!==t&&t.success&&x(i.data);case 44:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,s.useImperativeHandle)(n,(function(){return{open:function(e,n){r(!0),I(e),E(e,n)}}})),(0,G.jsx)(ie.Z,{width:1200,title:"代码预览",destroyOnClose:!0,centered:!0,maskClosable:!1,open:i||!1,onCancel:function(){r(!1)},afterClose:function(){},footer:(0,G.jsxs)(G.Fragment,{children:[h&&(0,G.jsx)(se(),{text:h,onCopy:function(){C.success("拷贝成功")},children:(0,G.jsx)(l.ZP,{ghost:!0,type:"primary",icon:(0,G.jsx)(ce.Z,{}),children:"拷贝代码"})}),(0,G.jsx)(l.ZP,{type:"primary",onClick:function(){r(!0)},children:"确认"})]}),children:(0,G.jsx)(re.Z,{onChange:function(){var e=y()(v()().mark((function e(n){return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b&&E(b,n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),items:[{label:"Module",key:o.GM.MODULE,children:(0,G.jsx)(N.Z,{spinning:d,children:h&&(0,G.jsx)(ue.ZP,{value:h,height:"700px",style:{width:"100%"},extensions:[(0,oe.eJ)({jsx:!0,typescript:!0})],onChange:function(){}})})},{label:"Controller",key:o.GM.CONTROLLER,children:(0,G.jsx)(N.Z,{spinning:d,children:h&&(0,G.jsx)(ue.ZP,{value:h,height:"700px",style:{width:"100%"},extensions:[(0,oe.eJ)({jsx:!0,typescript:!0})],onChange:function(){}})})},{label:"Service",key:o.GM.SERVICE,children:(0,G.jsx)(N.Z,{spinning:d,children:h&&(0,G.jsx)(ue.ZP,{value:h,height:"700px",style:{width:"100%"},extensions:[(0,oe.eJ)({jsx:!0,typescript:!0})],onChange:function(){}})})},{label:"Entity",key:o.GM.ENTITY,children:(0,G.jsx)(N.Z,{spinning:d,children:h&&(0,G.jsx)(ue.ZP,{value:h,height:"700px",style:{width:"100%"},extensions:[(0,oe.eJ)({jsx:!0,typescript:!0})],onChange:function(){}})})},{label:"DTO",key:o.GM.DTO,children:(0,G.jsx)(N.Z,{spinning:d,children:h&&(0,G.jsx)(ue.ZP,{value:h,height:"700px",style:{width:"100%"},extensions:[(0,oe.eJ)({jsx:!0,typescript:!0})],onChange:function(){}})})},{label:"VO",key:o.GM.VO,children:(0,G.jsx)(N.Z,{spinning:d,children:h&&(0,G.jsx)(ue.ZP,{value:h,height:"700px",style:{width:"100%"},extensions:[(0,oe.eJ)({jsx:!0,typescript:!0})],onChange:function(){}})})},{label:"Model",key:o.GM.MODEL,children:(0,G.jsx)(N.Z,{spinning:d,children:h&&(0,G.jsx)(ue.ZP,{value:h,height:"700px",style:{width:"100%"},extensions:[(0,oe.eJ)({jsx:!0,typescript:!0})],onChange:function(){}})})}]})})},pe=t(47113),fe=t(17906),me=t(11204),he=t(45144),xe=t(17621),ve=t(89178),je=t(1123),ye=t.n(je),ge=t(46611),Ze=["key","name"],be=["key","name"],Ie=function(e){var n=e.saveCallback,t=e.actionRef,i=e.entity,r=(0,s.useState)(!1),u=Z()(r,2),d=u[0],p=u[1],m=(0,s.useState)(o.fS.STRING),h=Z()(m,2),x=h[0],j=h[1],g=(0,s.useState)(o.kN.ORDINARY),b=Z()(g,2),C=b[0],E=b[1],S=(0,s.useState)(!1),w=Z()(S,2),O=w[0],R=w[1],N=(0,s.useState)(),P=Z()(N,2),D=P[0],$=P[1],A=(0,s.useState)(!1),L=Z()(A,2),M=L[0],F=L[1],_=(0,s.useState)(),U=Z()(_,2),V=U[0],q=U[1],B=(0,s.useState)([]),J=Z()(B,2),H=J[0],W=J[1],Q=(0,s.useState)([]),Y=Z()(Q,2),K=Y[0],X=Y[1],ee=(0,s.useState)(),ne=Z()(ee,2),te=ne[0],ae=ne[1],ie=k.Z.useApp().message,re=pe.Z.useForm(),le=Z()(re,1)[0];return s.useImperativeHandle(t,(function(){return{open:function(e){var n=e.record;$(n),F(!0),R(n.primary||!1),E(n.scene||o.kN.ORDINARY),j(n.type||o.fS.STRING),le.setFieldsValue(n)},closeView:function(){F(!1)}}})),(0,G.jsx)(fe.Z,{width:600,title:"表字段高级配置",placement:"right",destroyOnClose:!0,maskClosable:!1,open:M,extra:(0,G.jsxs)(T.Z,{children:[(0,G.jsx)(l.ZP,{onClick:function(){F(!1)},children:"取消"}),(0,G.jsx)(l.ZP,{type:"primary",loading:d,onClick:y()(v()().mark((function e(){var t,a,r;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.validateFields();case 2:if(t=e.sent,a=ie.loading("正在配置"),!D){e.next=21;break}return e.prev=5,p(!0),V&&Object.assign(t,{relatedId:V.id,entityName:null==i?void 0:i.name,reference:I()(I()({},null==t?void 0:t.reference),{},{relatedName:t.relatedName})}),e.next=10,(0,z.HB)(D.id,t);case 10:null!=(r=e.sent)&&r.success&&(ie.success("保存成功"),F(!1),null==n||n(null==r?void 0:r.data)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),ie.error("保存失败请重试！");case 17:return e.prev=17,p(!1),a(),e.finish(17);case 21:case"end":return e.stop()}}),e,null,[[5,14,17,21]])}))),children:"保存"})]}),onClose:function(){F(!1),le.resetFields(),R(!1),$(void 0),W([]),X([]),ae(void 0)},children:(0,G.jsxs)(pe.Z,{form:le,children:[(0,G.jsx)(pe.Z.Item,{label:"字段命名",name:"name",children:(0,G.jsx)(me.Z,{placeholder:"请输入字段命名"})}),(0,G.jsx)(pe.Z.Item,{label:"备注",name:"comment",children:(0,G.jsx)(me.Z,{placeholder:"请输入字段备注"})}),(0,G.jsx)(pe.Z.Item,{label:"详细描述",name:"description",children:(0,G.jsx)(me.Z,{placeholder:"请输入字段详细描述"})}),(0,G.jsx)(pe.Z.Item,{label:"字段类型",name:"type",children:(0,G.jsxs)(he.default,{placeholder:"请选择字段类型",onChange:function(e){return j(e)},children:[(0,G.jsx)(he.default.Option,{value:"String",children:"String"}),(0,G.jsx)(he.default.Option,{value:"Boolean",children:"Boolean"}),(0,G.jsx)(he.default.Option,{value:"Int",children:"Int"}),(0,G.jsx)(he.default.Option,{value:"BigInt",children:"BigInt"}),(0,G.jsx)(he.default.Option,{value:"Float",children:"Float"}),(0,G.jsx)(he.default.Option,{value:"Decimal",children:"Decimal"}),(0,G.jsx)(he.default.Option,{value:"DateTime",children:"DateTime"}),(0,G.jsx)(he.default.Option,{value:"Json",children:"Json"}),(0,G.jsx)(he.default.Option,{value:"Bytes",children:"Bytes"})]})}),(0,G.jsx)(pe.Z.Item,{label:"字段场景",name:"scene",children:(0,G.jsxs)(he.default,{placeholder:"请选择字段场景",onChange:function(e){return E(e)},children:[(0,G.jsx)(he.default.Option,{value:"ORDINARY",children:"通用"}),(0,G.jsx)(he.default.Option,{value:"ENUM",children:"枚举"}),(0,G.jsx)(he.default.Option,{value:"UUID",children:"UUID"}),(0,G.jsx)(he.default.Option,{value:"CREATED",children:"创建时间"}),(0,G.jsx)(he.default.Option,{value:"UPDATED",children:"更新时间"}),(0,G.jsx)(he.default.Option,{value:"FOREIGN",children:"外键"}),(0,G.jsx)(he.default.Option,{value:"PARENT",children:"父级外键"}),(0,G.jsx)(he.default.Option,{value:"CHILDREN",children:"子级外键"})]})}),(0,G.jsx)(pe.Z.Item,{label:"原始类型",name:"dbtype",children:(0,G.jsxs)(he.default,{placeholder:"请选择字段原始类型",children:[(0,G.jsx)(he.default.Option,{value:"VarChar",children:"VarChar"}),(0,G.jsx)(he.default.Option,{value:"Text",children:"Text"}),(0,G.jsx)(he.default.Option,{value:"Int",children:"Int"}),(0,G.jsx)(he.default.Option,{value:"TinyInt",children:"TinyInt"}),(0,G.jsx)(he.default.Option,{value:"BigInt",children:"BigInt"}),(0,G.jsx)(he.default.Option,{value:"Decimal",children:"Decimal"}),(0,G.jsx)(he.default.Option,{value:"Date",children:"Date"}),(0,G.jsx)(he.default.Option,{value:"DateTime",children:"DateTime"})]})}),(0,G.jsx)(pe.Z.Item,{label:"筛选类型",name:"operator",children:(0,G.jsxs)(he.default,{placeholder:"请选择筛选类型",children:[(0,G.jsx)(he.default.Option,{value:o.T0.Equals,children:"equals"}),(0,G.jsx)(he.default.Option,{value:o.T0.In,children:"in"}),(0,G.jsx)(he.default.Option,{value:o.T0.NotIn,children:"notIn"}),(0,G.jsx)(he.default.Option,{value:o.T0.Lt,children:"lt"}),(0,G.jsx)(he.default.Option,{value:o.T0.Lte,children:"lte"}),(0,G.jsx)(he.default.Option,{value:o.T0.Gt,children:"gt"}),(0,G.jsx)(he.default.Option,{value:o.T0.Gte,children:"gte"}),(0,G.jsx)(he.default.Option,{value:o.T0.Contains,children:"contains"}),(0,G.jsx)(he.default.Option,{value:o.T0.StartsWith,children:"startsWith"}),(0,G.jsx)(he.default.Option,{value:o.T0.EndsWith,children:"endsWith"})]})}),x===o.fS.JSON&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(pe.Z.Item,{label:"JSON值类型",name:["apiProperty","type"],children:(0,G.jsx)(he.default,{placeholder:"请选择JSON值类型",onChange:function(e){return ae(e)},options:[{label:"Object",value:"Object"},{label:"ObjectArray",value:"ObjectArray"},{label:"StringArray",value:"StringArray"},{label:"NumberArray",value:"NumberArray"},{label:"BooleanArray",value:"BooleanArray"},{label:"AnyArray",value:"AnyArray"},{label:"OneOf",value:"OneOf"}]})}),"OneOf"===te&&(0,G.jsx)(pe.Z.Item,{label:"OneOf",name:["apiProperty","oneOf"],children:(0,G.jsx)(he.default,{placeholder:"请选择",mode:"multiple",options:[{label:"string",value:"string"},{label:"number",value:"number"},{label:"boolean",value:"boolean"}]})})]}),x===o.fS.STRING&&(0,G.jsx)(pe.Z.Item,{label:"长度",name:"len",children:(0,G.jsx)(xe.Z,{type:"number",placeholder:"请输入长度"})}),(0,G.jsx)(pe.Z.Item,{label:"默认值",name:"default",children:(0,G.jsx)(me.Z,{placeholder:"请输入字段默认值"})}),x===o.fS.DECIMAL&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(pe.Z.Item,{label:"精度",name:"precision",children:(0,G.jsx)(xe.Z,{type:"number",placeholder:"请输入精度"})}),(0,G.jsx)(pe.Z.Item,{label:"范围",name:"scale",children:(0,G.jsx)(xe.Z,{type:"number",placeholder:"请输入范围"})})]}),(0,G.jsx)(pe.Z.Item,{label:"是否主键",name:"primary",valuePropName:"checked",children:(0,G.jsx)(ve.Z,{onChange:function(e){return R(e)}})}),(0,G.jsx)(pe.Z.Item,{label:"允许空值",name:"nullable",valuePropName:"checked",children:(0,G.jsx)(ve.Z,{disabled:O})}),(0,G.jsx)(pe.Z.Item,{label:"唯一约束",name:"unique",valuePropName:"checked",children:(0,G.jsx)(ve.Z,{disabled:O})}),C===o.kN.ENUM&&(0,G.jsx)(pe.Z.Item,{label:"枚举配置",children:(0,G.jsx)(pe.Z.List,{name:"enums",children:function(e,n){var t=n.add,a=n.remove;return(0,G.jsxs)(G.Fragment,{children:[e.map((function(e){var n=e.key,t=e.name,i=f()(e,Ze);return(0,G.jsxs)(T.Z,{style:{display:"flex",marginBottom:8},align:"baseline",children:[(0,G.jsx)(pe.Z.Item,I()(I()({},i),{},{name:[t,"label"],children:(0,G.jsx)(me.Z,{placeholder:"请输入标题"})})),(0,G.jsx)(pe.Z.Item,I()(I()({},i),{},{name:[t,"key"],children:(0,G.jsx)(me.Z,{placeholder:"请输入Key"})})),(0,G.jsx)(pe.Z.Item,I()(I()({},i),{},{name:[t,"value"],rules:[{required:!0,message:"请输入Value"}],children:(0,G.jsx)(me.Z,{type:[o.fS.INT,o.fS.BIGINT,o.fS.FLOAT].includes(x)?"number":"text",placeholder:"请输入Value"})})),(0,G.jsx)(ge.Z,{onClick:function(){return a(t)}})]},n)})),(0,G.jsx)(pe.Z.Item,{children:(0,G.jsx)(l.ZP,{type:"dashed",onClick:function(){return t()},block:!0,icon:(0,G.jsx)(c.Z,{}),children:"添 加"})})]})}})}),C===o.kN.FOREIGN&&(0,G.jsxs)(a.Z,{size:"small",title:"reference",children:[(0,G.jsx)(pe.Z.Item,{label:"类型",name:["reference","type"],rules:[{required:!0,message:"请选择关联类型"}],children:(0,G.jsx)(he.default,{placeholder:"请选择关联类型",onChange:function(e){i&&("OneToOne"===e?le.setFieldValue("relatedName",i.name):le.setFieldValue("relatedName",ye()(i.name)))},options:[{label:"ManyToOne",value:"ManyToOne"},{label:"OneToOne",value:"OneToOne"},{label:"ManyToMany",value:"ManyToMany"}]})}),(0,G.jsx)(pe.Z.Item,{label:"外键关联对象",name:["reference","entity"],rules:[{required:!0,message:"请选择外键关联对象"}],children:(0,G.jsx)(he.default,{placeholder:"请选择外键关联对象",showSearch:!0,onFocus:y()(v()().mark((function e(){var n;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=5;break}return e.next=3,(0,z.os)(i.id);case 3:(n=e.sent).success&&W(n.data||[]);case 5:case"end":return e.stop()}}),e)}))),options:H.map((function(e){return{label:e.name,value:e.name}})),onChange:function(){var e=y()(v()().mark((function e(n){var t;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=H.find((function(e){return e.name===n})),q(t),X((null==t?void 0:t.fields)||[]),le.setFieldsValue({relatedId:null==t?void 0:t.id,reference:{path:null==t?void 0:t.npath}});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})}),(0,G.jsx)(pe.Z.Item,{label:"外键关联字段",name:["reference","references"],initialValue:"id",children:(0,G.jsx)(he.default,{showSearch:!0,placeholder:"请选择外键关联字段",options:K.map((function(e){return{label:e.name,value:e.name}}))})}),(0,G.jsx)(pe.Z.Item,{label:"映射对象字段",name:["reference","fields"],initialValue:"".concat(null==D?void 0:D.name,"Id"),children:(0,G.jsx)(me.Z,{placeholder:"请输入映射对象字段"})}),(0,G.jsx)(pe.Z.Item,{label:"外键关联路径",name:["reference","path"],children:(0,G.jsx)(me.Z,{placeholder:"请输入外键关联路径"})}),(0,G.jsx)(pe.Z.Item,{label:"删除关联时",name:["reference","onDelete"],initialValue:"Cascade",children:(0,G.jsx)(he.default,{placeholder:"请选择删除关联时动作",options:[{label:"Cascade",value:"Cascade"},{label:"Restrict",value:"Restrict"},{label:"SetNull",value:"SetNull"},{label:"SetDefault",value:"SetDefault"},{label:"NoAction",value:"NoAction"}]})}),(0,G.jsx)(pe.Z.Item,{label:"更新关联时",name:["reference","onUpdate"],initialValue:"Cascade",children:(0,G.jsx)(he.default,{placeholder:"请选择更新关联时动作",options:[{label:"Cascade",value:"Cascade"},{label:"Restrict",value:"Restrict"},{label:"SetNull",value:"SetNull"},{label:"SetDefault",value:"SetDefault"},{label:"NoAction",value:"NoAction"}]})}),(0,G.jsx)(pe.Z.Item,{label:"反向外键名称",name:"relatedName",children:(0,G.jsx)(me.Z,{placeholder:"反向外键名称"})})]}),C===o.kN.FILE&&(0,G.jsxs)(a.Z,{size:"small",title:"props",children:[(0,G.jsx)(pe.Z.Item,{label:"accept",name:["props","accept"],children:(0,G.jsx)(me.Z,{placeholder:"请输入Accept属性"})}),(0,G.jsx)(pe.Z.Item,{label:"action",name:["props","action"],children:(0,G.jsx)(me.Z,{placeholder:"请输入action属性"})}),(0,G.jsx)(pe.Z.Item,{label:"maxCount",name:["props","maxCount"],children:(0,G.jsx)(xe.Z,{type:"number",placeholder:"请输入maxCount属性"})}),(0,G.jsx)(pe.Z.Item,{label:"directory",name:["props","directory"],valuePropName:"checked",children:(0,G.jsx)(ve.Z,{})}),(0,G.jsx)(pe.Z.Item,{label:"multiple",name:["props","multiple"],valuePropName:"checked",children:(0,G.jsx)(ve.Z,{})})]}),(0,G.jsx)(a.Z,{size:"small",title:"rules",children:(0,G.jsx)(pe.Z.Item,{label:"",children:(0,G.jsx)(pe.Z.List,{name:"rules",children:function(e,n){var t=n.add,a=n.remove;return(0,G.jsxs)(G.Fragment,{children:[e.map((function(e){var n=e.key,t=e.name,i=f()(e,be);return(0,G.jsxs)(T.Z,{style:{display:"flex",marginBottom:8},align:"baseline",children:[(0,G.jsx)(pe.Z.Item,I()(I()({},i),{},{name:[t,"type"],children:(0,G.jsx)(he.default,{showSearch:!0,placeholder:"请选择校验类型",filterOption:function(e,n){var t,a,i;return null===(t=null!==(a=null==n||null===(i=n.label)||void 0===i?void 0:i.toString())&&void 0!==a?a:"")||void 0===t?void 0:t.toLowerCase().includes(e.toLowerCase())},options:Object.entries(o.R9).map((function(e){var n=Z()(e,2),t=n[0];return{label:n[1],value:t}}))})})),(0,G.jsx)(pe.Z.Item,I()(I()({},i),{},{name:[t,"value"],children:(0,G.jsx)(me.Z,{placeholder:"请输入值"})})),(0,G.jsx)(pe.Z.Item,I()(I()({},i),{},{name:[t,"message"],children:(0,G.jsx)(me.Z,{placeholder:"请输入提示语"})})),(0,G.jsx)(ge.Z,{onClick:function(){return a(t)}})]},n)})),(0,G.jsx)(pe.Z.Item,{children:(0,G.jsx)(l.ZP,{type:"dashed",onClick:function(){return t()},block:!0,icon:(0,G.jsx)(c.Z,{}),children:"添 加"})})]})}})})})]})})},Ce=t(56655),ke=["key","name"],Ee=function(e){var n=e.saveCallback,t=e.actionRef,a=(0,s.useState)(!1),i=Z()(a,2),r=i[0],o=i[1],u=(0,s.useState)(),d=Z()(u,2),p=d[0],m=d[1],h=(0,s.useState)([]),x=Z()(h,2),j=x[0],g=x[1],b=(0,s.useState)(!1),C=Z()(b,2),k=C[0],E=C[1],S=pe.Z.useForm(),w=Z()(S,1)[0];return s.useImperativeHandle(t,(function(){return{open:(e=y()(v()().mark((function e(n){var t;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(n),E(!0),e.next=4,(0,z.vW)({entityId:null==n?void 0:n.id});case 4:(t=e.sent).success&&g(t.data||[]),w.setFieldsValue({tableName:n.tableName,uniques:n.uniques||[]});case 7:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)}),closeView:function(){E(!1)}};var e})),(0,G.jsx)(fe.Z,{width:600,title:"编辑",placement:"right",destroyOnClose:!0,maskClosable:!0,open:k,extra:(0,G.jsxs)(T.Z,{children:[(0,G.jsx)(l.ZP,{onClick:function(){E(!1)},children:"取消"}),(0,G.jsx)(l.ZP,{type:"primary",loading:r,onClick:y()(v()().mark((function e(){var t,a,i;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.validateFields();case 2:return t=e.sent,a=Ce.ZP.loading("正在配置"),e.prev=4,o(!0),e.next=8,(0,z.Ik)(I()({entity:null==p?void 0:p.id},t));case 8:null!=(i=e.sent)&&i.success&&(Ce.ZP.success("保存成功"),E(!1),null==n||n(null==i?void 0:i.data)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),Ce.ZP.error("保存失败请重试！");case 15:return e.prev=15,o(!1),a(),e.finish(15);case 19:case"end":return e.stop()}}),e,null,[[4,12,15,19]])}))),children:"保存"})]}),onClose:function(){E(!1),w.resetFields()},children:(0,G.jsxs)(pe.Z,{form:w,children:[(0,G.jsx)(pe.Z.Item,{label:"@@map",name:"tableName",children:(0,G.jsx)(me.Z,{placeholder:"请输入表名"})}),(0,G.jsx)(pe.Z.Item,{label:"@@unique",children:(0,G.jsx)(pe.Z.List,{name:"uniques",children:function(e,n){var t=n.add,a=n.remove;return(0,G.jsxs)(G.Fragment,{children:[e.map((function(e){var n=e.key,t=e.name,i=f()(e,ke);return(0,G.jsxs)(T.Z,{style:{display:"flex",marginBottom:8},align:"baseline",children:[(0,G.jsx)(pe.Z.Item,I()(I()({},i),{},{name:[t,"fields"],children:(0,G.jsx)(he.default,{showSearch:!0,mode:"multiple",style:{width:240},placeholder:"请选择字段",options:j.map((function(e){return{label:e.name,value:e.name}}))})})),(0,G.jsx)(pe.Z.Item,I()(I()({},i),{},{name:[t,"name"],children:(0,G.jsx)(me.Z,{placeholder:"请输入组合键名称"})})),(0,G.jsx)(ge.Z,{onClick:function(){return a(t)}})]},n)})),(0,G.jsx)(pe.Z.Item,{children:(0,G.jsx)(l.ZP,{type:"dashed",onClick:function(){return t()},block:!0,icon:(0,G.jsx)(c.Z,{}),children:"添 加"})})]})}})})]})})},Se=["entityId"],we=[{title:"名称",dataIndex:"name"},{title:"备注",dataIndex:"comment"},{title:"数据类型",tooltip:"对应Prisma字段类型",dataIndex:"type",valueType:"select",valueEnum:{String:"String",Boolean:"Boolean",Int:"Int",BigInt:"BigInt",Float:"Float",Decimal:"Decimal",DateTime:"DateTime",Json:"Json",Bytes:"Bytes",Unsupported:"Unsupported"}},{title:"字段场景",tooltip:"常见字段场景",dataIndex:"scene",valueType:"select",valueEnum:{ORDINARY:"通用",ENUM:"枚举",UUID:"UUID",CREATED:"创建时间",UPDATED:"更新时间",FOREIGN:"外键",PARENT:"父级外键",CHILDREN:"子级外键"}},{title:"是否主键",dataIndex:"primary",valueType:"switch",initialValue:!1},{title:"允许空值",dataIndex:"nullable",valueType:"switch",initialValue:!0},{title:"长度",dataIndex:"len",valueType:"digit"},{title:"默认值",dataIndex:"default"}],Oe=(0,A.W6)((function(){return(0,G.jsx)(J.Z,{style:{cursor:"grab",color:"#999"}})})),Te=(0,A.W8)((function(e){return(0,G.jsx)("tr",I()({},e))})),Re=(0,A.JN)((function(e){return(0,G.jsx)("tbody",I()({},e))})),Ne=function(e){var n=e.application,t=k.Z.useApp(),u=t.modal,d=t.message,p=(0,s.useState)(),m=Z()(p,2),x=m[0],j=m[1],g=(0,s.useState)(!1),b=Z()(g,2),A=b[0],U=b[1],V=(0,s.useState)([]),q=Z()(V,2),J=q[0],ie=q[1],re=(0,s.useState)([]),le=Z()(re,2),se=le[0],oe=le[1],ue=(0,s.useState)([]),ce=Z()(ue,2),pe=ce[0],fe=ce[1],me=(0,s.useState)(),he=Z()(me,2),xe=he[0],ve=he[1],je=(0,s.useState)([]),ye=Z()(je,2),ge=ye[0],Ze=ye[1],be=(0,s.useState)([]),Ce=Z()(be,2),ke=Ce[0],Ne=Ce[1],Pe=s.useRef(),De=s.useRef(),$e=s.useRef(),Ae=s.useRef(),Le=s.useRef(),Me=s.useRef(),Fe=(0,C.Z)(z.YE,{manual:!0,onSuccess:function(e){if(ie(e.data),e.data.length>0){var n=localStorage.getItem(o.Qt.EDIT_NEST_MODULE);if(n){var t=JSON.parse(n);oe([t.uuid]),fe([t.uuid])}else{var a;fe([null===(a=e.data[0])||void 0===a?void 0:a.uuid])}}}}),_e=Fe.run,Ue=Fe.loading,Ve=Fe.refresh,qe=(0,C.Z)(z.vW,{manual:!0,onSuccess:function(e){Ne(e.data||[])}}),ze=qe.run,Ge=qe.loading,Be=qe.refresh,Je=(0,C.Z)(z.Db,{manual:!0,onSuccess:function(e){var n;j(e.data),ze({entityId:null===(n=e.data)||void 0===n?void 0:n.id})}}).run,He=(0,C.Z)(z.h8,{manual:!0,onSuccess:function(e){ve(e.data)}}).run;(0,s.useEffect)((function(){var e=localStorage.getItem(o.Qt.EDIT_NEST_MODULE);if(e){var t=JSON.parse(e);t.applicationId===(null==n?void 0:n.id)?Promise.all([He({id:t.id}),Je({moduleId:t.id})]):(ve(void 0),j(void 0),Ne([]))}else ve(void 0),j(void 0),Ne([])}),[n]);var We,Qe=s.useMemo((function(){return(null==ge?void 0:ge.length)>0?we:[{title:"Sort",dataIndex:"sort",width:60,className:"drag-visible",render:function(){return(0,G.jsx)(Oe,{})}}].concat(we)}),[ge]);return s.useEffect((function(){n&&_e({applicationId:n.id})}),[n]),(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(E.Z,{children:[(0,G.jsx)(S.Z,{span:4,children:(0,G.jsx)(a.Z,{title:"应用模块",styles:{body:{height:"83vh",overflowY:"auto"}},loading:Ue,extra:(0,G.jsx)(w.Z,{title:"切换应用",children:(0,G.jsx)(B,{})}),children:(0,G.jsx)(O.Z,{showLine:!0,blockNode:!0,treeData:J,switcherIcon:function(e){return null!=e&&e.expanded?(0,G.jsx)(H.Z,{style:{fontSize:20}}):(0,G.jsx)(W.Z,{style:{fontSize:20}})},expandedKeys:pe,selectedKeys:se,fieldNames:{title:"title",key:"uuid",children:"children"},onExpand:function(e){fe(e)},onSelect:function(){var e=y()(v()().mark((function e(n,t){var a;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.node,oe(n),!a.isLeaf){e.next=6;break}return e.next=5,Promise.all([He({id:a.id}),Je({moduleId:a.id})]);case 5:localStorage.setItem(o.Qt.EDIT_NEST_MODULE,JSON.stringify({id:a.id,applicationId:a.applicationId,uuid:a.uuid}));case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),titleRender:function(e){return(0,G.jsxs)(T.Z,{style:{width:"100%",justifyContent:"space-between"},children:[(0,G.jsx)(r.Z.Text,{strong:!0,children:e.name}),(0,G.jsx)(R.Z,{trigger:["click"],menu:{items:[null!=e&&e.isRoot?{label:"添加文件夹",key:"CREATE_FOLDER",icon:(0,G.jsx)(c.Z,{}),onClick:function(t){var a;t.domEvent.stopPropagation(),null===(a=De.current)||void 0===a||a.callCreateView({params:{parentId:e.id,applicationId:n.id,isRoot:!1,isFolder:!0}})}}:null,null!=e&&e.isFolder?{label:"添加模块",key:"CREATE_MODULE",icon:(0,G.jsx)(c.Z,{}),onClick:function(t){var a;t.domEvent.stopPropagation(),null===(a=Pe.current)||void 0===a||a.callCreateView({params:{parentId:e.id,applicationId:n.id,isRoot:!1,isLeaf:!0}})}}:null,null!=e&&e.isFolder?{label:"编辑文件夹",key:"EDIT_FOLDER",icon:(0,G.jsx)(Q.Z,{}),onClick:function(n){var t;n.domEvent.stopPropagation(),null===(t=Pe.current)||void 0===t||t.callUpdateView({record:e,params:{id:e.id}})}}:null,null!=e&&e.isLeaf?{label:"编辑模块",key:"EDIT_FOLDER",icon:(0,G.jsx)(Q.Z,{}),onClick:function(n){var t;n.domEvent.stopPropagation(),null===(t=Pe.current)||void 0===t||t.callUpdateView({record:e,params:{id:e.id}})}}:null,{label:"删除",key:"DELETE",danger:!0,icon:(0,G.jsx)(Y.Z,{}),onClick:function(n){var t;n.domEvent.stopPropagation(),u.confirm({title:"确认删除该对象？",onOk:(t=y()(v()().mark((function n(){var t;return v()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,z.wI)(e.id);case 2:null!=(t=n.sent)&&t.success&&(d.success("删除成功"),e.uuid===(null==xe?void 0:xe.uuid)&&ve(void 0),Ve());case 4:case"end":return n.stop()}}),n)}))),function(){return t.apply(this,arguments)})})}}]},children:(0,G.jsx)(l.ZP,{size:"small",variant:"filled",icon:(0,G.jsx)(K.Z,{}),onClick:function(e){e.stopPropagation()}})},"options")]})}})})}),(0,G.jsx)(S.Z,{span:20,style:{paddingLeft:6},children:x?(0,G.jsx)(a.Z,{title:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(r.Z.Text,{children:null==xe?void 0:xe.name}),(0,G.jsxs)(r.Z.Text,{children:["[",null==xe?void 0:xe.title,"]"]})]}),styles:{body:{height:"83vh",overflowY:"auto"}},extra:(0,G.jsxs)(T.Z,{children:[(0,G.jsx)(l.ZP,{ghost:!0,type:"primary",icon:(0,G.jsx)(X.Z,{}),onClick:function(){var e;null===(e=Le.current)||void 0===e||e.open(xe)},children:"生成代码"}),(0,G.jsx)(l.ZP,{ghost:!0,type:"primary",icon:(0,G.jsx)(ee.Z,{}),onClick:function(){var e;null===(e=Ae.current)||void 0===e||e.open(x)},children:"表参数设置"}),(0,G.jsx)(l.ZP,{ghost:!0,type:"primary",icon:(0,G.jsx)(ne.Z,{}),onClick:function(){var e;null===(e=$e.current)||void 0===e||e.open(ke.map((function(e){return e.name})))},children:"数据源导入"}),(0,G.jsx)(l.ZP,{type:"primary",icon:(0,G.jsx)(te.Z,{}),onClick:y()(v()().mark((function e(){var n;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ke.filter((function(e){return ge.includes(e.uuid)})),e.next=3,(0,z.DE)({entity:null==x?void 0:x.id,entityName:null==x?void 0:x.name,fields:n});case 3:e.sent.success&&(d.success("保存成功"),Be(),Ze([]));case 5:case"end":return e.stop()}}),e)}))),children:"保存"})]}),children:(0,G.jsx)(N.Z,{spinning:Ge,children:(0,G.jsx)(ae.Z,{size:"small",columns:[].concat(h()(Qe),[{title:"操作",valueType:"option",width:160,render:function(e,n,t,a){return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(l.ZP,{size:"small",type:"link",onClick:function(){var e;null===(e=Me.current)||void 0===e||e.open({record:n})},children:"高级"}),(0,G.jsx)(l.ZP,{size:"small",type:"link",onClick:function(){var e;null==a||null===(e=a.startEditable)||void 0===e||e.call(a,n.uuid)},children:"编辑"},"editable"),(0,G.jsx)(P.Z,{title:"确认删除该记录？",onConfirm:y()(v()().mark((function e(){return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U(!0),!n.id){e.next=4;break}return e.next=4,(0,z.Kd)(n.id);case 4:Ne((function(e){return e.filter((function(e){return e.uuid!==n.uuid}))})),U(!1);case 6:case"end":return e.stop()}}),e)}))),children:(0,G.jsx)(l.ZP,{danger:!0,type:"link",size:"small",loading:A,style:{padding:0},children:"删除"},"delete")})]})}}]),rowKey:function(e){return e.uuid},value:ke,onChange:Ne,recordCreatorProps:{newRecordType:"dataSource",record:function(){return{uuid:(0,L.Z)(),name:"",scene:o.kN.ORDINARY,type:o.fS.STRING,dbtype:"",order:0}}},editable:{type:"multiple",editableKeys:ge,actionRender:function(e,n,t){return[t.save,t.cancel,t.delete]},onValuesChange:function(e,n){Ne(n)},onSave:(We=y()(v()().mark((function e(n,t){var a,i,r;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.entityId,i=f()(t,Se),null==t||!t.id){e.next=7;break}return e.next=4,(0,z.Lj)(I()(I()({},i),{},{entityId:a}));case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,(0,z.jg)(I()(I()({},t),{},{entityId:null==x?void 0:x.id,entityName:null==x?void 0:x.name}));case 9:e.t0=e.sent;case 10:null!=(r=e.t0)&&r.success&&(d.success("保存成功"),Be());case 12:case"end":return e.stop()}}),e)}))),function(e,n){return We.apply(this,arguments)}),onChange:Ze},components:(null==ge?void 0:ge.length)>0?{}:{body:{wrapper:function(e){return(0,G.jsx)(Re,I()({useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:function(){var e=y()(v()().mark((function e(n){var t,a,i,r;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.oldIndex,a=n.newIndex,t===a){e.next=9;break}return i=(0,D.q)(ke,t,a),r=i.map((function(e,n){return I()(I()({},e),{},{order:n,sort:(null==i?void 0:i.length)-n})})),Ne(r),e.next=7,(0,z.Ws)({fields:r});case 7:e.sent.success&&Be();case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},e))},row:function(e){var n=ke.findIndex((function(n){return n.uuid===e["data-row-key"]}));return(0,G.jsx)(Te,I()({index:n},e))}}}})})}):(0,G.jsx)(a.Z,{title:"模块配置",style:{width:"100%"},styles:{body:{height:"83vh"}},children:(0,G.jsx)(i.Z,{description:"请选择相应的模块进行编辑",style:{marginTop:50}})})})]}),(0,G.jsx)(F.Z,{}),(0,G.jsx)(de,{modalRef:Le}),(0,G.jsx)(Ie,{entity:x,actionRef:Me,saveCallback:function(){Be()}}),(0,G.jsx)(Ee,{actionRef:Ae,saveCallback:function(){}}),(0,G.jsx)(M.Z,{modalRef:$e,selectedCallback:function(){var e=y()(v()().mark((function e(n){var t,a;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.map((function(e){return{uuid:(0,L.Z)(),name:(0,$.eV)(e.columnName),comment:e.columnComment,type:o.xM[e.dataType]||"String",entityId:null==x?void 0:x.id,entityName:null==x?void 0:x.name}})),e.next=3,(0,z.RT)({data:t});case 3:null!=(a=e.sent)&&a.success&&(Be(),Ze(t.map((function(e){return e.uuid}))));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),(0,G.jsx)(_.Z,{title:"编辑模块",columns:[{title:"title",name:"title",dataIndex:"title",rules:[{require:!0}]},{title:"name",name:"name",dataIndex:"name",rules:[{require:!0}]},{title:"path",name:"path",dataIndex:"path",rules:[{require:!0}]},{name:"type",title:"type",dataIndex:"type",widget:o.l9.SELECT,rules:[{require:!0}],options:[{label:"GENERIC",value:"GENERIC"},{label:"TREE",value:"TREE"}]}],actionRef:Pe,path:"api/applications/backend/module",saveCallback:function(){var e=y()(v()().mark((function e(n){var t;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.data,n.record||!t){e.next=5;break}return e.next=4,Promise.all([He({id:t.id}),Je({moduleId:t.id})]);case 4:localStorage.setItem(o.Qt.EDIT_NEST_MODULE,JSON.stringify({id:t.id,applicationId:t.applicationId,uuid:t.uuid}));case 5:Ve();case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),(0,G.jsx)(_.Z,{title:"编辑文件夹",columns:[{title:"标题",name:"title",dataIndex:"title",rules:[{require:!0}]},{title:"命名",name:"name",dataIndex:"name",rules:[{require:!0}]},{title:"路径",name:"path",dataIndex:"path",rules:[{require:!0}]}],actionRef:De,path:"api/applications/backend/module",saveCallback:function(){Ve()}})]})},Pe=t(82092),De=t.n(Pe),$e=t(78402),Ae=t(90127),Le=t(51498),Me=De()(De()(De()(De()({},o.og.CONTAINER,[{name:"title",dataIndex:"title",title:"标题",rules:[{required:!0}]},{name:"name",dataIndex:"name",title:"命名",rules:[{required:!0}]},{name:"path",dataIndex:"path",title:"路径",rules:[{required:!0}]},{name:"hideInMenu",dataIndex:"hideInMenu",title:"隐藏菜单",widget:o.l9.SWITCH}]),o.og.COMPONENT_FOLDER,[{name:"name",dataIndex:"name",title:"命名",rules:[{required:!0}]}]),o.og.FOLDER,[{name:"title",dataIndex:"title",title:"标题",rules:[{required:!0}]},{name:"name",dataIndex:"name",title:"命名",rules:[{required:!0}]},{name:"path",dataIndex:"path",title:"路径",rules:[{required:!0}]}]),o.og.COMPONENT,[{name:"title",dataIndex:"title",title:"标题",rules:[{required:!0}]},{name:"name",dataIndex:"name",title:"命名",rules:[{required:!0}]}]),Fe=function(e){var n=e.saveCallback,t=e.actionRef,a=(0,s.useState)({}),i=Z()(a,2),r=i[0],l=i[1],u=s.useRef();s.useImperativeHandle(t,(function(){return{callCreateView:function(e){var n;null===(n=u.current)||void 0===n||n.callCreateView(e),l((null==e?void 0:e.params)||{})},callUpdateView:function(e){var n;null===(n=u.current)||void 0===n||n.callUpdateView(e),l((null==e?void 0:e.record)||{})}}}));var c=s.useMemo((function(){return Me[r.type||o.og.CONTAINER]}),[r]);return(0,G.jsx)(_.Z,{columns:c,title:"编辑应用菜单",actionRef:u,path:"api/applications/menu",saveCallback:function(e){null==n||n(e),l({})}})},_e=function(e){var n=e.application,t=e.selectedCallback,a=e.actionRef,i=k.Z.useApp(),u=i.modal,p=i.message,f=(0,s.useState)([]),m=Z()(f,2),h=m[0],x=m[1],j=(0,s.useState)([]),g=Z()(j,2),b=g[0],I=g[1],C=(0,s.useState)([]),E=Z()(C,2),S=E[0],w=E[1],N=s.useRef(),P=(0,d.useRequest)(z.j$,{manual:!0,onSuccess:function(e){x(e);var n=localStorage.getItem(o.Qt.EDIT_REACT_MENU);if(n){var t=JSON.parse(n);I([t.uuid]),w([t.uuid])}else{var a;w([null===(a=e[0])||void 0===a?void 0:a.uuid])}}}),D=P.run,$=P.refresh;return s.useEffect((function(){n.id&&D({applicationId:n.id})}),[n]),s.useImperativeHandle(a,(function(){return{reload:function(){$()}}})),(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(O.Z,{showLine:!0,blockNode:!0,treeData:h,switcherIcon:function(e){return null!=e&&e.expanded?(0,G.jsx)(H.Z,{style:{fontSize:20}}):(0,G.jsx)(W.Z,{style:{fontSize:20}})},defaultExpandAll:!0,autoExpandParent:!0,selectedKeys:b,expandedKeys:S,onExpand:function(e){return w(e)},fieldNames:{title:"name",key:"uuid",children:"children"},titleRender:function(e){return(0,G.jsxs)(T.Z,{style:{width:"100%",justifyContent:"space-between"},children:[(0,G.jsx)(r.Z.Text,{strong:!0,children:e.name}),(0,G.jsx)(R.Z,{trigger:["click"],menu:{items:[null!=e&&e.isRoot?{label:"添加文件夹",key:"CREATE_FOLDER",icon:(0,G.jsx)(c.Z,{}),onClick:function(t){var a;t.domEvent.stopPropagation(),null===(a=N.current)||void 0===a||a.callCreateView({params:{parentId:e.id,applicationId:null==n?void 0:n.id,type:o.og.FOLDER,isRoot:!1,isFolder:!0}})}}:null,(null!=e&&e.isRoot||null!=e&&e.isFolder)&&e.type!==o.og.COMPONENT_FOLDER?{label:"添加组件文件夹",key:"CREATE_COMPONENT_FOLDER",icon:(0,G.jsx)(c.Z,{}),onClick:function(t){var a;t.domEvent.stopPropagation(),null===(a=N.current)||void 0===a||a.callCreateView({params:{parentId:e.id,applicationId:null==n?void 0:n.id,type:o.og.COMPONENT_FOLDER,isRoot:!1,isFolder:!0}})}}:null,e.type===o.og.FOLDER?{label:"添加页面",key:"CREATE_CONTAINER",icon:(0,G.jsx)(c.Z,{}),onClick:function(t){var a;t.domEvent.stopPropagation(),null===(a=N.current)||void 0===a||a.callCreateView({params:{parentId:e.id,applicationId:null==n?void 0:n.id,type:o.og.CONTAINER,isRoot:!1,isFolder:!1,isLeaf:!0}})}}:null,e.type===o.og.COMPONENT_FOLDER?{label:"添加组件",key:"CREATE_COMPONENT",icon:(0,G.jsx)(c.Z,{}),onClick:function(t){var a;t.domEvent.stopPropagation(),null===(a=N.current)||void 0===a||a.callCreateView({params:{isLeaf:!0,isRoot:!1,isFolder:!1,parentId:e.id,type:o.og.COMPONENT,applicationId:null==n?void 0:n.id}})}}:null,e.type===o.og.FOLDER?{label:"编辑",key:"EDIT_FOLDER",icon:(0,G.jsx)(Q.Z,{}),onClick:function(n){var t;n.domEvent.stopPropagation(),null===(t=N.current)||void 0===t||t.callUpdateView({record:e,params:{id:e.id}})}}:null,e.type===o.og.COMPONENT_FOLDER?{label:"编辑",key:"EDIT_COMPONENT_FOLDER",icon:(0,G.jsx)(Q.Z,{}),onClick:function(n){var t;n.domEvent.stopPropagation(),null===(t=N.current)||void 0===t||t.callUpdateView({record:e,params:{id:e.id}})}}:null,e.type===o.og.CONTAINER?{label:"编辑",key:"EDIT_CONTAINER",icon:(0,G.jsx)(Q.Z,{}),onClick:function(n){var t;n.domEvent.stopPropagation(),null===(t=N.current)||void 0===t||t.callUpdateView({record:e,params:{id:e.id}})}}:null,e.type===o.og.COMPONENT?{label:"编辑",key:"EDIT_COMPONENT",icon:(0,G.jsx)(Q.Z,{}),onClick:function(n){var t;n.domEvent.stopPropagation(),null===(t=N.current)||void 0===t||t.callUpdateView({record:e,params:{id:e.id}})}}:null,{label:"删除",key:"DELETE",danger:!0,icon:(0,G.jsx)(Y.Z,{}),onClick:function(n){var t;n.domEvent.stopPropagation(),u.confirm({title:"确认删除该对象？",onOk:(t=y()(v()().mark((function n(){var t;return v()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,z.xH)(e.id);case 2:null!=(t=n.sent)&&t.success&&(p.success("删除成功"),$());case 4:case"end":return n.stop()}}),n)}))),function(){return t.apply(this,arguments)})})}}]},children:(0,G.jsx)(l.ZP,{size:"small",variant:"filled",icon:(0,G.jsx)(K.Z,{}),onClick:function(e){e.stopPropagation()}})},"options")]})},onSelect:function(){var e=y()(v()().mark((function e(n,a){var i,r;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=a.selected,r=a.node,I(n),i&&r.isLeaf&&(null==t||t(r));case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()}),(0,G.jsx)(Fe,{actionRef:N,saveCallback:function(e){var n=e.record,t=e.data;n||localStorage.setItem(o.Qt.EDIT_REACT_MENU,JSON.stringify({id:null==t?void 0:t.id,applicationId:null==t?void 0:t.applicationId,uuid:null==t?void 0:t.uuid})),$()}})]})},Ue=t(20370),Ve=function(e){var n=e.actionRef,t=e.saveCallback,a=(0,s.useState)(),i=Z()(a,2),r=i[0],o=i[1],u=(0,s.useState)(!1),c=Z()(u,2),p=c[0],f=c[1],m=(0,s.useState)(!1),h=Z()(m,2),x=h[0],j=h[1],g=k.Z.useApp().message,b=pe.Z.useForm(),I=Z()(b,1)[0],C=(0,d.useRequest)(Ue._j,{manual:!0}),E=C.data,S=C.run,w=(0,d.useRequest)(z.s0,{manual:!0}),O=w.loading,T=w.data,R=w.run;return(0,s.useImperativeHandle)(n,(function(){return{open:(e=y()(v()().mark((function e(n){return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(n),f(!0),Promise.all([S(),R({type:"NESTJS"})]);case 3:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})};var e})),(0,G.jsx)(ie.Z,{width:600,title:"从Nestjs应用配置同步当前应用配置",destroyOnClose:!0,maskClosable:!1,open:p,onCancel:function(){return f(!1)},afterClose:function(){I.resetFields(),o(void 0)},footer:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(l.ZP,{onClick:function(){f(!1)},children:"取消"}),(0,G.jsx)(l.ZP,{type:"primary",loading:x,onClick:y()(v()().mark((function e(){var n,a;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.validateFields();case 2:if(!(n=e.sent)||!r){e.next=10;break}return j(!0),e.next=7,(0,z.Cl)({webAppId:r.id,nestAppId:n.application,groupId:n.group});case 7:a=e.sent,j(!1),null!=a&&a.success&&(g.success("同步成功"),null==t||t(),f(!1));case 10:case"end":return e.stop()}}),e)}))),children:"保存"})]}),children:(0,G.jsxs)(pe.Z,{form:I,labelCol:{span:6},wrapperCol:{span:16},children:[(0,G.jsx)(pe.Z.Item,{label:"选择应用",name:"application",children:(0,G.jsx)(he.default,{loading:O,options:null==T?void 0:T.map((function(e){return{label:e.name,value:e.id}}))})}),(0,G.jsx)(pe.Z.Item,{label:"选择接口项目",tooltip:"有助于自动生成接口引用",name:"group",children:(0,G.jsx)(he.default,{loading:O,options:null==E?void 0:E.map((function(e){return{label:e.name,value:e.id}}))})})]})})},qe=t(21523),ze=t(11546),Ge=t(94978),Be=t(18396),Je=t(96612),He=t(1791),We=t(15665),Qe=t(85689),Ye=t(75752),Ke=t(681),Xe=t(86890),en=t(66394),nn=t(33330),tn=t(79841),an=t(78956),rn=t(46393),ln=t(51131),sn=t(46766),on=t(78992),un=t(87965),cn=t(96730),dn=t(962),pn=t(78809),fn=t(18657),mn=t(35808),hn=t(21686),xn=t(8880),vn=function(e){return e.MATERIAL="material",e.APPLICATION="application",e}({}),jn=function(e){return(null==e?void 0:e.map((function(e){return I()({options:[],editable:!0,propType:o.d5.DEFAULT,description:e.remark,valueType:o.Ge.TEXT,dataType:o.g.STRING,widget:o.l9.INPUT},e)})))||[]},yn=function(e){var n=e.item;return(0,G.jsx)(xn.Z,{title:n.name,avatar:n.isFontIcon?(0,G.jsx)(dn.w,{icon:n.name}):null,description:n.isFontIcon?null:n.title,value:n.id,size:n.isFontIcon?"default":"small",bodyStyle:{paddingTop:0},extra:(0,G.jsx)(R.Z,{trigger:["click"],menu:{items:[{label:"查看组件源文档",key:"edit",icon:(0,G.jsx)(fn.Z,{}),disabled:!n.documentUrl,onClick:function(e){e.domEvent.stopPropagation(),window.open(n.documentUrl)}}]},children:(0,G.jsx)(l.ZP,{color:"default",variant:"filled",icon:(0,G.jsx)(mn.Z,{style:{fontSize:16}}),onClick:function(e){e.stopPropagation()}})},"options")},n.id)},gn=function(e){var n,t=e.submitCallback,a=e.actionRef,i=(0,s.useState)(!1),r=Z()(i,2),u=r[0],c=r[1],d=(0,s.useState)(),p=Z()(d,2),f=p[0],m=p[1],x=(0,s.useState)(),j=Z()(x,2),g=j[0],b=j[1],k=(0,s.useState)(),E=Z()(k,2),S=E[0],w=E[1],O=(0,s.useState)(),R=Z()(O,2),P=R[0],D=R[1],$=(0,s.useState)(""),A=Z()($,2),M=A[0],F=A[1],_=(0,s.useState)([]),U=Z()(_,2),V=U[0],q=U[1],B=(0,s.useState)(vn.MATERIAL),J=Z()(B,2),H=J[0],W=J[1],Q=(0,s.useState)([]),Y=Z()(Q,2),K=Y[0],X=Y[1],ee=(0,s.useState)(!1),ne=Z()(ee,2),te=ne[0],ae=ne[1],le=(0,C.Z)(z.Z7,{manual:!0,onSuccess:function(e){q(e.data||[])}}),se=le.loading,oe=le.run;s.useImperativeHandle(a,(function(){return{open:function(e){c(!0),D(e.relation),w(e.container),b(e.parent),oe({include:{components:!0}})}}}));var ue=s.useMemo((function(){return null==V?void 0:V.map((function(e){var n;return{label:null==e?void 0:e.name,key:e.alias,children:(0,G.jsx)("div",{style:{maxHeight:"60vh",overflowY:"auto"},children:(0,G.jsx)(N.Z,{spinning:!1,children:(0,G.jsx)(xn.Z.Group,{onChange:function(n){var t=null==e?void 0:e.components.find((function(e){return e.id===n}));m(t)},children:M?null==e?void 0:e.components.filter((function(e){return e.name.toLowerCase().indexOf(M.toLowerCase())>-1||e.title.toLowerCase().indexOf(M.toLowerCase())>-1})).map((function(e){return(0,G.jsx)(yn,{item:e},e.id)})):null==e||null===(n=e.components)||void 0===n?void 0:n.map((function(e){return(0,G.jsx)(yn,{item:e},e.id)}))})})})}}))}),[V,M]);return null!=V&&V.length?(0,G.jsx)(ie.Z,{width:1480,title:"选择组件",destroyOnClose:!0,open:u,onCancel:function(){c(!1)},afterClose:function(){F(""),W(vn.MATERIAL),m(void 0)},styles:{body:{minHeight:800}},footer:(0,G.jsx)(G.Fragment,{children:(0,G.jsx)(l.ZP,{type:"primary",onClick:y()(v()().mark((function e(){var n,a,i,r,l,s,u,d,p;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f||!S){e.next=18;break}if(n=f.id,a=f.name,i=f.title,r=f.path,l=f.boilerplate,s=[],H!==vn.APPLICATION){e.next=8;break}s=jn(f.props),null!=f&&f.actions&&f.actions.length>0&&(s=[{propType:o.d5.DEFAULT,valueType:o.Ge.TEXT,dataType:o.g.FUNCTION,widget:o.l9.INPUT,name:"actionRef",editable:!0,uuid:(0,L.Z)(),order:0}].concat(h()(s))),e.next=12;break;case 8:return e.next=10,(0,pn.an)({componentId:n});case 10:(u=e.sent).success&&(s=u.data||[]);case 12:return d={name:a,title:i,path:r,boilerplate:l,props:s,relation:P||null,package:f.package,container:{connect:{id:S.id}},documentUrl:f.documentUrl,application:{connect:{id:S.applicationId}},isRoot:!g||0===g.id,isDirect:!P,reference:(null==P?void 0:P.property)||null,defaultPackage:f.defaulted,isInternal:H===vn.APPLICATION},g&&0!==g.id&&Object.assign(d,{parent:{connect:{id:null==g?void 0:g.id}}}),e.next=16,(0,z.RA)(d);case 16:(p=e.sent)&&p.success&&(Ce.ZP.success("保存成功"),c(!1),null==t||t(p.data));case 18:case"end":return e.stop()}}),e)}))),children:"确定"})}),onOk:function(){null==t||t()},children:(0,G.jsx)(N.Z,{spinning:se,children:(0,G.jsx)(re.Z,{onChange:function(){var e=y()(v()().mark((function e(n){var t,a;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W(n),"application"!==n||!S){e.next=8;break}return ae(!0),e.next=5,(0,z.zI)(null==S?void 0:S.applicationId);case 5:t=e.sent,ae(!1),null!=t&&t.success&&X((null===(a=t.data)||void 0===a?void 0:a.map((function(e){return I()(I()({},e),{},{defaulted:!0,package:"@/pages/".concat(e.path)})})))||[]);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),tabBarExtraContent:(0,G.jsx)(T.Z,{style:{width:"100%",alignItems:"center",justifyContent:"center"},children:(0,G.jsx)(me.Z.Search,{size:"large",value:M,style:{width:360},enterButton:(0,G.jsx)(l.ZP,{type:"primary",icon:(0,G.jsx)(hn.Z,{})}),onChange:function(e){return F(e.target.value)}})}),items:[].concat(h()(ue),[{label:"应用内组件",key:vn.APPLICATION,children:(0,G.jsx)("div",{style:{maxHeight:680,overflowY:"auto"},children:(0,G.jsx)(N.Z,{spinning:te,children:(0,G.jsx)(xn.Z.Group,{onChange:function(e){var n=K.find((function(n){return n.id===e}));m(n)},defaultValue:K.length?null===(n=K[0])||void 0===n?void 0:n.id:null,children:K.map((function(e){return(0,G.jsx)(xn.Z,{title:e.name,description:e.title,value:e.id},e.id)}))})})})}])})})}):null},Zn=t(76502),bn=[o.yD.FORM_ITEMS,o.yD.TABLE_COLS,o.yD.DESC_ITEMS,o.yD.MENU_ITEMS,o.yD.TAB_ITEMS,o.yD.SELECT_OPTIONS,o.yD.TOUR_STEPS,o.yD.COLLAPSE_ITEMS,o.yD.ACTIONS,o.yD.PRO_DESC_COLS,o.yD.PRO_PAGE_COLS,o.yD.PRO_TABLE_COLS],In=function(e){var n=e.application,t=(0,s.useState)(),u=Z()(t,2),c=u[0],p=u[1],f=(0,s.useState)(),m=Z()(f,2),h=m[0],x=m[1],j=(0,s.useState)("states"),g=Z()(j,2),b=g[0],C=g[1],k=(0,s.useState)(!0),O=Z()(k,2),R=O[0],N=O[1],P=s.useRef(),D=s.useRef(null),$=s.useRef(),A=s.useRef(),L=s.useRef(null),M=(0,d.useRequest)(z.$3,{manual:!0,onSuccess:function(e){x(e)}}).run,_=(0,d.useRequest)(z.$R,{manual:!0,onSuccess:function(e){p(e)}}),U=_.run,V=_.loading;(0,s.useEffect)((function(){var e=localStorage.getItem(o.Qt.EDIT_REACT_MENU);if(e){var t=JSON.parse(e);t.applicationId===(null==n?void 0:n.id)?U({menuId:t.id}):p(void 0)}else p(void 0)}),[n]),(0,s.useEffect)((function(){var e=localStorage.getItem(o.Qt.EDIT_REACT_COMPONENT);if(e){var n=JSON.parse(e);M({id:n.id})}else x(void 0)}),[]);var q=s.useMemo((function(){var e;return(null==h||null===(e=h.props)||void 0===e?void 0:e.filter((function(e){return bn.includes(e.widget)&&e.editable})))||[]}),[h]),J=[{label:"props",key:"EXTRA_PROPS",children:(0,G.jsx)(He.Z,{container:c,saveCallback:function(){var e=y()(v()().mark((function e(n){var t;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,z.WP)({id:null==c?void 0:c.id,props:n});case 2:null!=(t=e.sent)&&t.success&&p((function(e){return I()(I()({},e),{},{props:n})}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})},{label:"useImperativeHandles",key:"IMPERATIVEF_ACTIONS",children:(0,G.jsx)(Ye.Z,{container:c,saveCallback:function(){var e=y()(v()().mark((function e(n){var t;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,z.WP)({id:null==c?void 0:c.id,actions:n});case 2:null!=(t=e.sent)&&t.success&&p((function(e){return I()(I()({},e),{},{actions:n})}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})}],H=[{label:"useStates",key:"STATES",children:(0,G.jsx)(en.Z,{container:c,saveCallback:function(){var e=y()(v()().mark((function e(n){var t;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,z.WP)({id:null==c?void 0:c.id,states:n});case 2:null!=(t=e.sent)&&t.success&&p((function(e){return I()(I()({},e),{},{states:n})}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})},{label:"useEffects",key:"EFFECTS",children:(0,G.jsx)(Je.Z,{container:c,saveCallback:function(){var e=y()(v()().mark((function e(n){var t;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,z.WP)({id:null==c?void 0:c.id,useeffects:n});case 2:null!=(t=e.sent)&&t.success&&p((function(e){return I()(I()({},e),{},{useeffects:n})}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})},{label:"useMemos",key:"MEMOS",children:(0,G.jsx)(Qe.Z,{container:c,saveCallback:function(){var e=y()(v()().mark((function e(n){var t;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,z.WP)({id:null==c?void 0:c.id,usememos:n});case 2:null!=(t=e.sent)&&t.success&&p((function(e){return I()(I()({},e),{},{usememos:n})}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})},{label:"useRefs",key:"REFS",children:(0,G.jsx)(Ke.Z,{container:c,saveCallback:function(){var e=y()(v()().mark((function e(n){var t;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,z.WP)({id:null==c?void 0:c.id,references:n});case 2:null!=(t=e.sent)&&t.success&&p((function(e){return I()(I()({},e),{},{references:n})}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})},{label:"useRequests",key:"REQUESTS",children:(0,G.jsx)(Xe.Z,{container:c,saveCallback:function(){var e=y()(v()().mark((function e(n){var t;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,z.WP)({id:null==c?void 0:c.id,userequests:n});case 2:null!=(t=e.sent)&&t.success&&p((function(e){return I()(I()({},e),{},{userequests:n})}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})},{label:"imports",key:"IMPORTS",children:(0,G.jsx)(We.Z,{container:c,saveCallback:function(){var e=y()(v()().mark((function e(n){var t;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,z.WP)({id:null==c?void 0:c.id,imports:n});case 2:null!=(t=e.sent)&&t.success&&p((function(e){return I()(I()({},e),{},{imports:n})}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})}];return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(E.Z,{children:[R&&(0,G.jsx)(S.Z,{span:4,style:{paddingRight:6},children:(0,G.jsx)(a.Z,{title:"应用菜单",styles:{body:{padding:12,height:"83vh",overflowY:"auto"},header:{paddingRight:12}},extra:(0,G.jsxs)(T.Z,{children:[(0,G.jsx)(w.Z,{placement:"right",title:"根据Nest应用导入菜单及初始化表",children:(0,G.jsx)(l.ZP,{ghost:!0,type:"primary",icon:(0,G.jsx)(ne.Z,{}),onClick:function(){var e;null===(e=L.current)||void 0===e||e.open(n)}})}),(0,G.jsx)(B,{})]}),children:(0,G.jsx)(_e,{application:n,actionRef:A,selectedCallback:function(e){var n;localStorage.setItem(o.Qt.EDIT_REACT_MENU,JSON.stringify({id:e.id,applicationId:e.applicationId,uuid:e.uuid})),U({menuId:e.id}),null===(n=P.current)||void 0===n||n.reset(),C("STATES")}})})}),(0,G.jsx)(S.Z,{span:R?20:24,children:c?(0,G.jsx)(a.Z,{loading:V,title:(0,G.jsxs)(T.Z,{children:[(0,G.jsx)(l.ZP,{icon:R?(0,G.jsx)(Ae.Z,{}):(0,G.jsx)(Le.Z,{}),onClick:function(){N((function(e){return!e}))}}),(0,G.jsxs)(r.Z.Text,{children:["页面配置-",null==c?void 0:c.title]})]}),styles:{body:{padding:12,height:"83vh",overflowY:"auto"},header:{paddingLeft:12,paddingRight:12}},extra:(0,G.jsx)(T.Z,{children:(0,G.jsx)(l.ZP,{ghost:!0,type:"primary",icon:(0,G.jsx)(X.Z,{}),onClick:function(){var e;c&&(null===(e=$.current)||void 0===e||e.open(c,o.Hs.CONTAINER))},children:"生成代码"},"generatorContainer")}),children:(0,G.jsxs)($e.Z,{children:[(0,G.jsx)($e.Z.Panel,{defaultSize:"20%",min:"10%",max:"40%",style:{paddingRight:12},children:(0,G.jsx)(a.Z,{title:"组件大纲",size:"small",styles:{body:{padding:8,minHeight:"70vh"}},children:(0,G.jsx)(ze.Z,{component:h,container:c,actionRef:P,setCurrentComponent:function(e){e&&"page"!==e.alias?M({id:e.id}):x(e)},callSelectComponentView:function(e){var n;null===(n=D.current)||void 0===n||n.open(e)}})})}),(0,G.jsx)($e.Z.Panel,{style:{paddingLeft:12},children:h&&(0,G.jsx)(G.Fragment,{children:0===h.id?(0,G.jsx)(a.Z,{size:"small",styles:{body:{padding:"0 12px"}},children:(0,G.jsx)(re.Z,{activeKey:b,onChange:function(e){return C(e)},items:c.type===o.lS.COMPONENT?[].concat(H,J):H})}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(qe.Z,{component:h,saveCallback:x,setCurrentComponent:function(e){return x(e)},callSelectComponentView:function(e){var n;null===(n=D.current)||void 0===n||n.open(e)}}),null==q?void 0:q.filter((function(e){return e.widget===o.yD.PRO_TABLE_COLS})).map((function(e){return(0,G.jsx)(rn.Z,{property:e,component:h,saveCallback:x},e.name)})),null==q?void 0:q.filter((function(e){return e.widget===o.yD.PRO_PAGE_COLS})).map((function(e){return(0,G.jsx)(ln.Z,{property:e,component:h,saveCallback:x},e.name)})),null==q?void 0:q.filter((function(e){return e.widget===o.yD.PRO_DESC_COLS})).map((function(e){return(0,G.jsx)(an.Z,{property:e,component:h,saveCallback:x},e.name)})),null==q?void 0:q.filter((function(e){return e.widget===o.yD.TABLE_COLS})).map((function(e){return(0,G.jsx)(un.Z,{property:e,component:h,saveCallback:x},e.name)})),null==q?void 0:q.filter((function(e){return e.widget===o.yD.FORM_ITEMS})).map((function(e){return(0,G.jsx)(tn.Z,{property:e,component:h,saveCallback:x},e.name)})),null==q?void 0:q.filter((function(e){return e.widget===o.yD.DESC_ITEMS})).map((function(e){return(0,G.jsx)(nn.Z,{property:e,component:h,saveCallback:x,setCurrentComponent:function(e){return x(e)},callSelectComponentView:function(e){var n;null===(n=D.current)||void 0===n||n.open(e)}},e.name)})),null==q?void 0:q.filter((function(e){return e.widget===o.yD.TAB_ITEMS})).map((function(e){return(0,G.jsx)(on.Z,{property:e,component:h,saveCallback:x,setCurrentComponent:function(e){return x(e)},callSelectComponentView:function(e){var n;null===(n=D.current)||void 0===n||n.open(e)}},e.name)})),null==q?void 0:q.filter((function(e){return e.widget===o.yD.COLLAPSE_ITEMS})).map((function(e){return(0,G.jsx)(Ge.Z,{property:e,component:h,saveCallback:x,setCurrentComponent:function(e){return x(e)},callSelectComponentView:function(e){var n;null===(n=D.current)||void 0===n||n.open(e)}},e.name)})),null==q?void 0:q.filter((function(e){return e.widget===o.yD.SELECT_OPTIONS})).map((function(e){return(0,G.jsx)(sn.Z,{property:e,component:h,saveCallback:x},e.name)})),null==q?void 0:q.filter((function(e){return e.widget===o.yD.TOUR_STEPS})).map((function(e){return(0,G.jsx)(cn.Z,{property:e,component:h,saveCallback:x},e.name)})),null==q?void 0:q.filter((function(e){return e.widget===o.yD.ACTIONS})).map((function(e){return(0,G.jsx)(Be.ZP,{property:e,component:h,saveCallback:x},e.name)}))]})})})]})}):(0,G.jsx)(a.Z,{title:"页面配置",style:{width:"100%"},styles:{body:{height:"83vh"}},children:(0,G.jsx)(i.Z,{description:"请选择相应的页面进行编辑",style:{marginTop:50}})})})]}),(0,G.jsx)(F.Z,{}),(0,G.jsx)(Zn.Z,{modalRef:$}),(0,G.jsx)(gn,{parent:h,container:c,actionRef:D,submitCallback:function(){var e=y()(v()().mark((function e(n){var t,a,i,r,l,s,o,u,c;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h||"SUBPROP"!==(null==n||null===(t=n.relation)||void 0===t?void 0:t.type)||null==n||null===(a=n.relation)||void 0===a||!a.item){e.next=5;break}return l=null==n?void 0:n.relation,s=l.property,o=l.subkey,u=l.item,c=I()(I()({},h.config||{}),{},De()({},s,null===(r=h.config)||void 0===r?void 0:r[s].map((function(e){return e.uuid===u?I()(I()({},e),{},De()({},o,n.uuid)):e})))),e.next=5,(0,z.vz)(h.id,{config:c});case 5:x(n),null===(i=P.current)||void 0===i||i.reload();case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),(0,G.jsx)(Ve,{actionRef:L,saveCallback:function(){var e,n;null===(e=P.current)||void 0===e||e.reload(),null===(n=A.current)||void 0===n||n.reload()}})]})},Cn=function(){var e=(0,d.useModel)("@@initialState").initialState,n=s.useRef();return(0,G.jsx)(u.Z,{activateKey:o.z_.APPLICATION,actionRef:n,children:null!=e&&e.application?(0,G.jsx)(G.Fragment,{children:e.application.type===o.vQ.NESTJS?(0,G.jsx)(Ne,{application:e.application}):(0,G.jsx)(In,{application:e.application})}):(0,G.jsx)(a.Z,{style:{height:"83vh"},bordered:!1,children:(0,G.jsx)(i.Z,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:60},description:(0,G.jsx)(r.Z.Text,{strong:!0,children:"还没有应用，请先创建一个吧"}),children:(0,G.jsx)(l.ZP,{type:"primary",size:"large",icon:(0,G.jsx)(c.Z,{}),onClick:function(){var e;null===(e=n.current)||void 0===e||e.callAppCreateView()},children:"创建应用"})})})})}},1123:function(e){e.exports=function(){var e=[],n=[],t={},a={},i={};function r(e){return"string"==typeof e?new RegExp("^"+e+"$","i"):e}function l(e,n){return e===n?n:e===e.toLowerCase()?n.toLowerCase():e===e.toUpperCase()?n.toUpperCase():e[0]===e[0].toUpperCase()?n.charAt(0).toUpperCase()+n.substr(1).toLowerCase():n.toLowerCase()}function s(e,n){return e.replace(/\$(\d{1,2})/g,(function(e,t){return n[t]||""}))}function o(e,n){return e.replace(n[0],(function(t,a){var i=s(n[1],arguments);return l(""===t?e[a-1]:t,i)}))}function u(e,n,a){if(!e.length||t.hasOwnProperty(e))return n;for(var i=a.length;i--;){var r=a[i];if(r[0].test(n))return o(n,r)}return n}function c(e,n,t){return function(a){var i=a.toLowerCase();return n.hasOwnProperty(i)?l(a,i):e.hasOwnProperty(i)?l(a,e[i]):u(i,a,t)}}function d(e,n,t,a){return function(a){var i=a.toLowerCase();return!!n.hasOwnProperty(i)||!e.hasOwnProperty(i)&&u(i,i,t)===i}}function p(e,n,t){return(t?n+" ":"")+(1===n?p.singular(e):p.plural(e))}return p.plural=c(i,a,e),p.isPlural=d(i,a,e),p.singular=c(a,i,n),p.isSingular=d(a,i,n),p.addPluralRule=function(n,t){e.push([r(n),t])},p.addSingularRule=function(e,t){n.push([r(e),t])},p.addUncountableRule=function(e){"string"!=typeof e?(p.addPluralRule(e,"$0"),p.addSingularRule(e,"$0")):t[e.toLowerCase()]=!0},p.addIrregularRule=function(e,n){n=n.toLowerCase(),e=e.toLowerCase(),i[e]=n,a[n]=e},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach((function(e){return p.addIrregularRule(e[0],e[1])})),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach((function(e){return p.addPluralRule(e[0],e[1])})),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach((function(e){return p.addSingularRule(e[0],e[1])})),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[eé]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(p.addUncountableRule),p}()}}]);