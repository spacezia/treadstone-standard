"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[380],{52809:function(n,e,t){t.r(e),t.d(e,{default:function(){return jn}});var r=t(90228),i=t.n(r),o=t(26068),a=t.n(o),s=t(87999),c=t.n(s),u=t(48305),l=t.n(u),d=t(70725),p=t(73264),f=t(912),v=t(31331),m=t(64684),x=t(21621),h=t(74230),y=t(22825),j=t(60247),C=t(14471),g=t(78402),S=t(45470),Z=t(50959),k=t(38653),b=t(7733),w=t(28213),E=t(10218),P=t(73115),O=t(70346),T=t(41778),R=t(90127),_=t(51498),I=t(29217),D=t(33600),L=t(21523),A=t(11546),M=t(94978),N=t(18396),F=t(96612),z=t(1791),U=t(15665),B=t(85689),W=t(75752),H=t(681),q=t(86890),V=t(66394),G=t(33330),Y=t(79841),K=t(78956),J=t(46393),Q=t(51131),X=t(46766),$=t(78992),nn=t(87965),en=t(96730),tn=t(45889),rn=t(37956),on=t(35363),an=t(37348),sn=t(11204),cn=t(78809),un=t(18657),ln=t(35808),dn=t(21686),pn=t(8880),fn=t(962),vn=t(11527),mn=function(n){var e=n.item;return(0,vn.jsx)(pn.Z,{title:e.name,avatar:e.isFontIcon?(0,vn.jsx)(fn.w,{icon:e.name}):null,description:e.isFontIcon?null:e.title,value:e.id,size:e.isFontIcon?"default":"small",style:{width:"18.5%"},bodyStyle:{paddingTop:0},extra:e.isFontIcon?null:(0,vn.jsx)(y.Z,{trigger:["click"],menu:{items:[{label:"查看组件源文档",key:"edit",icon:(0,vn.jsx)(un.Z,{}),disabled:!e.documentUrl,onClick:function(n){n.domEvent.stopPropagation(),window.open(e.documentUrl)}}]},children:(0,vn.jsx)(m.ZP,{color:"default",variant:"filled",icon:(0,vn.jsx)(ln.Z,{style:{fontSize:16}}),onClick:function(n){n.stopPropagation()}})},"options")},e.id)},xn=function(n){var e=n.submitCallback,t=n.actionRef,r=rn.Z.useApp().message,o=(0,Z.useState)(!1),a=l()(o,2),s=a[0],u=a[1],d=(0,Z.useState)(),p=l()(d,2),f=p[0],v=p[1],x=(0,Z.useState)(),h=l()(x,2),y=h[0],j=h[1],g=(0,Z.useState)(),k=l()(g,2),b=k[0],w=k[1],P=(0,Z.useState)(),O=l()(P,2),T=O[0],R=O[1],_=(0,Z.useState)(""),I=l()(_,2),D=I[0],L=I[1],A=(0,Z.useState)([]),M=l()(A,2),N=M[0],F=M[1],z=(0,Z.useState)(),U=l()(z,2),B=U[0],W=U[1],H=(0,tn.Z)(E.Z7,{manual:!0,onSuccess:function(n){F(n.data||[])}}),q=H.loading,V=H.run;Z.useImperativeHandle(t,(function(){return{open:function(n){u(!0),R(n.relation),w(n.container),j(n.parent),V({include:{components:!0}})}}}));var G=Z.useMemo((function(){return null==N?void 0:N.map((function(n){var e;return{label:null==n?void 0:n.name,key:n.alias,children:(0,vn.jsx)("div",{style:{maxHeight:"60vh",overflowY:"auto"},children:(0,vn.jsx)(pn.Z.Group,{onChange:function(e){var t=null==n?void 0:n.components.find((function(n){return n.id===e}));v(t)},children:D?null==n?void 0:n.components.filter((function(n){return n.name.toLowerCase().indexOf(D.toLowerCase())>-1||n.title.toLowerCase().indexOf(D.toLowerCase())>-1})).map((function(n){return(0,vn.jsx)(mn,{item:n},n.id)})):null==n||null===(e=n.components)||void 0===e?void 0:e.map((function(n){return(0,vn.jsx)(mn,{item:n},n.id)}))})})}}))}),[N,D]);return null!=N&&N.length?(0,vn.jsx)(on.Z,{width:1480,title:"选择组件",destroyOnClose:!0,open:s,onCancel:function(){u(!1)},afterClose:function(){L(""),W(void 0),v(void 0)},styles:{body:{minHeight:800}},footer:(0,vn.jsx)(vn.Fragment,{children:(0,vn.jsx)(m.ZP,{type:"primary",disabled:!f,onClick:c()(i()().mark((function n(){var t,o,a,s,c,l,d,p;return i()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(f){n.next=2;break}return n.abrupt("return",r.error("请选择组件"));case 2:return t=f.id,o=f.name,a=f.title,s=f.path,c=f.boilerplate,n.next=5,(0,cn.an)({componentId:t});case 5:if(!(l=n.sent).success){n.next=14;break}return d={name:o,title:a,path:s,boilerplate:c,props:l.data||[],package:f.package,documentUrl:f.documentUrl,isRoot:!y||0===y.id,defaultPackage:f.defaulted,isInternal:!1,relation:T||null,isDirect:!T,reference:(null==T?void 0:T.property)||null},b&&Object.assign(d,{container:{connect:{id:null==b?void 0:b.id}}}),y&&0!==y.id&&Object.assign(d,{parent:{connect:{id:null==y?void 0:y.id}}}),n.next=12,(0,E.ie)(d);case 12:(p=n.sent)&&p.success&&(r.success("保存成功"),u(!1),null==e||e(p.data));case 14:case"end":return n.stop()}}),n)}))),children:"确定"})}),onOk:function(){null==e||e()},children:(0,vn.jsx)(an.Z,{spinning:q,children:(0,vn.jsx)(S.Z,{activeKey:B,onChange:W,items:G,tabBarExtraContent:(0,vn.jsx)(C.Z,{style:{width:"100%",alignItems:"center",justifyContent:"center"},children:(0,vn.jsx)(sn.Z.Search,{size:"large",value:D,style:{width:360},enterButton:(0,vn.jsx)(m.ZP,{type:"primary",icon:(0,vn.jsx)(dn.Z,{})}),onChange:function(n){return L(n.target.value)}})})})})}):null},hn=t(76502),yn=[b.yD.FORM_ITEMS,b.yD.TABLE_COLS,b.yD.DESC_ITEMS,b.yD.MENU_ITEMS,b.yD.TAB_ITEMS,b.yD.SELECT_OPTIONS,b.yD.TOUR_STEPS,b.yD.COLLAPSE_ITEMS,b.yD.ACTIONS,b.yD.PRO_DESC_COLS,b.yD.PRO_PAGE_COLS,b.yD.PRO_TABLE_COLS],jn=function(){var n=(0,Z.useState)(),e=l()(n,2),t=e[0],r=e[1],o=(0,Z.useState)([]),s=l()(o,2),u=s[0],tn=s[1],rn=(0,Z.useState)(),on=l()(rn,2),an=on[0],sn=on[1],cn=(0,Z.useState)("states"),un=l()(cn,2),ln=un[0],dn=un[1],pn=(0,Z.useState)(!0),fn=l()(pn,2),mn=fn[0],jn=fn[1],Cn=Z.useRef(),gn=Z.useRef(null),Sn=Z.useRef(),Zn=(0,D.useRequest)(E.$3,{manual:!0,onSuccess:function(n){sn(n)}}).run,kn=(0,D.useRequest)(E.fw,{manual:!0,onSuccess:function(n){r(n)}}).run,bn=(0,D.useRequest)(E.J9,{onSuccess:function(n){if(tn(n||[]),an&&an.containerId!==(null==t?void 0:t.id)){var e=n.find((function(n){return n.id===an.containerId}));r(e)}}}),wn=bn.loading,En=bn.refresh;(0,Z.useEffect)((function(){var n=localStorage.getItem(b.Qt.EDIT_PLAYGROUND_COMPONENT);if(n){var e=JSON.parse(n);kn({id:e.id})}}),[]);var Pn=Z.useMemo((function(){var n;return(null==an||null===(n=an.props)||void 0===n?void 0:n.filter((function(n){return yn.includes(n.widget)&&n.editable})))||[]}),[an]),On=[{label:"useStates",key:"STATES",children:(0,vn.jsx)(V.Z,{container:t,saveCallback:function(){var n=c()(i()().mark((function n(e){var o;return i()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.WP)({id:null==t?void 0:t.id,states:e});case 2:null!=(o=n.sent)&&o.success&&r((function(n){return a()(a()({},n),{},{states:e})}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()})},{label:"useEffects",key:"EFFECTS",children:(0,vn.jsx)(F.Z,{container:t,saveCallback:function(){var n=c()(i()().mark((function n(e){var o;return i()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.WP)({id:null==t?void 0:t.id,useeffects:e});case 2:null!=(o=n.sent)&&o.success&&r((function(n){return a()(a()({},n),{},{useeffects:e})}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()})},{label:"useMemos",key:"MEMOS",children:(0,vn.jsx)(B.Z,{container:t,saveCallback:function(){var n=c()(i()().mark((function n(e){var o;return i()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.WP)({id:null==t?void 0:t.id,usememos:e});case 2:null!=(o=n.sent)&&o.success&&r((function(n){return a()(a()({},n),{},{usememos:e})}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()})},{label:"useRefs",key:"REFS",children:(0,vn.jsx)(H.Z,{container:t,saveCallback:function(){var n=c()(i()().mark((function n(e){var o;return i()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.WP)({id:null==t?void 0:t.id,references:e});case 2:null!=(o=n.sent)&&o.success&&r((function(n){return a()(a()({},n),{},{references:e})}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()})},{label:"useRequests",key:"REQUESTS",children:(0,vn.jsx)(q.Z,{container:t,saveCallback:function(){var n=c()(i()().mark((function n(e){var o;return i()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.WP)({id:null==t?void 0:t.id,userequests:e});case 2:null!=(o=n.sent)&&o.success&&r((function(n){return a()(a()({},n),{},{userequests:e})}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()})},{label:"imports",key:"IMPORTS",children:(0,vn.jsx)(U.Z,{container:t,saveCallback:function(){var n=c()(i()().mark((function n(e){var o;return i()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.WP)({id:null==t?void 0:t.id,imports:e});case 2:null!=(o=n.sent)&&o.success&&r((function(n){return a()(a()({},n),{},{imports:e})}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()})}],Tn=[{label:"props",key:"EXTRA_PROPS",children:(0,vn.jsx)(z.Z,{container:t,saveCallback:function(){var n=c()(i()().mark((function n(e){var o;return i()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.WP)({id:null==t?void 0:t.id,props:e});case 2:null!=(o=n.sent)&&o.success&&r((function(n){return a()(a()({},n),{},{props:e})}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()})},{label:"useImperativeHandles",key:"IMPERATIVEF_ACTIONS",children:(0,vn.jsx)(W.Z,{container:t,saveCallback:function(){var n=c()(i()().mark((function n(e){var o;return i()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.WP)({id:null==t?void 0:t.id,actions:e});case 2:null!=(o=n.sent)&&o.success&&r((function(n){return a()(a()({},n),{},{actions:e})}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()})}];return(0,vn.jsxs)(w.Z,{activateKey:b.z_.PLAYGROUND,children:[(0,vn.jsxs)(d.Z,{children:[mn&&(0,vn.jsx)(p.Z,{span:4,style:{paddingRight:6},children:(0,vn.jsx)(f.Z,{title:"组件记录",loading:wn,styles:{body:{padding:12,height:"83vh",overflowY:"auto"},header:{paddingRight:12}},extra:(0,vn.jsx)(v.Z,{placement:"right",title:"添加组件",children:(0,vn.jsx)(m.ZP,{type:"primary",icon:(0,vn.jsx)(P.Z,{}),onClick:function(){var n;null===(n=gn.current)||void 0===n||n.open({})}})}),children:(null==u?void 0:u.length)>0?(0,vn.jsx)(x.Z,{mode:"inline",style:{width:"100%",borderRight:"none"},selectedKeys:t?[t.uuid]:[],items:null==u?void 0:u.map((function(n){return{style:{padding:12},label:(0,vn.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,vn.jsx)(h.Z.Text,{strong:!0,children:n.name})," ",(0,vn.jsx)(y.Z,{trigger:["click"],menu:{items:[{label:"删除",danger:!0,key:"delete",icon:(0,vn.jsx)(O.Z,{}),onClick:(e=c()(i()().mark((function e(o){var a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.domEvent.stopPropagation(),e.next=4,(0,E.iI)(null==n?void 0:n.id);case 4:null!=(a=e.sent)&&a.success&&((null==t?void 0:t.id)===n.id&&r(void 0),En());case 6:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})}]},children:(0,vn.jsx)(m.ZP,{size:"small",color:"default",variant:"filled",icon:(0,vn.jsx)(T.Z,{style:{fontSize:16}}),onClick:function(n){n.stopPropagation()}})},"options")]}),key:n.uuid,onClick:function(){var e;kn({id:n.id}),null===(e=Cn.current)||void 0===e||e.reset(),dn("STATES")}};var e}))}):(0,vn.jsx)(j.Z,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:60},description:(0,vn.jsx)(h.Z.Text,{strong:!0,children:"没有组件记录"}),children:(0,vn.jsx)(m.ZP,{type:"primary",icon:(0,vn.jsx)(P.Z,{}),onClick:function(){var n;null===(n=gn.current)||void 0===n||n.open({})},children:"添加组件"})})})}),(0,vn.jsx)(p.Z,{span:mn?20:24,children:(0,vn.jsx)(f.Z,{title:(0,vn.jsxs)(C.Z,{children:[(0,vn.jsx)(m.ZP,{icon:mn?(0,vn.jsx)(R.Z,{}):(0,vn.jsx)(_.Z,{}),onClick:function(){jn((function(n){return!n}))}}),t&&(0,vn.jsxs)(h.Z.Text,{children:["组件配置-",null==t?void 0:t.title]})]}),styles:{body:{padding:12,height:"83vh",overflowY:"auto"},header:{paddingLeft:12,paddingRight:12}},extra:(0,vn.jsx)(C.Z,{children:(0,vn.jsx)(m.ZP,{icon:(0,vn.jsx)(I.Z,{}),disabled:!t,onClick:function(){var n;t&&(null===(n=Sn.current)||void 0===n||n.open(t,b.Hs.CONTAINER))},children:"生成组件代码"})}),children:t?(0,vn.jsxs)(g.Z,{children:[(0,vn.jsx)(g.Z.Panel,{defaultSize:"20%",min:"10%",max:"40%",style:{paddingRight:12},children:(0,vn.jsx)(f.Z,{title:"组件大纲",size:"small",styles:{body:{padding:8,minHeight:"70vh"}},children:(0,vn.jsx)(A.Z,{component:an,container:t,actionRef:Cn,setCurrentComponent:function(n){n&&"page"!==n.alias?Zn({id:n.id}):sn(n)},callSelectComponentView:function(n){var e;null===(e=gn.current)||void 0===e||e.open(n)}})})}),(0,vn.jsx)(g.Z.Panel,{style:{paddingLeft:12},children:an&&(0,vn.jsx)(vn.Fragment,{children:0===an.id?(0,vn.jsx)(f.Z,{size:"small",styles:{body:{padding:"0 12px"}},children:(0,vn.jsx)(S.Z,{activeKey:ln,onChange:function(n){return dn(n)},items:[].concat(On,Tn)})}):(0,vn.jsxs)(vn.Fragment,{children:[(0,vn.jsx)(L.Z,{component:an,saveCallback:sn,setCurrentComponent:function(n){return sn(n)},callSelectComponentView:function(n){var e;null===(e=gn.current)||void 0===e||e.open({parent:an,container:t,relation:n})}}),null==Pn?void 0:Pn.filter((function(n){return n.widget===b.yD.PRO_TABLE_COLS})).map((function(n){return(0,vn.jsx)(J.Z,{property:n,component:an,saveCallback:sn},n.name)})),null==Pn?void 0:Pn.filter((function(n){return n.widget===b.yD.PRO_PAGE_COLS})).map((function(n){return(0,vn.jsx)(Q.Z,{property:n,component:an,saveCallback:sn},n.name)})),null==Pn?void 0:Pn.filter((function(n){return n.widget===b.yD.PRO_DESC_COLS})).map((function(n){return(0,vn.jsx)(K.Z,{property:n,component:an,saveCallback:sn},n.name)})),null==Pn?void 0:Pn.filter((function(n){return n.widget===b.yD.TABLE_COLS})).map((function(n){return(0,vn.jsx)(nn.Z,{property:n,component:an,saveCallback:sn},n.name)})),null==Pn?void 0:Pn.filter((function(n){return n.widget===b.yD.FORM_ITEMS})).map((function(n){return(0,vn.jsx)(Y.Z,{property:n,component:an,saveCallback:sn},n.name)})),null==Pn?void 0:Pn.filter((function(n){return n.widget===b.yD.DESC_ITEMS})).map((function(n){return(0,vn.jsx)(G.Z,{property:n,component:an,setCurrentComponent:function(n){return sn(n)},saveCallback:sn,callSelectComponentView:function(n){var e;null===(e=gn.current)||void 0===e||e.open({parent:an,container:t,relation:n})}},n.name)})),null==Pn?void 0:Pn.filter((function(n){return n.widget===b.yD.TAB_ITEMS})).map((function(n){return(0,vn.jsx)($.Z,{property:n,component:an,setCurrentComponent:function(n){return sn(n)},saveCallback:sn,callSelectComponentView:function(n){var e;null===(e=gn.current)||void 0===e||e.open({parent:an,container:t,relation:n})}},n.name)})),null==Pn?void 0:Pn.filter((function(n){return n.widget===b.yD.COLLAPSE_ITEMS})).map((function(n){return(0,vn.jsx)(M.Z,{property:n,component:an,setCurrentComponent:function(n){return sn(n)},saveCallback:sn,callSelectComponentView:function(n){var e;null===(e=gn.current)||void 0===e||e.open({parent:an,container:t,relation:n})}},n.name)})),null==Pn?void 0:Pn.filter((function(n){return n.widget===b.yD.SELECT_OPTIONS})).map((function(n){return(0,vn.jsx)(X.Z,{property:n,component:an,saveCallback:sn},n.name)})),null==Pn?void 0:Pn.filter((function(n){return n.widget===b.yD.TOUR_STEPS})).map((function(n){return(0,vn.jsx)(en.Z,{property:n,component:an,saveCallback:sn},n.name)})),null==Pn?void 0:Pn.filter((function(n){return n.widget===b.yD.ACTIONS})).map((function(n){return(0,vn.jsx)(N.ZP,{property:n,component:an,saveCallback:sn},n.name)}))]})})})]}):(0,vn.jsx)(j.Z,{description:"请选择或者创建你所需要编辑的组件"})})})]}),(0,vn.jsx)(k.Z,{}),(0,vn.jsx)(hn.Z,{modalRef:Sn}),(0,vn.jsx)(xn,{actionRef:gn,submitCallback:function(){var n=c()(i()().mark((function n(e){var r;return i()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:sn(e),e&&e.containerId!==(null==t?void 0:t.id)&&En(),null===(r=Cn.current)||void 0===r||r.reload();case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()})]})}}}]);