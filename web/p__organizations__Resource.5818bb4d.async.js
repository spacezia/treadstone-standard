"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[286],{92336:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(2053),a=t(50959),i={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM653.3 424.6l52.2 52.2a8.01 8.01 0 01-4.7 13.6l-179.4 21c-5.1.6-9.5-3.7-8.9-8.9l21-179.4c.8-6.6 8.9-9.4 13.6-4.7l52.4 52.4 256.2-256.2c3.1-3.1 8.2-3.1 11.3 0l42.4 42.4c3.1 3.1 3.1 8.2 0 11.3L653.3 424.6z"}}]},name:"import",theme:"outlined"},o=t(58714),l=function(e,n){return a.createElement(o.Z,(0,r.Z)({},e,{ref:n,icon:i}))};var u=a.forwardRef(l)},83745:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(2053),a=t(50959),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"}}]},name:"menu",theme:"outlined"},o=t(58714),l=function(e,n){return a.createElement(o.Z,(0,r.Z)({},e,{ref:n,icon:i}))};var u=a.forwardRef(l)},20947:function(e,n,t){var r=t(57904),a=t(99459),i=t(53162),o=t(69501),l=t(81517),u=t(98037),c=t(73115),s=t(83036),d=t(26314),f=t(67413),p=t(92629),v=t(38801),h=t(41751),m=t(44193),x=t(64684),Z=t(47113),g=t(74276),y=t(75124),b=t(6496),w=t(50959),j=t(28117),C=t(11527),k=["onTableChange","maxLength","formItemProps","recordCreatorProps","rowKey","controlled","defaultValue","onChange","editableFormRef"],I=["record","position","creatorButtonText","newRecordType","parentKey","style"],P=w.createContext(void 0);function S(e){var n,t=e.children,r=e.record,a=e.position,i=e.newRecordType,c=e.parentKey,s=(0,w.useContext)(P);return w.cloneElement(t,(0,u.Z)((0,u.Z)({},t.props),{},{onClick:(n=(0,l.Z)((0,o.Z)().mark((function e(n){var l,u,d;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(l=(u=t.props).onClick)||void 0===l?void 0:l.call(u,n);case 2:if(!1!==e.sent){e.next=5;break}return e.abrupt("return");case 5:null==s||null===(d=s.current)||void 0===d||d.addEditRecord(r,{position:a,newRecordType:i,parentKey:c});case 6:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})}))}function R(e){var n,t,o=(0,f.YB)(),l=e.onTableChange,d=e.maxLength,Z=(e.formItemProps,e.recordCreatorProps),R=e.rowKey,E=(e.controlled,e.defaultValue),F=(e.onChange,e.editableFormRef),T=(0,i.Z)(e,k),V=(0,w.useRef)(void 0),K=(0,w.useRef)(),A=(0,w.useRef)();(0,w.useImperativeHandle)(T.actionRef,(function(){return K.current}),[K.current]);var L=(0,g.Z)((function(){return e.value||E||[]}),{value:e.value,onChange:e.onChange}),O=(0,a.Z)(L,2),B=O[0],N=O[1],M=w.useMemo((function(){return"function"==typeof R?R:function(e,n){return e[R]||n}}),[R]),z=(0,p.J)((function(n){if("number"==typeof n&&!e.name){if(n>=B.length)return n;var t=B&&B[n];return null==M?void 0:M(t,n)}if(("string"==typeof n||n>=B.length)&&e.name){var r=B.findIndex((function(e,t){var r;return(null==M||null===(r=M(e,t))||void 0===r?void 0:r.toString())===(null==n?void 0:n.toString())}));if(-1!==r)return r}return n}));(0,w.useImperativeHandle)(F,(function(){var n=function(n){var t,r;if(null==n)throw new Error("rowIndex is required");var a=z(n),i=[e.name,null!==(t=null==a?void 0:a.toString())&&void 0!==t?t:""].flat(1).filter(Boolean);return null===(r=A.current)||void 0===r?void 0:r.getFieldValue(i)};return(0,u.Z)((0,u.Z)({},A.current),{},{getRowData:n,getRowsData:function(){var n,t=[e.name].flat(1).filter(Boolean);if(Array.isArray(t)&&0===t.length){var r,a=null===(r=A.current)||void 0===r?void 0:r.getFieldsValue();return Array.isArray(a)?a:Object.keys(a).map((function(e){return a[e]}))}return null===(n=A.current)||void 0===n?void 0:n.getFieldValue(t)},setRowData:function(t,r){var a,i;if(null==t)throw new Error("rowIndex is required");var o=z(t),l=[e.name,null!==(a=null==o?void 0:o.toString())&&void 0!==a?a:""].flat(1).filter(Boolean),c=Object.assign({},(0,u.Z)((0,u.Z)({},n(t)),r||{})),s=(0,b.Z)({},l,c);return null===(i=A.current)||void 0===i||i.setFieldsValue(s),!0}})}),[z,e.name,A.current]),(0,w.useEffect)((function(){e.controlled&&(B||[]).forEach((function(e,n){var t;null===(t=A.current)||void 0===t||t.setFieldsValue((0,r.Z)({},"".concat(M(e,n)),e))}),{})}),[(0,v.ZP)(B),e.controlled]),(0,w.useEffect)((function(){var n;e.name&&(A.current=null==e||null===(n=e.editable)||void 0===n?void 0:n.form)}),[null===(n=e.editable)||void 0===n?void 0:n.form,e.name]);var H=Z||{},D=H.record,q=H.position,_=H.creatorButtonText,U=H.newRecordType,J=H.parentKey,W=H.style,Y=(0,i.Z)(H,I),$="top"===q,G=(0,w.useMemo)((function(){return!("number"==typeof d&&d<=(null==B?void 0:B.length))&&(!1!==Z&&(0,C.jsx)(S,{record:(0,h.h)(D,null==B?void 0:B.length,B)||{},position:q,parentKey:(0,h.h)(J,null==B?void 0:B.length,B),newRecordType:U,children:(0,C.jsx)(x.ZP,(0,u.Z)((0,u.Z)({type:"dashed",style:(0,u.Z)({display:"block",margin:"10px 0",width:"100%"},W),icon:(0,C.jsx)(c.Z,{})},Y),{},{children:_||o.getMessage("editableTable.action.add","添加一行数据")}))}))}),[Z,d,null==B?void 0:B.length]),Q=(0,w.useMemo)((function(){return G?$?{components:{header:{wrapper:function(e){var n,t=e.className,r=e.children;return(0,C.jsxs)("thead",{className:t,children:[r,(0,C.jsxs)("tr",{style:{position:"relative"},children:[(0,C.jsx)("td",{colSpan:0,style:{visibility:"hidden"},children:G}),(0,C.jsx)("td",{style:{position:"absolute",left:0,width:"100%"},colSpan:null===(n=T.columns)||void 0===n?void 0:n.length,children:G})]})]})}}}}:{tableViewRender:function(n,t){var r,a;return(0,C.jsxs)(C.Fragment,{children:[null!==(r=null===(a=e.tableViewRender)||void 0===a?void 0:a.call(e,n,t))&&void 0!==r?r:t,G]})}}:{}}),[$,G]),X=(0,u.Z)({},e.editable),ee=(0,p.J)((function(n,t){var r,a,i,o;(null===(r=e.editable)||void 0===r||null===(a=r.onValuesChange)||void 0===a||a.call(r,n,t),null===(i=e.onValuesChange)||void 0===i||i.call(e,t,n),e.controlled)&&(null==e||null===(o=e.onChange)||void 0===o||o.call(e,t))}));return(null!=e&&e.onValuesChange||null!==(t=e.editable)&&void 0!==t&&t.onValuesChange||e.controlled&&null!=e&&e.onChange)&&(X.onValuesChange=ee),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(P.Provider,{value:K,children:(0,C.jsx)(j.Z,(0,u.Z)((0,u.Z)((0,u.Z)({search:!1,options:!1,pagination:!1,rowKey:R,revalidateOnFocus:!1},T),Q),{},{tableLayout:"fixed",actionRef:K,onChange:l,editable:(0,u.Z)((0,u.Z)({},X),{},{formProps:(0,u.Z)({formRef:A},X.formProps)}),dataSource:B,onDataSourceChange:function(n){if(N(n),e.name&&"top"===q){var t,r=(0,b.Z)({},[e.name].flat(1).filter(Boolean),n);null===(t=A.current)||void 0===t||t.setFieldsValue(r)}}}))}),e.name?(0,C.jsx)(s.Z,{name:[e.name],children:function(n){var t,r;if(!V.current)return V.current=B,null;var a=(0,y.Z)(n,[e.name].flat(1)),i=null==a?void 0:a.find((function(e,n){var t;return!(0,m.A)(e,null===(t=V.current)||void 0===t?void 0:t[n])}));return V.current=B,i?(null==e||null===(t=e.editable)||void 0===t||null===(r=t.onValuesChange)||void 0===r||r.call(t,i,a),null):null}}):null]})}function E(e){var n=d.ZP.useFormInstance();return e.name?(0,C.jsx)(Z.Z.Item,(0,u.Z)((0,u.Z)({style:{maxWidth:"100%"}},null==e?void 0:e.formItemProps),{},{name:e.name,shouldUpdate:function(n,t){var r=[e.name].flat(1);try{return JSON.stringify((0,y.Z)(n,r))!==JSON.stringify((0,y.Z)(t,r))}catch(e){return!0}},children:(0,C.jsx)(R,(0,u.Z)((0,u.Z)({},e),{},{editable:(0,u.Z)((0,u.Z)({},e.editable),{},{form:n})}))})):(0,C.jsx)(R,(0,u.Z)({},e))}E.RecordCreator=S,n.Z=E},80861:function(e,n,t){var r=t(26068),a=t.n(r),i=t(48305),o=t.n(i),l=t(67825),u=t.n(l),c=t(45889),s=t(45144),d=t(50959),f=t(49434),p=t(11527),v=["value","onChange"];n.Z=function(e){var n=e.value,t=e.onChange,r=u()(e,v),i=d.useState([]),l=o()(i,2),h=l[0],m=l[1],x=(0,c.Z)(f.I7,{onSuccess:function(e){m(e.data||[])}}).loading;return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(s.default,a()({allowClear:!0,showSearch:!0,value:n,loading:x,placeholder:"请选择成员",style:{width:"100%"},filterOption:function(e,n){var t,r;return(null!==(t=null==n||null===(r=n.label)||void 0===r?void 0:r.toString())&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},options:h.map((function(e){return a()(a()({},e),{},{label:e.name,value:e.id})})),onChange:function(e,n){null==t||t(e,n)}},r))})}},15526:function(e,n,t){t.r(n),t.d(n,{default:function(){return Y}});var r=t(26068),a=t.n(r),i=t(90228),o=t.n(i),l=t(87999),u=t.n(l),c=t(48305),s=t.n(c),d=t(64684),f=t(56655),p=t(70725),v=t(73264),h=t(912),m=t(22825),x=t(10754),Z=t(14471),g=t(37348),y=t(50959),b=t(64155),w=t(35363),j=t(33600),C=t(28117),k=t(10218),I=t(11527),P=function(e){var n=e.actionRef,t=e.selectedCallback,r=(0,y.useState)(!1),a=s()(r,2),i=a[0],o=a[1],l=(0,y.useState)([]),u=s()(l,2),c=u[0],f=u[1],p=(0,y.useState)([]),v=s()(p,2),h=v[0],m=v[1],x=(0,j.useRequest)(k.s0,{manual:!0}),b=x.loading,P=x.data,S=x.run;return(0,y.useImperativeHandle)(n,(function(){return{open:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"WEBAPP";o(!0),S({type:e})}}})),(0,I.jsx)(w.Z,{width:600,title:"选择应用",destroyOnClose:!0,maskClosable:!1,onCancel:function(){o(!1)},open:i,footer:(0,I.jsxs)(Z.Z,{children:[(0,I.jsx)(d.ZP,{onClick:function(){o(!1)},children:"取消"}),(0,I.jsx)(d.ZP,{type:"primary",onClick:function(){h.length&&(null==t||t(h)),o(!1)},children:"确定"})]}),afterClose:function(){f([]),m([])},children:(0,I.jsx)(g.Z,{spinning:b,style:{width:"100%"},children:(0,I.jsx)(C.Z,{rowKey:"uuid",dataSource:P||[],tableAlertRender:!1,toolBarRender:!1,pagination:!1,search:!1,rowSelection:{type:"radio",selectedRowKeys:c,preserveSelectedRowKeys:!0,onChange:function(e,n){f(e),m(n)}},columns:[{title:"name",dataIndex:"name"},{title:"description",dataIndex:"description"}]})})})},S=t(20370),R=function(e){var n=e.actionRef,t=e.selectedCallback,r=(0,y.useState)(!1),a=s()(r,2),i=a[0],o=a[1],l=(0,y.useState)([]),u=s()(l,2),c=u[0],f=u[1],p=(0,y.useState)([]),v=s()(p,2),h=v[0],m=v[1],x=(0,j.useRequest)(S._j,{manual:!0}),b=x.data,k=x.run,P=x.loading;return y.useImperativeHandle(n,(function(){return{open:function(){o(!0),k()}}})),(0,I.jsx)(w.Z,{width:600,title:"选择接口",destroyOnClose:!0,maskClosable:!1,open:i,onCancel:function(){o(!1)},footer:(0,I.jsxs)(Z.Z,{children:[(0,I.jsx)(d.ZP,{onClick:function(){o(!1)},children:"取消"}),(0,I.jsx)(d.ZP,{type:"primary",onClick:function(){h.length&&(null==t||t(h)),o(!1)},children:"确定"})]}),afterClose:function(){o(!1),f([]),m([])},children:(0,I.jsx)(g.Z,{spinning:P,style:{width:"100%"},children:(0,I.jsx)(C.Z,{rowKey:function(e){var n;return null===(n=e.id)||void 0===n?void 0:n.toString()},dataSource:b||[],tableAlertRender:!1,toolBarRender:!1,pagination:!1,search:!1,rowSelection:{type:"radio",selectedRowKeys:c,preserveSelectedRowKeys:!0,onChange:function(e,n){f(e),m(n)}},columns:[{title:"name",dataIndex:"name"},{title:"description",dataIndex:"description"}]})})})},E=t(38653),F=t(7733),T=t(28213),V=t(49434),K=t(1002),A=t(83745),L=t(80525),O=t(92336),B=t(20947),N=t(47113),M=t(11204),z=t(80861),H=t(45889),D=t(67825),q=t.n(D),_=["id"];function U(e,n){return J.apply(this,arguments)}function J(){return(J=u()(o()().mark((function e(n,t){var r,i;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,i=q()(n,_),e.abrupt("return",(0,j.request)("/api/organizations/resource/".concat(r),a()({method:"GET",params:a()({},i)},t||{})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W=function(e){var n=e.componentRef,t=e.saveCallback,r=(0,y.useState)(!1),i=s()(r,2),l=i[0],c=i[1],p=(0,y.useState)(!1),v=s()(p,2),h=v[0],m=v[1],x=(0,y.useState)(),Z=s()(x,2),g=Z[0],b=Z[1],j=N.Z.useForm(),C=s()(j,1)[0],P=(0,H.Z)(U,{manual:!0,onSuccess:function(e){var n,t;b(e.data),C.setFieldsValue({uuid:null===(n=e.data)||void 0===n?void 0:n.uuid,roles:(null===(t=e.data)||void 0===t?void 0:t.roles)||[]})}}).run;return(0,y.useImperativeHandle)(n,(function(){return{open:(e=u()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(!0),P({id:n.id.toString()});case 2:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})};var e})),(0,I.jsx)(w.Z,{width:500,title:"绑定角色",destroyOnClose:!0,maskClosable:!1,open:l,onCancel:function(){return c(!1)},afterClose:function(){C.resetFields(),b(void 0)},footer:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(d.ZP,{onClick:function(){c(!1)},children:"取消"}),(0,I.jsx)(d.ZP,{type:"primary",loading:h,onClick:u()(o()().mark((function e(){var n,r,i;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.validateFields();case 2:if(!(n=e.sent)){e.next=11;break}return m(!0),g&&n.roles&&Object.assign(n,{roles:{set:null===(r=n.roles)||void 0===r?void 0:r.map((function(e){return{id:e}}))}}),e.next=8,(0,k.i4)(a()({id:null==g?void 0:g.id},n));case 8:i=e.sent,m(!1),null!=i&&i.success&&(f.ZP.success("保存成功"),c(!1),null==t||t(null==i?void 0:i.data));case 11:case"end":return e.stop()}}),e)}))),children:"保存"})]}),children:(0,I.jsxs)(N.Z,{form:C,children:[(0,I.jsx)(N.Z.Item,{label:"权限编码",name:"uuid",children:(0,I.jsx)(M.Z,{readOnly:!0,placeholder:"请输入元素编码"})}),(0,I.jsx)(N.Z.Item,{label:"关联角色",name:"roles",children:(0,I.jsx)(z.Z,{mode:"multiple"})})]})})},Y=function(){var e,n=(0,y.useState)([]),t=s()(n,2),r=t[0],i=t[1],l=(0,y.useState)(!1),c=s()(l,2),w=c[0],C=c[1],k=(0,y.useState)(),S=s()(k,2),N=S[0],M=S[1],z=(0,y.useState)(),H=s()(z,2),D=H[0],q=H[1],_=(0,y.useState)([]),U=s()(_,2),J=U[0],Y=U[1],$=(0,y.useState)([]),G=s()($,2),Q=G[0],X=G[1],ee=(0,y.useState)(),ne=s()(ee,2),te=ne[0],re=ne[1],ae=(0,y.useState)(!1),ie=s()(ae,2),oe=ie[0],le=ie[1],ue=y.useRef(),ce=y.useRef(),se=y.useRef(),de=(0,j.useModel)("@@initialState"),fe=de.initialState,pe=de.setInitialState,ve=function(){var e=u()(o()().mark((function e(n){var t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,V.a8)({applicationId:n});case 2:200===(null==(t=e.sent)?void 0:t.code)&&i(t.data||[]);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),he=function(){var e=u()(o()().mark((function e(n){var t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,(0,V.wU)(n);case 3:t=e.sent,C(!1),200===(null==t?void 0:t.code)&&Y(t.data||[]);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();y.useEffect((function(){te&&ve(te.id)}),[te]),y.useEffect((function(){re(null==fe?void 0:fe.application)}),[null==fe?void 0:fe.application]);var me,xe=[{title:"资源类型",dataIndex:"scene",valueType:"select",valueEnum:{APPLICATION:"应用",MENU:"菜单",ELEMENT:"元素",API:"接口"}},{title:"名称",dataIndex:"name"},{title:"别名",dataIndex:"alias"},{title:"路径",dataIndex:"path",copyable:!0},{title:"排序",dataIndex:"order",valueType:"digit"},{title:"UUID",dataIndex:"uuid",copyable:!0,editable:!1},{title:"操作",valueType:"option",width:180,fixed:"right",render:function(e,n,t,r){return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(d.ZP,{type:"link",size:"small",onClick:function(){var e;null===(e=ue.current)||void 0===e||e.open(n)},children:"角色关联"},"setting"),(0,I.jsx)(d.ZP,{type:"link",size:"small",onClick:function(){var e;null==r||null===(e=r.startEditable)||void 0===e||e.call(r,n.uuid)},children:"编辑"},"edit"),(0,I.jsx)(d.ZP,{danger:!0,type:"link",size:"small",onClick:u()(o()().mark((function e(){var t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,V.uS)(n.id);case 2:200===(null==(t=e.sent)?void 0:t.code)&&(f.ZP.success("删除成功"),te&&Promise.all([he({applicationId:te.id,parentId:N}),ve(te.id)]));case 4:case"end":return e.stop()}}),e)}))),children:"删除"},"delete")]})}}];return(0,I.jsxs)(T.Z,{activateKey:F.z_.PERMISSION,children:[(0,I.jsxs)(p.Z,{children:[(0,I.jsx)(v.Z,{span:4,style:{paddingRight:6},children:(0,I.jsx)(h.Z,{styles:{body:{padding:12,height:"83vh",overflowY:"auto"},header:{paddingLeft:16}},title:null==te?void 0:te.name,extra:(0,I.jsx)(m.Z,{trigger:["click"],menu:{items:null==fe||null===(e=fe.applications)||void 0===e?void 0:e.map((function(e){return{label:e.name,key:e.uuid}})),onClick:function(e){var n,t=e.key,r=null==fe||null===(n=fe.applications)||void 0===n?void 0:n.find((function(e){return e.uuid===t}));r&&(localStorage.setItem(F.Qt.APPLICATIONID,r.uuid),pe((function(e){return a()(a()({},e),{},{application:r})})),Y([]),X([]),q(void 0),M(void 0))}},children:(0,I.jsx)(d.ZP,{ghost:!0,type:"primary",icon:(0,I.jsx)(K.Z,{})})}),children:(0,I.jsx)(x.Z,{showLine:!0,selectable:!0,defaultExpandAll:!0,treeData:r,fieldNames:{title:"name",key:"id",children:"children"},onSelect:function(e,n){if(e.length&&te){var t=Array.isArray(e)?e[0]:e;M(Number(t)),he({applicationId:te.id,parentId:Number(t)}),q(n.node),X([])}}})})}),(0,I.jsx)(v.Z,{span:20,style:{borderLeft:"1px solid #eee"},children:(0,I.jsx)(h.Z,{styles:{body:{padding:12,height:"83vh",overflowY:"auto"}},title:null==D?void 0:D.name,extra:(0,I.jsx)(Z.Z,{children:(0,I.jsx)(m.Z,{trigger:["click"],menu:{items:[{label:"同步应用菜单资源",key:"menu",icon:(0,I.jsx)(A.Z,{}),onClick:function(){var e;null===(e=ce.current)||void 0===e||e.open()}},{label:"同步应用接口资源",key:"api",icon:(0,I.jsx)(L.Z,{}),onClick:function(){var e;null===(e=se.current)||void 0===e||e.open()}}]},children:(0,I.jsx)(d.ZP,{type:"primary",icon:(0,I.jsx)(O.Z,{}),loading:oe,children:"同步资源"})})}),children:(0,I.jsx)(g.Z,{spinning:w,children:(0,I.jsx)(B.Z,{rowKey:"uuid",headerTitle:null,recordCreatorProps:{position:"bottom",record:function(){return{name:"",uuid:(0,b.Z)(),order:0,scene:null==D?void 0:D.scene}}},columns:xe,value:J,editable:{type:"single",onSave:(me=u()(o()().mark((function e(n,t){var r,i;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a()(a()({},t),{},{applicationId:null==te?void 0:te.id}),!t.id){e.next=7;break}return e.next=4,(0,V.FT)(t);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,(0,V.cp)(N?a()(a()({},r),{},{parentId:N}):r);case 9:e.t0=e.sent;case 10:200===(null==(i=e.t0)?void 0:i.code)&&(f.ZP.success("保存成功"),X([]),te&&N&&Promise.all([he({applicationId:te.id,parentId:N}),ve(te.id)]));case 12:case"end":return e.stop()}}),e)}))),function(e,n){return me.apply(this,arguments)}),editableKeys:Q,onChange:function(e){X(e)}}})})})})]}),(0,I.jsx)(E.Z,{}),(0,I.jsx)(P,{actionRef:ce,selectedCallback:function(){var e=u()(o()().mark((function e(n){var t,r;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!te){e.next=7;break}return le(!0),e.next=4,(0,V.L0)({current:null==te?void 0:te.id,applicationId:null==n||null===(t=n[0])||void 0===t?void 0:t.id,scene:"MENU"});case 4:r=e.sent,le(!1),null!=r&&r.success&&(f.ZP.success("同步成功"),Promise.all([he({applicationId:te.id,parentId:N}),ve(te.id)]));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),(0,I.jsx)(R,{actionRef:se,selectedCallback:function(){var e=u()(o()().mark((function e(n){var t,r;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!te){e.next=7;break}return le(!0),e.next=4,(0,V.ui)({current:null==te?void 0:te.id,groupId:null==n||null===(t=n[0])||void 0===t?void 0:t.id,scene:"API"});case 4:r=e.sent,le(!1),null!=r&&r.success&&(f.ZP.success("同步成功"),Promise.all([he({applicationId:te.id,parentId:N}),ve(te.id)]));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),(0,I.jsx)(W,{componentRef:ue,saveCallback:function(){}})]})}},20370:function(e,n,t){t.d(n,{B$:function(){return c},CX:function(){return p},FT:function(){return m},FW:function(){return s},KR:function(){return d},Lk:function(){return v},_j:function(){return u},r$:function(){return l},r1:function(){return x},rn:function(){return f},yv:function(){return h}});var r=t(67825),a=t.n(r),i=t(92447),o=["datasource"],l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.ZP.post("api/datasources/database/list",e)},u=function(){return i.ZP.post("api/datasources/service-group/list")},c=function(e){return i.ZP.post("api/datasources/service-group",e)},s=function(e){return i.ZP.delete("api/datasources/service-group/".concat(e))},d=function(e){return i.ZP.post("api/datasources/dataservice/page",e)},f=function(e){return i.ZP.get("api/datasources/database/".concat(e,"/queryDatabaseTables/"))},p=function(e){var n=e.datasource,t=a()(e,o);return i.ZP.get("api/datasources/database/".concat(n,"/queryTableColumns/"),t)},v=function(e){return i.ZP.get("api/datasources/dataservice/".concat(e))},h=function(e,n){return i.ZP.post("api/datasources/service-group/".concat(e,"/migrate"),n)},m=function(e){return i.ZP.post("api/datasources/dataschema/list",e)},x=function(e){var n=e.datasource;return i.ZP.delete("api/datasources/database/".concat(n))}}}]);